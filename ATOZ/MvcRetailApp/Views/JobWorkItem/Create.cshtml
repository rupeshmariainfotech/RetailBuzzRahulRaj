@model CodeFirstEntities.MainApplication
@{
    ViewBag.Title = "Create";
}

<meta charset="utf-8" />
<title>Retail Managment Software</title>
<meta name="keywords" content="Retail Software" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- Font CSS  -->
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700" />
<link href="~/Content/style.default.css" rel="stylesheet" />
<link href="~/Content/style.default.blue.css" rel="stylesheet" />
<!-- Core CSS  -->
<link rel="stylesheet" type="text/css" href="~/Content/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="~/Content/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="~/Content/sb-admin-2.css" />
<link rel="stylesheet" type="text/css" href="~/Content/metisMenu.min.css" />
<link rel="stylesheet" type="text/css" href="~/Content/font-awesome.css" />
<link rel="stylesheet" type="text/css" href="~/fonts/glyphicons.min.css" />

<!-- Plugin CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/fullcalendar.css" />
<link rel="stylesheet" type="text/css" href="~/Content/datatables.min.css" />

<!-- Theme CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/theme.css" />
<link rel="stylesheet" type="text/css" href="~/Content/pages.css" />
<link rel="stylesheet" type="text/css" href="~/Content/plugins.css" />
<link rel="stylesheet" type="text/css" href="~/Content/responsive.css" />

<!-- Demonstration CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/demo.css" />

<!-- Your Custom CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/custom.css" />

<!-- Favicon -->
<link rel="shortcut icon" href="~/Images/favicon.ico" />

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script src="@Url.Content("~/Scripts/jquery-1.9.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.9.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.24.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.24.min.js")" type="text/javascript"></script>

<!-- Plugins - Via CDN -->
<script type="text/javascript" src="~/Scripts/jquery.flot.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.sparkline.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="~/Scripts/fullcalendar.min.js"></script>
<script type="text/javascript" src="~/Scripts/bootstrap.js"></script>


<script type="text/javascript" src="~/Scripts/jquery.scrollTo-1.4.3.1-min.js"></script>

<!-- Theme Javascript -->
<script type="text/javascript" src="~/Scripts/uniform.min.js"></script>
<script type="text/javascript" src="~/Scripts/main.js"></script>
<script type="text/javascript" src="~/Scripts/custom.js"></script>
<script type="text/javascript" src="~/Scripts/sb-admin-2.js"></script>
<script type="text/javascript" src="~/vendor/plugins/metisMenu/metisMenu.min.js"></script>
<link href="~/Content/customAlerts.css" rel="stylesheet" />
<script src="~/Scripts/bootbox.js"></script>

<script type="text/javascript">
    function alertbox(message) {
        var sample = document.getElementById("audio");
        sample.src = '../../Audio/tone1.ogg';

        sample.load();
        sample.muted = false;
        sample.play();

        bootbox.classes('alertClass');
        bootbox.alert('<i class="fa fa-2x fa-warning"></i><br>' + message + '<hr>');
    }

    function confirmbox(message, row) {
        var sample = document.getElementById("audio");
        sample.src = '../../Audio/tone2.ogg';
        sample.load();
        sample.muted = false;
        sample.play();

        bootbox.classes('confirmClass');
        bootbox.confirm('<i class="fa fa-2x fa-question-circle"></i><br>' + message + '<hr>',
		 function (result) {
		     if (result) {
		         $("#" + row).remove();
		     }
		 });
    }
</script>

<script type="text/javascript">
    jQuery(document).ready(function () {

        // Init Theme Core 	  
        Core.init();

        $("input").keypress(function (evt) {
            if (evt.keyCode == 13) {
                iname = $(this).val();
                if (iname !== 'Submit') {
                    var fields =
$(this).parents('form:eq(0),body').find();
                    var index = fields.index(this);
                    if (index > -1 && (index + 1) < fields.length) {
                        fields.eq(index + 1).focus();
                    }
                    return false;
                }
            }
        });
        $("#ItemDetails_itemCategory").focus();
    });

</script>

@*GET SUBCATEGORY BY CATEGORY*@
<script type="text/javascript">
    $(function () {
        $("#ItemDetails_itemCategory").autocomplete({
            source: "/JobWorkItem/GetCategory",
            minLength: 1,
            select: function (event, ui) {
                document.getElementById("DDLSubCat").disabled = false;
                document.getElementById("item").disabled = false;

                if (ui.item) {
                    $("#ItemDetails_itemCategory").val(ui.item.value);
                    var idModel = document.getElementById("ItemDetails_itemCategory").value;
                    $.getJSON("/JobWorkItem/LoadSubCategoryByCategory", { id: idModel },
           function (stateData) {
               var select = $("#DDLSubCat");
               select.empty();
               select.append($('<option/>', {
                   value: "",
                   text: "Select SubCategory"
               }));
               $.each(stateData, function (index, itemData) {

                   select.append($('<option/>', {
                       value: itemData.Value,
                       text: itemData.Text
                   }));
               });
           });
                    $("#ItemDetails_itemCategory").change(function () {
                        if (document.getElementById("ItemDetails_itemCategory").value == "") {
                            var select = $("#DDLSubCat");
                            select.empty();
                            select.append($('<option/>', {
                                value: "",
                                text: "Select SubCategory"
                            }));
                            document.getElementById("sortable1").innerHTML = "";
                            document.getElementById("Save").style.display = "none";
                        }
                    });
                }
            }
        });
    });
</script>

@*DISPLAY DETAILS ON ITEM CHANGE EVENT*@
<script type="text/javascript">
    $(document).ready(function () {
        var rowId = 1;
        $("#item").change(function () {

            if ($("#DDLSubCat").val() != "") {

                document.getElementById("ItemDetails_itemCategory").disabled = true;
                document.getElementById("DDLSubCat").disabled = true;
                document.getElementById("item").disabled = true;

                $("#sortable1").empty();
                var unorderedList = $("#sortable1");
                var row = "row" + rowId;
                var select = "TypeOfMaterial" + rowId;
                var selectunit = "UnitList" + rowId;
                var colorCodeSelect = "ColorCode" + rowId;
                var designname = "designName" + rowId;
                var unitnumbertype = "NumberType" + rowId;
                var typeOfMaterial = document.createElement("SELECT");
                var colorCode = document.createElement("SELECT");
                var unit = document.createElement("SELECT");
                var designCode = "designCodeData" + rowId;
                var idModel1 = $(this).val();
                var category = document.getElementById("ItemDetails_itemCategory").value;

                //GET TYPE OF MATERIAL DDL
                $.getJSON("/JobWorkItem/LoadTypeOfMaterial", {},
                function (stateData) {
                    typeOfMaterial.className = "form-control";
                    typeOfMaterial.id = "materialType" + rowId;
                    typeOfMaterial.name = "materialType" + rowId;
                    var myoption1 = document.createElement("option");
                    myoption1.text = "Select Type Of Material";
                    myoption1.value = "";
                    typeOfMaterial.appendChild(myoption1);
                    $.each(stateData, function (index, itemData) {
                        var myoption = document.createElement("option");
                        myoption.text = itemData.Text;
                        myoption.value = itemData.Value;
                        typeOfMaterial.appendChild(myoption);
                    });
                });

                //GET COLOR DDL
                $.getJSON("/JobWorkItem/LoadColorCode", {},
                function (stateData) {
                    colorCode.className = "form-control";
                    colorCode.id = "colorCodeData" + rowId;
                    colorCode.name = "colorCodeData" + rowId;
                    var myoption1 = document.createElement("option");
                    myoption1.text = "Select Color Code";
                    myoption1.value = "";
                    colorCode.appendChild(myoption1);
                    $.each(stateData, function (index, itemData) {
                        var myoption = document.createElement("option");
                        myoption.text = itemData.Text;
                        myoption.value = itemData.Value;
                        colorCode.appendChild(myoption);
                    });
                });

                //GET DESIGN NAME DDL
                $.getJSON("/JobWorkItem/LoadDesignCode", { type: document.getElementById("DDLSubCat").value },
                function (stateData) {
                    var select = $("#" + designCode);
                    select.empty();
                    select.append($('<option/>', {
                        value: "",
                        text: "Select Design"
                    }));
                    $.each(stateData, function (index, itemData) {
                        select.append($('<option/>', {
                            value: itemData.Value,
                            text: itemData.Text
                        }));
                    });
                });

                //GET UNIT LIST
                $.getJSON("/JobWorkItem/LoadUnitList", {},
                               function (stateData) {
                                   unit.className = "form-control";
                                   unit.id = "Unit" + rowId;
                                   unit.name = "Unit" + rowId;
                                   var myoption1 = document.createElement("option");
                                   myoption1.text = "Select Unit";
                                   myoption1.value = "";
                                   unit.appendChild(myoption1);
                                   $.each(stateData, function (index, itemData) {
                                       var myoption = document.createElement("option");
                                       myoption.text = itemData.Text;
                                       myoption.value = itemData.Value;
                                       unit.appendChild(myoption);
                                   });
                               });

                unorderedList.append(
                "<div class='panel' id='" + row + "'> " +
                "<div class='form-group'></div><div class='row'><div class='col-md-12 col-lg-12'>" +
                "<div class='form-group col-md-3 col-lg-3'><label>Description</label><textarea rows='1' placeholder='Item Description' class='form-control' name='itemDescription" + rowId + "' id='itemDescription" + rowId + "' autocomplete='off'/></div>" +
                "<div class='form-group col-md-3 col-lg-3'><label>Unit<i style='color:red'>*</i></label><div id='" + selectunit + "' name='" + selectunit + "' onchange='GetUnitDecimalType(" + rowId + ")'><input type='hidden' id='" + unitnumbertype + "' name='" + unitnumbertype + "'/></div></div>" +
                "<div class='form-group col-md-3 col-lg-3'><label>Size<i style='color:red'>*</i></label><input type='text' placeholder='Size' class='form-control' name='Size" + rowId + "' id='Size" + rowId + "' onkeypress='return DontAllowWhiteSpace(event)' autocomplete='off'/></div>" +
                "<div class='form-group col-md-3 col-lg-3' id='" + select + "'><label>Type Of Material<i style='color:red'>*</i></label></div>" +
                "</div></div>" +

                "<div class='row'><div class='col-md-12 col-lg-12'>" +
                "<div class='form-group col-md-3 col-lg-3' id='" + colorCodeSelect + "'><label>Color Code<i style='color:red'>*</i></label></div>" +
                "<div class=' form-group col-md-3 col-lg-3'><label>Design Code<i style='color:red'>*</i></label><select id='" + designCode + "' name='" + designCode + "' class='form-control'><option value=''>Select Design</option></select><input type='hidden' id='" + designname + "' name='" + designname + "'></input></div>" +
                "<div class='form-group col-md-3 col-lg-3'><label>Brand Name<i style='color:red'>*</i></label><select id='BrandName" + rowId + "' name='BrandName" + rowId + "' class='form-control'><option value=''>Select Brand</option><option value='BombayDyeing'>Bombay Dyeing</option><option value='Portico'>Portico</option><option value='LouisPhillipse'>Louis Phillipse</option><option value='AllenSolly'>Allen Solly</option><option value='Provogue'>Provogue</option><option value='VanHeusen'>Van Heusen</option><option value='TommyHilFiger'>Tommy HilFiger</option></select></div>" +
                "</div></div>" +

                "</div>"
                );

                $("#hdnRowCount").val(rowId);
                var finalList = document.getElementById(select);
                finalList.appendChild(typeOfMaterial);
                var finalList1 = document.getElementById(colorCodeSelect);
                finalList1.appendChild(colorCode);
                var FinalUnitList = document.getElementById(selectunit);
                FinalUnitList.appendChild(unit);

                document.getElementById("Save").style.display = "inline";

                //GET DESIGN NAME FROM DESIGN CODE
                $("#" + designCode).change(function () {
                    var CODE = document.getElementById(designCode).value;
                    if (CODE != "") {
                        $.getJSON("/JobWorkItem/GetDesignDetails", { code: CODE },
                            function (data) {
                                $("#" + designname).val(data);
                            });
                    }
                });
            }
            else {
                alertbox("Please Select Sub Category");
                document.getElementById("item").value = "";
                document.getElementById("sortable1").innerHTML = "";
                document.getElementById("Save").style.display = "none";
            }
        });
    });
</script>

@*DYNAMIC ROW CREATION ON ENTER BUTTON*@
<script type="text/javascript">
    $(document).keypress(function (e) {
        if (e.which == 13) {
           
            if ($("#DDLSubCat").val() != "" && $("#item").val() != "") {
                var rowId = document.getElementById("hdnRowCount").value;

                //CHECK ALL DATA IS FILL OR NOT
                var row = "row" + rowId;
                var typeOfMaterial = "materialType" + rowId;
                var colorCode = "colorCodeData" + rowId;
                var designCode = "designCodeData" + rowId;
                var designname = "designName" + rowId;
                var description = "itemDescription" + rowId;
                var size = "Size" + rowId;
                var unit = "Unit" + rowId;
                var brandname = "BrandName" + rowId;

                if (document.getElementById(unit) != null) {
                    //If previous row is inventory then check all the validations
                    if ($("#" + typeOfMaterial).val() == "" || $("#" + colorCode).val() == "" || $("#" + unit).val() == "" ||
                                  $("#" + brandname).val() == "" || $("#" + size).val() == "" || $("#" + designCode).val() == "") {
                        alertbox("Please Fill The Mandatory Fields");
                    }

                    else {
                        //CHECK IF SAME ITEM IS ALREADY CREATED THEN GET ALERT 
                        var counter = 0;
                        for (i = 1; i < rowId; i++) {
                            var MATERIAL = "materialType" + i;
                            var COLOR = "colorCodeData" + i;
                            var BRAND = "BrandName" + i;
                            var SIZE = "Size" + i;
                            var DESIGN = "designCodeData" + i;
                            var UNIT = "Unit" + i;

                            var material = document.getElementById("materialType" + rowId).value;
                            var color = document.getElementById("colorCodeData" + rowId).value;
                            var brand = document.getElementById("BrandName" + rowId).value;
                            var size = document.getElementById("Size" + rowId).value;
                            var design = document.getElementById("designCodeData" + rowId).value;
                            var unit = document.getElementById("Unit" + rowId).value;

                            //IF ROW IS DELETED THEN CURRENT ITEM WON'T GET COMPARED
                            if ($("#" + MATERIAL).val() == material && $("#" + COLOR).val() == color && $("#" + BRAND).val() == brand && $("#" + SIZE).val() == size && $("#" + DESIGN).val() == design && $("#" + UNIT).val() == unit) {
                                alertbox("The Item Is Already Created..");
                                counter = i;
                                break;
                            }
                        }

                        if (counter == 0) {

                            var material = document.getElementById("materialType" + rowId).value;
                            var color = document.getElementById("colorCodeData" + rowId).value;
                            var brand = document.getElementById("BrandName" + rowId).value;
                            var size = document.getElementById("Size" + rowId).value;
                            var design = document.getElementById("designCodeData" + rowId).value;
                            var unit = document.getElementById("Unit" + rowId).value;
                            var CAT = document.getElementById("ItemDetails_itemCategory").value;
                            var SUBCAT = document.getElementById("DDLSubCat").value;

                            //CHECK ITEM IS ALREADY CREATED IN THE DATABASE
                            $.getJSON("/JobWorkItem/GetAllItemDetails", { Material: material, Color: color, Brand: brand, Size: size, Design: design, Unit: unit, Cat: CAT, SubCat: SUBCAT },
                           function (stateData) {
                               if (stateData == "Present") {
                                   alertbox("The Item Is Already Created..")
                               }
                               else {
                                   //DISABLED THE PREVIOUS ROW
                                   var row = "row" + rowId;
                                   var typeOfMaterial = "materialType" + rowId;
                                   var colorCode = "colorCodeData" + rowId;
                                   var designCode = "designCodeData" + rowId;
                                   var designname = "designName" + rowId;
                                   var description = "itemDescription" + rowId;
                                   var size = "Size" + rowId;
                                   var unit = "Unit" + rowId;
                                   var type = "ItemType" + rowId;
                                   var brandname = "BrandName" + rowId;

                                   document.getElementById(typeOfMaterial).disabled = true;
                                   document.getElementById(colorCode).disabled = true;
                                   document.getElementById(designCode).disabled = true;
                                   document.getElementById(description).disabled = true;
                                   document.getElementById(size).disabled = true;
                                   document.getElementById(unit).disabled = true;
                                   document.getElementById(brandname).disabled = true;
                                   GenerateDynamicRows(rowId);
                               }
                           });
                        }
                    }
                }
                else {
                    GenerateDynamicRows(rowId);
                }
            }
            else {
                alertbox("Please Fill Item Name..");
            }
        }
    });
</script>

<script type="text/javascript">
    function GenerateDynamicRows(rowId) {
        rowId = +rowId + 1;
        var unorderedList = $("#sortable1");
        var row = "row" + rowId;
        var select = "TypeOfMaterial" + rowId;
        var colorCodeSelect = "ColorCode" + rowId;
        var designname = "designName" + rowId;
        var selectunit = "UnitList" + rowId;
        var unit = document.createElement("SELECT");
        var type = "ItemType" + rowId;
        var unitnumbertype = "NumberType" + rowId;
        var typeOfMaterial = document.createElement("SELECT");
        var colorCode = document.createElement("SELECT");
        var designCode = "designCodeData" + rowId;
        var category = document.getElementById("ItemDetails_itemCategory").value;

        //GET TYPE OF MATERIAL DDL
        $.getJSON("/JobWorkItem/LoadTypeOfMaterial", {},
        function (stateData) {
            typeOfMaterial.className = "form-control";
            typeOfMaterial.id = "materialType" + rowId;
            typeOfMaterial.name = "materialType" + rowId;
            var myoption1 = document.createElement("option");
            myoption1.text = "Select Type Of Material";
            myoption1.value = "";
            typeOfMaterial.appendChild(myoption1);
            $.each(stateData, function (index, itemData) {
                var myoption = document.createElement("option");
                myoption.text = itemData.Text;
                myoption.value = itemData.Value;
                typeOfMaterial.appendChild(myoption);
            });
        });

        //GET COLOR DDL
        $.getJSON("/JobWorkItem/LoadColorCode", {},
        function (stateData) {
            colorCode.className = "form-control";
            colorCode.id = "colorCodeData" + rowId;
            colorCode.name = "colorCodeData" + rowId;
            var myoption1 = document.createElement("option");
            myoption1.text = "Select Color Code";
            myoption1.value = "";
            colorCode.appendChild(myoption1);
            $.each(stateData, function (index, itemData) {
                var myoption = document.createElement("option");
                myoption.text = itemData.Text;
                myoption.value = itemData.Value;
                colorCode.appendChild(myoption);
            });
        });

        //GET DESIGN NAME DDL
        $.getJSON("/JobWorkItem/LoadDesignCode", { type: document.getElementById("DDLSubCat").value },
        function (stateData) {
            var select = $("#" + designCode);
            select.empty();
            select.append($('<option/>', {
                value: "",
                text: "Select Design"
            }));
            $.each(stateData, function (index, itemData) {
                select.append($('<option/>', {
                    value: itemData.Value,
                    text: itemData.Text
                }));
            });
        });

        //GET UNIT LIST
        $.getJSON("/JobWorkItem/LoadUnitList", {},
                       function (stateData) {
                           unit.className = "form-control";
                           unit.id = "Unit" + rowId;
                           unit.name = "Unit" + rowId;
                           var myoption1 = document.createElement("option");
                           myoption1.text = "Select Unit";
                           myoption1.value = "";
                           unit.appendChild(myoption1);
                           $.each(stateData, function (index, itemData) {
                               var myoption = document.createElement("option");
                               myoption.text = itemData.Text;
                               myoption.value = itemData.Value;
                               unit.appendChild(myoption);
                           });
                       });

        unorderedList.append(
        "<div class='panel' id='" + row + "'> " +
        "<div class='form-group'></div><div class='row'><div class='col-md-12 col-lg-12'>" +
        "<div class='form-group col-md-3 col-lg-3'><label>Description</label><textarea rows='1' placeholder='Item Description' class='form-control' name='itemDescription" + rowId + "' id='itemDescription" + rowId + "' autocomplete='off'/></div>" +
        "<div class='form-group col-md-3 col-lg-3'><label>Unit<i style='color:red'>*</i></label><div id='" + selectunit + "' name='" + selectunit + "' onchange='GetUnitDecimalType(" + rowId + ")'><input type='hidden' id='" + unitnumbertype + "' name='" + unitnumbertype + "'/></div></div>" +
        "<div class='form-group col-md-3 col-lg-3'><label>Size<i style='color:red'>*</i></label><input type='text' placeholder='Size' class='form-control' name='Size" + rowId + "' id='Size" + rowId + "' onkeypress='return DontAllowWhiteSpace(event)' autocomplete='off'/></div>" +
        "<div class='form-group col-md-3 col-lg-3' id='" + select + "'><label>Type Of Material<i style='color:red'>*</i></label></div>" +
        "</div></div>" +

        "<div class='row'><div class='col-md-12 col-lg-12'>" +
        "<div class='form-group col-md-3 col-lg-3' id='" + colorCodeSelect + "'><label>Color Code<i style='color:red'>*</i></label></div>" +
        "<div class=' form-group col-md-3 col-lg-3'><label>Design Code<i style='color:red'>*</i></label><select id='" + designCode + "' name='" + designCode + "' class='form-control'><option value=''>Select Design</option></select><input type='hidden' id='" + designname + "' name='" + designname + "'></input></div>" +
        "<div class='form-group col-md-3 col-lg-3'><label>Brand Name<i style='color:red'>*</i></label><select id='BrandName" + rowId + "' name='BrandName" + rowId + "' class='form-control'><option value=''>Select Brand</option><option value='BombayDyeing'>Bombay Dyeing</option><option value='Portico'>Portico</option><option value='LouisPhillipse'>Louis Phillipse</option><option value='AllenSolly'>Allen Solly</option><option value='Provogue'>Provogue</option><option value='VanHeusen'>Van Heusen</option><option value='TommyHilFiger'>Tommy HilFiger</option></select></div>" +
        "</div></div>" +

        "<div class='row'>" +
        "<div class='col-md-12 col-lg-12'>" +
        "<a href='#' onclick='DeleteRow(" + rowId + ")' class='fa fa-trash fa-lg' style='color:red; float:right'></a>" +
        "</div></div></div>"
        );

        $("#hdnRowCount").val(rowId);

        var finalList = document.getElementById(select);
        finalList.appendChild(typeOfMaterial);
        var finalList1 = document.getElementById(colorCodeSelect);
        finalList1.appendChild(colorCode);
        var FinalUnitList = document.getElementById(selectunit);
        FinalUnitList.appendChild(unit);

        document.getElementById("Save").style.display = "inline";

        //GET DESIGN NAME FROM DESIGN CODE
        $("#" + designCode).change(function () {
            var CODE = document.getElementById(designCode).value;
            if (CODE != "") {
                $.getJSON("/JobWorkItem/GetDesignDetails", { code: CODE },
                    function (data) {
                        $("#" + designname).val(data);
                    });
            }
        });
    }
</script>

@*TO DELETE ROW*@
<script type="text/javascript">
    function DeleteRow(id) {
        var row = "row" + id;
        confirmbox("Are you sure you wish to delete this row?", row);

    }
</script>

@*ENABLE DISABLED ROW*@
<script type="text/javascript">
    $(document).ready(function () {
        $("#Save").click(function () {

            var rowId = document.getElementById("hdnRowCount").value;

            var typeOfMaterial = "materialType" + rowId;
            var colorCode = "colorCodeData" + rowId;
            var designCode = "designCodeData" + rowId;
            var description = "itemDescription" + rowId;
            var size = "Size" + rowId;
            var unit = "Unit" + rowId;
            var brandname = "BrandName" + rowId;

            if (document.getElementById(unit) != null) {
                if ($("#" + typeOfMaterial).val() == "" || $("#" + colorCode).val() == "" || $("#" + unit).val() == "" ||
                    $("#" + brandname).val() == "" || $("#" + size).val() == "" || $("#" + designCode).val() == "") {
                    alertbox("Please Fill The Mandatory Fields");
                    return false;
                }
                else {
                    //CHECK IF SAME ITEM IS ALREADY CREATED THEN GET ALERT 
                    var counter = 0;
                    for (i = 1; i < rowId; i++) {
                        var MATERIAL = "materialType" + i;
                        var COLOR = "colorCodeData" + i;
                        var BRAND = "BrandName" + i;
                        var SIZE = "Size" + i;
                        var DESIGN = "designCodeData" + i;
                        var UNIT = "Unit" + i;

                        var material = document.getElementById("materialType" + rowId).value;
                        var color = document.getElementById("colorCodeData" + rowId).value;
                        var brand = document.getElementById("BrandName" + rowId).value;
                        var size = document.getElementById("Size" + rowId).value;
                        var design = document.getElementById("designCodeData" + rowId).value;
                        var unit = document.getElementById("Unit" + rowId).value;

                        //IF ROW IS DELETED THEN CURRENT ITEM WON'T GET COMPARED
                        if ($("#" + MATERIAL).val() == material && $("#" + COLOR).val() == color && $("#" + BRAND).val() == brand && $("#" + SIZE).val() == size && $("#" + DESIGN).val() == design && $("#" + UNIT).val() == unit) {
                            alertbox("The Item Is Already Created..");
                            counter = i;
                            return false;
                        }
                    }
                    if (counter == 0) {
                        var material = document.getElementById("materialType" + rowId).value;
                        var color = document.getElementById("colorCodeData" + rowId).value;
                        var brand = document.getElementById("BrandName" + rowId).value;
                        var size = document.getElementById("Size" + rowId).value;
                        var design = document.getElementById("designCodeData" + rowId).value;
                        var unit = document.getElementById("Unit" + rowId).value;
                        var CAT = document.getElementById("ItemDetails_itemCategory").value;
                        var SUBCAT = document.getElementById("DDLSubCat").value;

                        //CHECK ITEM IS ALREADY CREATED IN THE DATABASE
                        $.getJSON("/JobWorkItem/GetAllItemDetails", { Material: material, Color: color, Brand: brand, Size: size, Design: design, Unit: unit, Cat: CAT, SubCat: SUBCAT },
                       function (stateData) {
                           if (stateData == "Present") {
                               alertbox("The Item Is Already Created..")
                               return false;
                           }

                           else {
                               //DISABLED DYNAMIC ROW
                               for (var i = 1; i <= rowId; i++) {
                                   var typeOfMaterial = "materialType" + i;
                                   var colorCode = "colorCodeData" + i;
                                   var designCode = "designCodeData" + i;
                                   var description = "itemDescription" + i;
                                   var size = "Size" + i;
                                   var unit = "Unit" + i;
                                   var brandname = "BrandName" + i;

                                   document.getElementById("ItemDetails_itemCategory").disabled = false;
                                   document.getElementById("DDLSubCat").disabled = false;
                                   document.getElementById("item").disabled = false;
                                   if (document.getElementById(unit) != null) {
                                       document.getElementById(typeOfMaterial).disabled = false;
                                       document.getElementById(colorCode).disabled = false;
                                       document.getElementById(designCode).disabled = false;
                                       document.getElementById(description).disabled = false;
                                       document.getElementById(size).disabled = false;
                                       document.getElementById(unit).disabled = false;
                                       document.getElementById(brandname).disabled = false;
                                   }
                               }
                               $("#Submit").trigger('click');
                           }
                       });
                    }
                }
            }
                // IF LAST ITEM IS DELETED THEN WITHOUT VALIDATION SUBMIT THE DATA..
            else {

                for (var i = 1; i <= rowId; i++) {
                    var typeOfMaterial = "materialType" + i;
                    var colorCode = "colorCodeData" + i;
                    var designCode = "designCodeData" + i;
                    var description = "itemDescription" + i;
                    var size = "Size" + i;
                    var unit = "Unit" + i;
                    var brandname = "BrandName" + i;

                    document.getElementById("ItemDetails_itemCategory").disabled = false;
                    document.getElementById("DDLSubCat").disabled = false;
                    document.getElementById("item").disabled = false;

                    if (document.getElementById(unit) != null) {
                        document.getElementById(typeOfMaterial).disabled = false;
                        document.getElementById(colorCode).disabled = false;
                        document.getElementById(designCode).disabled = false;
                        document.getElementById(description).disabled = false;
                        document.getElementById(size).disabled = false;
                        document.getElementById(unit).disabled = false;
                        document.getElementById(brandname).disabled = false;
                    }
                }

                $("#Submit").trigger('click');
            }
        });
    });
</script>

<script type="text/javascript">
    function GetUnitDecimalType(rowid) {
        $.getJSON("/JobWorkItem/GetUnitType", { unit: $("#Unit" + rowid).val() },
            function (data) {
                $("#NumberType" + rowid).val(data);
            });
    }
</script>

<script type="text/javascript">
    $(document).ready(function () {
    function AllowNumbers(key) {
        var keycode = (key.which) ? key.which : key.keyCode;
        //comparing pressed keycodes
        if (!(keycode == 8 || keycode == 46) && (keycode < 48 || keycode > 57)) {
            return false;
        }
    }
    });
</script>


<!-- Start: Header -->
@Html.Partial("../Shared/Header")
<!-- End: Header -->
<!-- Start: Main -->
<section>
    <div class="mainwrapper">
        <div class="col-md-12 col-lg-12">
            <!-- Start: Sidebar -->
            @Html.Partial("../Shared/LeftMenu")
            <!-- End: Sidebar -->
            <!-- Start: Content -->
            @using (Html.BeginForm("Create", "JobWorkItem", FormMethod.Post))
            {
                @Html.ValidationSummary(true)
                <input type="hidden" id="hdnRowCount" name="hdnRowCount" />
                <audio id="audio" muted="true" preload="auto" style="display: none" controls="controls" autoplay="false">
                    <source src="" type="audio/ogg" />
                </audio>
                <div class="mainpanel">
                    <div class="col-md-12 col-lg-12">

                        <br />
                        <h2>Create Job Work Item</h2>
                        <div class="table table-bordered">
                            <div class="row">
                                <div class="col-md-12 col-lg-12">
                                    <div style="height: 10px"></div>
                                    <div class="col-md-12 col-lg-12">
                                        <div class="row">
                                            <div class="form-group col-md-3 col-lg-3">
                                                <label for="exampleInputname">Item Category<i style="color: red">*</i></label>
                                                @Html.TextBoxFor(model => model.ItemDetails.itemCategory, new { id = "ItemDetails_itemCategory", @placeholder = "Item Category Name", @class = "form-control", @autocomplete = "off" })
                                                @Html.ValidationMessageFor(model => model.ItemDetails.itemCategory)

                                            </div>
                                            <div class="form-group col-md-3 col-lg-3">
                                                <label for="exampleInputDistrict">Item Sub Category<i style="color: red">*</i></label>
                                                @Html.DropDownListFor(model => model.ItemDetails.itemSubCategory, Enumerable.Empty<SelectListItem>(), "Please select ", new { id = "DDLSubCat", @class = "form-control", @disabled = "disabled", @autocomplete = "off" })
                                                @Html.ValidationMessageFor(model => model.ItemDetails.itemSubCategory)
                                            </div>
                                            <div class="form-group col-md-3 col-lg-3">
                                                <label>Item Name<i style="color: red">*</i></label>
                                                @Html.TextBoxFor(model => model.ItemDetails.itemName, new { id = "item", @class = "form-control", @placeholder = "Item Name", @disabled = "disabled", @autocomplete = "off" })
                                                @Html.ValidationMessageFor(model => model.ItemDetails.itemName)
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="sortable1"></div>

                        <div class="col-md-offset-5 col-lg-offset-5">
                            <button type="button" class="btn btn-success" id="Save" style="display: none;">Save</button>
                            <button type="submit" class="btn btn-success" id="Submit" style="display: none;">Submit</button>
                        </div>

                    </div>
                </div>
            }
        </div>
    </div>
</section>
<!-- End: Main -->





