@model CodeFirstEntities.MainApplication
@{
    ViewBag.Title = "DeliveryChallan";
}
<!-- Meta, title, CSS, favicons, etc. -->
<meta charset="utf-8" />
<title>Retail Managment Software</title>
<meta name="keywords" content="Retail Software" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- Font CSS  -->
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700" />
<link href="~/Content/style.default.css" rel="stylesheet" />
<link href="~/Content/style.default.blue.css" rel="stylesheet" />
<!-- Core CSS  -->
<link rel="stylesheet" type="text/css" href="~/Content/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="~/Content/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="~/Content/sb-admin-2.css" />
<link rel="stylesheet" type="text/css" href="~/Content/metisMenu.min.css" />
<link rel="stylesheet" type="text/css" href="~/Content/font-awesome.css" />
<link rel="stylesheet" type="text/css" href="~/fonts/glyphicons.min.css" />

<!-- Plugin CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/fullcalendar.css" />
<link rel="stylesheet" type="text/css" href="~/Content/datatables.min.css" />

<!-- Theme CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/theme.css" />
<link rel="stylesheet" type="text/css" href="~/Content/pages.css" />
<link rel="stylesheet" type="text/css" href="~/Content/plugins.css" />
<link rel="stylesheet" type="text/css" href="~/Content/responsive.css" />

<!-- Demonstration CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/demo.css" />

<!-- Your Custom CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/custom.css" />

<!-- Favicon -->
<link rel="shortcut icon" href="~/Images/favicon.ico" />

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script src="@Url.Content("~/Scripts/jquery-1.9.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.9.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.24.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.24.min.js")" type="text/javascript"></script>

<!-- Plugins - Via CDN -->
<script type="text/javascript" src="~/Scripts/jquery.flot.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.sparkline.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="~/Scripts/fullcalendar.min.js"></script>
<script type="text/javascript" src="~/Scripts/bootstrap.js"></script>


<script type="text/javascript" src="~/Scripts/jquery.scrollTo-1.4.3.1-min.js"></script>

<!-- Theme Javascript -->
<script type="text/javascript" src="~/Scripts/uniform.min.js"></script>
<script type="text/javascript" src="~/Scripts/main.js"></script>
<script type="text/javascript" src="~/Scripts/custom.js"></script>
<script type="text/javascript" src="~/Scripts/sb-admin-2.js"></script>
<script type="text/javascript" src="~/vendor/plugins/metisMenu/metisMenu.min.js"></script>
<script type="text/javascript" src="~/Scripts/bootstrap.js"></script>
<link href="~/Content/customAlerts.css" rel="stylesheet" />
<script src="~/Scripts/bootbox.js"></script>

<script type="text/javascript">
    jQuery(document).ready(function () {

        // Init Theme Core 	  
        Core.init();

        $("input").not($(":button")).keypress(function (evt) {
            if (evt.keyCode == 13) {
                iname = $(this).val();
                if (iname !== 'Submit') {
                    var fields = $(this).parents('form:eq(0),body').find('button,input,textarea,select');
                    var index = fields.index(this);
                    if (index > -1 && (index + 1) < fields.length) {
                        fields.eq(index + 1).focus();
                    }
                    return false;
                }
            }
        });

        $("#DeliveryChallanDetails_ClientName").focus();
    });
</script>

<script type="text/javascript">
    function alertbox(message) {
        var sample = document.getElementById("audio");
        sample.src = '../../Audio/tone1.ogg';

        sample.load();
        sample.muted = false;
        sample.play();

        bootbox.classes('alertClass');
        bootbox.alert('<i class="fa fa-2x fa-warning"></i><br>' + message + '<hr>');
    }

    function confirmbox(message, row) {
        var sample = document.getElementById("audio");
        sample.src = '../../Audio/tone2.ogg';
        sample.load();
        sample.muted = false;
        sample.play();

        bootbox.classes('confirmClass');
        bootbox.confirm('<i class="fa fa-2x fa-question-circle"></i><br>' + message + '<hr>',
		 function (result) {
		     if (result) {
		         $("#" + row).remove();
		         var rowid = document.getElementById("hdnRowCount").value;
		         if ($("#DeliveryChallanDetails_QuotNo").val() == "") {
		             CalculateAmount(rowid, '');
		         }
		         else {
		             if ($("#QuotQuantity" + rowid).val() == "---") {
		                 CalculateItemWiseAmount(rowid, '');
		             }
		             else {
		                 CalculateItemWiseAmount(rowid, 'quantity');
		             }
		         }
		         CalculateTotalDiscount();
		         CalcGrandTotal();
		     }
		 });
    }
</script>

<script type="text/javascript">
    function addCommas(yourNumber) {
        var components = yourNumber.toString().split(".");
        if (components.length === 1)
            components[0] = yourNumber;
        components[0] = components[0].replace(/\D/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        if (components.length === 2)
            components[1] = components[1].replace(/\D/g, "");
        return components.join(".");
    }

    function removeCommas(yourNumber) {
        var components = yourNumber.toString().split(".");
        if (components.length === 1)
            components[0] = yourNumber;
        components[0] = components[0].replace(/\D/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, '');
        if (components.length === 2)
            components[1] = components[1].replace(/\D/g, "");
        return components.join(".");
    }

    function DeleteRow(id) {
        var row = "row" + id;
        confirmbox("Are you sure you wish to delete this row?", row);
    }

    function NumberToWords() {
        var junkVal = (+removeCommas(document.getElementById('GrandTotal').innerHTML));
        junkVal = Math.floor(junkVal);
        var obStr = new String(junkVal);
        numReversed = obStr.split("");
        actnumber = numReversed.reverse();
        if (Number(junkVal) > 0) {
            //do nothing
        }
        else if (Number(junkVal) == 0) {
            //document.getElementById('container').innerHTML = obStr + '' + 'Rupees Zero Only';
            return 'Rupees Zero Only';
        }
        else {
            alertbox('wrong Number cannot be converted');
            return false;
        }

        if (actnumber.length > 9) {
            alertbox('Oops!!!! the Number is too big to covertes');
            return false;
        }

        var iWords = ["Zero", " One", " Two", " Three", " Four", " Five", " Six", " Seven", " Eight", " Nine"];
        var ePlace = ['Ten', ' Eleven', ' Twelve', ' Thirteen', ' Fourteen', ' Fifteen', ' Sixteen', ' Seventeen', ' Eighteen', ' Nineteen'];
        var tensPlace = ['dummy', ' Ten', ' Twenty', ' Thirty', ' Forty', ' Fifty', ' Sixty', ' Seventy', ' Eighty', ' Ninety'];

        var iWordsLength = numReversed.length;
        var totalWords = "";
        var inWords = new Array();
        var finalWord = "";
        j = 0;
        for (i = 0; i < iWordsLength; i++) {
            switch (i) {
                case 0:
                    if (actnumber[i] == 0 || actnumber[i + 1] == 1) {
                        inWords[j] = '';
                    }
                    else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    inWords[j] = inWords[j] + ' Only';
                    break;
                case 1:
                    tens_complication();
                    break;
                case 2:
                    if (actnumber[i] == 0) {
                        inWords[j] = '';
                    }
                    else if (actnumber[i - 1] != 0 && actnumber[i - 2] != 0) {
                        inWords[j] = iWords[actnumber[i]] + ' Hundred and';
                    }
                    else {
                        inWords[j] = iWords[actnumber[i]] + ' Hundred';
                    }
                    break;
                case 3:
                    if (actnumber[i] == 0 || actnumber[i + 1] == 1) {
                        inWords[j] = '';
                    }
                    else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    if (actnumber[i + 1] != 0 || actnumber[i] > 0) {
                        inWords[j] = inWords[j] + " Thousand";
                    }
                    break;
                case 4:
                    tens_complication();
                    break;
                case 5:
                    if (actnumber[i] == 0 || actnumber[i + 1] == 1) {
                        inWords[j] = '';
                    }
                    else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    if (actnumber[i + 1] != 0 || actnumber[i] > 0) {
                        inWords[j] = inWords[j] + " Lakh";
                    }
                    break;
                case 6:
                    tens_complication();
                    break;
                case 7:
                    if (actnumber[i] == 0 || actnumber[i + 1] == 1) {
                        inWords[j] = '';
                    }
                    else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    inWords[j] = inWords[j] + " Crore";
                    break;
                case 8:
                    tens_complication();
                    break;
                default:
                    break;
            }
            j++;
        }

        function tens_complication() {
            if (actnumber[i] == 0) {
                inWords[j] = '';
            }
            else if (actnumber[i] == 1) {
                inWords[j] = ePlace[actnumber[i - 1]];
            }
            else {
                inWords[j] = tensPlace[actnumber[i]];
            }
        }
        inWords.reverse();
        for (i = 0; i < inWords.length; i++) {
            finalWord += inWords[i];
        }
        // obStr + '  '+ finalWord;
        return finalWord;
    }
</script>

@*SALES PERSON NAME AUTO COMPLETE*@
<script type="text/javascript">
    $(function () {
        $("#SalesPerson").autocomplete({
            source: "/SalesBill/GetEmployeeName",
            minLength: 1,
            select: function (event, ui) {
                if (ui.item) {
                    $("#SalesPerson").val(ui.item.value);
                    var empname = document.getElementById("SalesPerson").value;

                    $.getJSON("/SalesBill/GetEmployeeDetails", { name: empname },
                   function (data) {

                       document.getElementById("DeliveryChallanDetails_SalesPersonContact").value = data.MobileNo;
                       document.getElementById("DeliveryChallanDetails_SalesPersonEmail").value = data.Email;
                       document.getElementById("DeliveryChallanDetails_SalesPersonAddress").value = data.Address;
                       document.getElementById("DeliveryChallanDetails_SalesPersonDesignation").value = data.Designation;
                   });
                }
            }
        });
    });
</script>

<script type="text/javascript">
    $(document).ready(function () {
        var shopcode = document.getElementById("LoginShopCode").value;

        $.getJSON("/ProcessingQuotation/GetShopDetails", { code: shopcode },
                  function (data) {
                      document.getElementById("DeliveryChallanDetails_ShopContactPerson").value = data.EmpName;
                      document.getElementById("DeliveryChallanDetails_ShopAddress").value = data.ShopAddress;
                      document.getElementById("DeliveryChallanDetails_ShopName").value = data.ShopName;
                      document.getElementById("DeliveryChallanDetails_ShopEmail").value = data.ShopEmail;
                  });

        document.getElementById("PreparedByEmail").innerHTML = document.getElementById("preparedby").value;
        var preparedbyemail = document.getElementById("PreparedByEmail").innerHTML;

        $.getJSON("/RetailBill/GetPreparedByEmpDetails", { email: preparedbyemail },
                  function (data) {
                      document.getElementById("PreparedByName").innerHTML = data.Name;
                      document.getElementById("PreparedByContact").innerHTML = data.MobileNo;
                      document.getElementById("DeliveryChallanDetails_PreparedBy").value = data.Name;
                      document.getElementById("DeliveryChallanDetails_PreparedContact").value = data.MobileNo;
                      document.getElementById("DeliveryChallanDetails_PreparedEmail").value = preparedbyemail;
                  });
    })
</script>


<script type="text/javascript">
    $(document).ready(function () {
        var shopcode = document.getElementById("LoginShopCode").value;
        $.getJSON("/ProcessingQuotation/GetItemsFromShopStockAndStkDistrbtn", { ItemType: "Inventory", LoginShop: shopcode },
        function (data) {
            var select = $("#ItemCode1");
            select.empty();
            select.append($('<option/>', {
                text: "Select Item",
                value: "",
            }));
            $.each(data, function (index, itemdata) {
                select.append($('<option/>', {
                    text: itemdata.Text + " " + itemdata.Value,
                    value: itemdata.Value,
                }));
            });
        });
    });
</script>
<script type="text/javascript">
    $(function () {
        // GET TRANSPORT MODE DDL
        $("#ddltypeofmode").change(function () {
            var mode = document.getElementById("ddltypeofmode").value;
            if (mode != "") {
                $.getJSON("/Inward/GetTransportNames", { mode: mode },
                function (data) {
                    var select = $("#ddltransportnames");
                    select.empty();
                    select.append($('<option/>', {
                        text: "Select Name",
                        value: "",
                    }));
                    $.each(data, function (index, itemdata) {
                        select.append($('<option/>', {
                            text: itemdata.Text,
                            value: itemdata.Value,
                        }));
                    });
                });
            }
            else {
                var select = $("#ddltransportnames");
                select.empty();
                select.append($('<option/>', {
                    text: "Select Name",
                    value: "",
                }));
            }
        });

        // GET TRANSPORT MODE DETAILS ON TRANSPORT DDL
        $("#ddltransportnames").change(function () {
            var name = document.getElementById("ddltransportnames").value;
            if (name != "") {
                $.getJSON("/Inward/GetTransportDetails", { name: name },
                    function (data) {
                        document.getElementById("DeliveryChallanDetails_TransportContactNo").value = data.no;
                    });
            }
        });

        // FILL CLIENT DETAILS AND GET QUOTATION ITEM LIST ON QUOTATION NO AUTOCOMPLETE
        $("#DeliveryChallanDetails_QuotNo").autocomplete({
            source: function (request, response) {
                $.getJSON("/ProcessingQuotation/GetQuotNo", { SearchTerm: request.term },
                function (data) {
                    if (data != "Fail") {
                        response(data);
                    }
                    else {
                        alertbox("Please Enter Correct Quotation No..");
                        $("#DeliveryChallanDetails_QuotNo").val("");
                    }
                });
            },
            minLength: 1,
            select: function (event, ui) {
                if (ui.item) {
                    document.getElementById("ClientDetails").style.display = "inline";
                    $("#DeliveryChallanDetails_QuotNo").val(ui.item.value);
                    var quotno = $("#DeliveryChallanDetails_QuotNo").val();
                    $.getJSON("/ProcessingQuotation/GetClient", { code: quotno },
                        function (data) {

                            document.getElementById("SalesPerson").value = data.salespersonname;
                            document.getElementById("DeliveryChallanDetails_SalesPersonAddress").value = data.salespersonaddress;
                            document.getElementById("DeliveryChallanDetails_SalesPersonContact").value = data.salespersoncontact;
                            document.getElementById("DeliveryChallanDetails_SalesPersonDesignation").value = data.salespersondesignation;
                            document.getElementById("DeliveryChallanDetails_SalesPersonEmail").value = data.salespersonemail;

                            $("#ClientEmail").text(data.clientemail);
                            $("#ClientState").text(data.clientstate);
                            $("#ClientContactNo").text(data.clientcontact);
                            $("#ClientAddress").text(data.clientaddress);

                            $("#DeliveryChallanDetails_ClientName").val(data.clientname);
                            $("#DeliveryChallanDetails_ClientEmail").val(data.clientemail);
                            $("#DeliveryChallanDetails_ClientState").val(data.clientstate);
                            $("#DeliveryChallanDetails_ClientContactNo").val(data.clientcontact);
                            $("#DeliveryChallanDetails_ClientAddress").val(data.clientaddress);
                            $("#DeliveryChallanDetails_ClientType").val(data.clienttype);
                            $("#DeliveryChallanDetails_PackAndForwd").val(data.packandforwd);
                            document.getElementById("DeliveryChallanDetails_ConsumeResell").value = data.consumeresell;

                            if (data.clientstate == "Maharashtra") {
                                document.getElementById("formtypeid").style.display = "none";
                                document.getElementById("YesRadioButton").disabled = 'true';
                                document.getElementById("NoRadioButton").disabled = 'true';
                                document.getElementById("NoRadioButton").checked = true;
                            }
                            else {
                                document.getElementById("YesRadioButton").disabled = false;
                                document.getElementById("NoRadioButton").disabled = false;
                            }

                            //SELECT RADIO BUTTON CLIENT BASED
                            if (data.clienttype == "Registered") {
                                $("#Registered").attr("checked", true);
                            }
                            else {
                                $("#NonRegistered").attr("checked", true);
                            }
                            if (data.consumeresell == "Consumer") {
                                $("#Consumer").attr("checked", true);
                            }
                            else {
                                $("#Reseller").attr("checked", true);
                            }
                            if (data.formtype != null) {
                                document.getElementById("formtypeid").style.display = "inline";
                                $("#ddlformtypes").val(data.formtype).attr("selected", true);
                                $("#YesRadioButton").attr("checked", true);
                            }
                            else {
                                document.getElementById("formtypeid").style.display = "none";
                                $("#NoRadioButton").attr("checked", true);
                            }

                            document.getElementById("DeliveryChallanDetails_ClientName").disabled = 'true';
                            document.getElementById("Registered").disabled = 'true';
                            document.getElementById("NonRegistered").disabled = 'true';
                            document.getElementById("Consumer").disabled = 'true';
                            document.getElementById("Reseller").disabled = 'true';
                            document.getElementById("ddlformtypes").disabled = 'true';
                            document.getElementById("YesRadioButton").disabled = 'true';
                            document.getElementById("NoRadioButton").disabled = 'true';
                            document.getElementById("NoRadioButton").disabled = 'true';

                            var transportname = data.transportname;
                            $("#ddltypeofmode").val(data.transportmode).attr("selected", true);

                            $.getJSON("/Inward/GetTransportNames", { mode: data.transportmode },
                                        function (data) {
                                            var select = $("#ddltransportnames");
                                            select.empty();
                                            select.append($('<option/>', {
                                                text: "Select Name",
                                                value: "",
                                            }));
                                            $.each(data, function (index, itemdata) {
                                                select.append($('<option/>', {
                                                    text: itemdata.Text,
                                                    value: itemdata.Value,
                                                }));
                                            });
                                            $("#ddltransportnames").val(transportname).attr("selected", true);
                                        });
                            document.getElementById("DeliveryChallanDetails_TransportContactNo").value = data.transportcontactno;

                            window.open("/ProcessingQuotation/GetClientPendingQuotOrder?No=" + quotno, "_target", "width=700,height=500,top=150px,left=350px");
                        });
                }
            }
        });
        // FILL CLIENT DETAILS AND GET SALES ORDER ITEM LIST ON ORDER NO AUTOCOMPLETE
        $("#DeliveryChallanDetails_OrderNo").autocomplete({
            source: function (request, response) {
                $.getJSON("/ProcessingQuotation/GetOrderNo", { SearchTerm: request.term },
                function (data) {
                    if (data != "Fail") {
                        response(data);
                    }
                    else {
                        alertbox("Please Enter Correct Order No..");
                        $("#DeliveryChallanDetails_OrderNo").val("");
                    }
                });
            },
            minLength: 1,
            select: function (event, ui) {
                if (ui.item) {
                    document.getElementById("ClientDetails").style.display = "inline";
                    $("#DeliveryChallanDetails_OrderNo").val(ui.item.value);
                    var orderno = $("#DeliveryChallanDetails_OrderNo").val();
                    $.getJSON("/ProcessingQuotation/GetClient", { code: orderno },
                        function (data) {

                            document.getElementById("SalesPerson").value = data.salespersonname;
                            document.getElementById("DeliveryChallanDetails_SalesPersonAddress").value = data.salespersonaddress;
                            document.getElementById("DeliveryChallanDetails_SalesPersonContact").value = data.salespersoncontact;
                            document.getElementById("DeliveryChallanDetails_SalesPersonDesignation").value = data.salespersondesignation;
                            document.getElementById("DeliveryChallanDetails_SalesPersonEmail").value = data.salespersonemail;

                            $("#ClientEmail").text(data.clientemail);
                            $("#ClientState").text(data.clientstate);
                            $("#ClientContactNo").text(data.clientcontact);
                            $("#ClientAddress").text(data.clientaddress);

                            //$("#DeliveryChallanDetails_QuotNo").val(data.quotation);
                            //$("#DeliveryChallanDetails_QuotNo").attr("disabled", true);
                            //$("#DeliveryChallanDetails_OrderNo").attr("disabled", true);
                            $("#DeliveryChallanDetails_ClientName").val(data.clientname);
                            $("#DeliveryChallanDetails_ClientEmail").val(data.clientemail);
                            $("#DeliveryChallanDetails_ClientState").val(data.clientstate);
                            $("#DeliveryChallanDetails_ClientContactNo").val(data.clientcontact);
                            $("#DeliveryChallanDetails_ClientAddress").val(data.clientaddress);
                            $("#DeliveryChallanDetails_ClientType").val(data.clienttype);

                            $("#DeliveryChallanDetails_AdvancePayment").val(data.advancepayment)
                            $("#DeliveryChallanDetails_TradeDiscount").val(data.tradediscount);
                            $("#TradeDiscountValue").text(data.tradediscount);
                            $("#TradeDiscountHidden").text(data.tradediscount);
                            $("#DeliveryChallanDetails_PackAndForwd").val(data.packandforwd);

                            document.getElementById("DeliveryChallanDetails_ConsumeResell").value = data.consumeresell;

                            if (data.clientstate == "Maharashtra") {
                                document.getElementById("formtypeid").style.display = "none";
                                document.getElementById("YesRadioButton").disabled = 'true';
                                document.getElementById("NoRadioButton").disabled = 'true';
                                document.getElementById("NoRadioButton").checked = true;
                            }
                            else {
                                document.getElementById("YesRadioButton").disabled = false;
                                document.getElementById("NoRadioButton").disabled = false;
                            }

                            //SELECT RADIO BUTTON CLIENT BASED
                            if (data.clienttype == "Registered") {
                                $("#Registered").attr("checked", true);
                            }
                            else {
                                $("#NonRegistered").attr("checked", true);
                            }
                            if (data.consumeresell == "Consumer") {
                                $("#Consumer").attr("checked", true);
                            }
                            else {
                                $("#Reseller").attr("checked", true);
                            }
                            if (data.formtype != null) {
                                document.getElementById("formtypeid").style.display = "inline";
                                $("#ddlformtypes").val(data.formtype).attr("selected", true);
                                $("#YesRadioButton").attr("checked", true);
                            }
                            else {
                                document.getElementById("formtypeid").style.display = "none";
                                $("#NoRadioButton").attr("checked", true);
                            }

                            document.getElementById("DeliveryChallanDetails_ClientName").disabled = 'true';
                            document.getElementById("Registered").disabled = 'true';
                            document.getElementById("NonRegistered").disabled = 'true';
                            document.getElementById("Consumer").disabled = 'true';
                            document.getElementById("Reseller").disabled = 'true';
                            document.getElementById("ddlformtypes").disabled = 'true';
                            document.getElementById("YesRadioButton").disabled = 'true';
                            document.getElementById("NoRadioButton").disabled = 'true';
                            document.getElementById("NoRadioButton").disabled = 'true';

                            document.getElementById("DeliveryChallanDetails_ClientName").disabled = 'true';
                            document.getElementById("Registered").disabled = 'true';
                            document.getElementById("NonRegistered").disabled = 'true';
                            document.getElementById("Consumer").disabled = 'true';
                            document.getElementById("Reseller").disabled = 'true';
                            document.getElementById("ddlformtypes").disabled = 'true';
                            document.getElementById("YesRadioButton").disabled = 'true';
                            document.getElementById("NoRadioButton").disabled = 'true';
                            document.getElementById("YesRadioButton").disabled = 'true';
                            document.getElementById("NoRadioButton").disabled = 'true';

                            var transportname = data.transportname;
                            $("#ddltypeofmode").val(data.transportmode).attr("selected", true);

                            $.getJSON("/Inward/GetTransportNames", { mode: data.transportmode },
                                        function (data) {
                                            var select = $("#ddltransportnames");
                                            select.empty();
                                            select.append($('<option/>', {
                                                text: "Select Name",
                                                value: "",
                                            }));
                                            $.each(data, function (index, itemdata) {
                                                select.append($('<option/>', {
                                                    text: itemdata.Text,
                                                    value: itemdata.Value,
                                                }));
                                            });
                                            $("#ddltransportnames").val(transportname).attr("selected", true);
                                        });
                            $.getJSON("/Inward/GetTransportDetails", { name: transportname }, function (data) {
                                document.getElementById("DeliveryChallanDetails_TransportContactNo").value = data.no;
                            });

                            window.open("/ProcessingQuotation/GetClientPendingQuotOrder?No=" + orderno, "_target", "width=700,height=500,top=150px,left=350px");
                        });
                }
            }
        });

        // GET CLIENT DETAILS ON CLIENT NAME CHANGE EVENT
        $("#DeliveryChallanDetails_ClientName").autocomplete({
            source: "/Client/GetClientNames",
            minLength: 1,
            select: function (event, ui) {
                if (ui.item) {
                    $("#DeliveryChallanDetails_ClientName").val(ui.item.value);
                    var idmodel = document.getElementById("DeliveryChallanDetails_ClientName").value;
                    $("#DeliveryChallanDetails_ClientName").change(function () {
                        document.getElementById("ClientDetails").style.display = "none";
                        document.getElementById("ItemCode1").disabled = true;
                        document.getElementById("NonInvButton").style.display = "none";
                        $("#DeliveryChallanDetails_ClientName").focus();//when client name changes or becomes empty then focus on client only.
                    });

                    $.getJSON("/ProcessingQuotation/GetClientDetails", { name: idmodel },
                            function (data) {
                                document.getElementById("NonInvButton").style.display = "inline";

                                document.getElementById("ItemCode1").disabled = false;
                                document.getElementById("Narration1").disabled = false;
                                document.getElementById("Quantity1").disabled = false;
                                document.getElementById("SellingPrice1").disabled = false;
                                document.getElementById("MRP1").disabled = false;
                                document.getElementById("DisPer1").disabled = false;
                                document.getElementById("DisRs1").disabled = false;

                                document.getElementById("ClientDetails").style.display = "inline";
                                $("#ClientState").text(data.State);
                                $("#ClientContactNo").text(data.ContactNo1);
                                $("#ClientEmail").text(data.Email);
                                $("#ClientAddress").text(data.Address);

                                $("#DeliveryChallanDetails_ClientState").val(data.State);
                                $("#DeliveryChallanDetails_ClientContactNo").val(data.ContactNo1);
                                $("#DeliveryChallanDetails_ClientEmail").val(data.Email);
                                $("#DeliveryChallanDetails_ClientType").val(data.ClientType);
                                $("#DeliveryChallanDetails_ClientAddress").val(data.Address);
                                document.getElementById("DeliveryChallanDetails_ConsumeResell").value = data.ConsumeResell;

                                if (data.State == "Maharashtra") {
                                    document.getElementById("formtypeid").style.display = "none";
                                    document.getElementById("YesRadioButton").disabled = 'true';
                                    document.getElementById("NoRadioButton").disabled = 'true';
                                    document.getElementById("NoRadioButton").checked = true;

                                }
                                else {
                                    document.getElementById("YesRadioButton").disabled = false;
                                    document.getElementById("NoRadioButton").disabled = false;
                                }

                                //SELECT RADIO BUTTON CLIENT BASED
                                if (data.ClientType == "Registered") {
                                    $("#Registered").attr("checked", true);
                                }
                                else {
                                    $("#NonRegistered").attr("checked", true);
                                }
                                if (data.ConsumeResell == "Consumer") {
                                    $("#Consumer").attr("checked", true);
                                }
                                else {
                                    $("#Reseller").attr("checked", true);
                                }
                                if (data.FormType != null) {
                                    document.getElementById("formtypeid").style.display = "inline";
                                    $("#ddlformtypes").val(data.FormType).attr("selected", true);
                                    $("#YesRadioButton").prop("checked", true);
                                }
                                else {
                                    document.getElementById("formtypeid").style.display = "none";
                                    $("#NoRadioButton").prop("checked", true);
                                }
                            });
                }
            }
        });
    });
</script>

@*GET ITEM DETAILS ON ITEM DDL*@
<script type="text/javascript">
    $(function () {
        $("#ItemCode1").change(function () {
            document.getElementById("Submit").disabled = false;
            document.getElementById("DeliveryChallanDetails_ClientName").disabled = true;
            document.getElementById("DeliveryChallanDetails_QuotNo").value = "";
            document.getElementById("DeliveryChallanDetails_QuotNo").disabled = true;
            document.getElementById("DeliveryChallanDetails_OrderNo").value = "";
            document.getElementById("DeliveryChallanDetails_OrderNo").disabled = true;

            document.getElementById("Registered").disabled = 'true';
            document.getElementById("NonRegistered").disabled = 'true';
            document.getElementById("Consumer").disabled = 'true';
            document.getElementById("Reseller").disabled = 'true';
            document.getElementById("ddlformtypes").disabled = 'true';
            document.getElementById("YesRadioButton").disabled = 'true';
            document.getElementById("NoRadioButton").disabled = 'true';
            document.getElementById("YesRadioButton").disabled = 'true';
            document.getElementById("NoRadioButton").disabled = 'true';

            var clientstate = document.getElementById("DeliveryChallanDetails_ClientState").value;
            var clienttype = document.getElementById("DeliveryChallanDetails_ClientType").value;
            var formtype = document.getElementById("ddlformtypes").value;
            var consumeresell = document.getElementById("DeliveryChallanDetails_ConsumeResell").value;

            if (document.getElementById("formtypeid").style.display == "none") {
                formtype = "";
            }
            else {
                document.getElementById("ddlformtypes").disabled = 'true';
                if (document.getElementById("ddlformtypes").value == "") {
                    formtype = "";
                }
                else {
                    formtype = $("#ddlformtypes").val();
                }
            }

            var itemcode = $(this).val();
            if (itemcode != "") {
                var shopcode = document.getElementById("LoginShopCode").value;
                $.getJSON("/ProcessingQuotation/GetItemdetailsFromStkDist", { ItemCode: itemcode, ClientState: clientstate, ClientType: clienttype, FormType: formtype, ConsumeResell: consumeresell, shopcode: shopcode },
                   function (data) {
                       //empty few details before selecting new items.
                       document.getElementById("Quantity1").value = "";
                       document.getElementById("DisRs1").value = "0.00";
                       document.getElementById("Amount1").innerHTML = "0";
                       document.getElementById("proportionatetax1").innerHTML = "0";


                       document.getElementById("Quantity1").disabled = false;
                       document.getElementById("Narration1").disabled = false;
                       document.getElementById("SellingPrice1").disabled = false;
                       document.getElementById("MRP1").disabled = false;
                       document.getElementById("DisRs1").disabled = false;
                       document.getElementById("DisPer1").disabled = false;

                       document.getElementById("Unit1").innerHTML = data.Unit;
                       document.getElementById("StkQty1").innerHTML = data.Qty;
                       document.getElementById("ShopQty1").innerHTML = data.shopstkqty;
                       document.getElementById("ItemTax1").innerHTML = data.taxPercent;
                       document.getElementById("SellingPrice1").value = data.SellingPrice;
                       document.getElementById("MRP1").value = data.MRP;
                       document.getElementById("CostPrice1").value = data.costprice;
                       document.getElementById("ItemTaxValue1").value = data.taxPercent;


                       $("#ItemName1").val(data.ItemName);
                       $("#UnitValue1").val(data.Unit);
                       $("#NumberType1").val(data.NumberType);
                       $("#DescriptionValue1").val(data.Description);
                       $("#ColorValue1").val(data.Color);
                       $("#MaterialValue1").val(data.Material);
                       $("#Barcode1").val(data.Barcode);
                       $("#DesignCode1").val(data.DesignCode);
                       $("#DesignName1").val(data.DesignName);
                       $("#Brand1").val(data.Brand);
                       $("#Size1").val(data.Size);
                       $("#DisPer1").val(data.discount);
                       $("#DisRs1").val(data.discountrps);

                       //Store first row's tax as taxnumber1 if tax is not '0'
                       if (data.taxPercent != '0') {
                           $("#ItemTaxNumber1").val(data.taxPercent);
                           document.getElementById("AddTaxes").style.display = "inline";
                           $("#AddedTax1").text(data.taxPercent + "%");
                       }
                       var taxoncostprice = +data.costprice;
                       taxoncostprice = +data.costprice * +data.taxPercent / 100;
                       var taxpercentoncostprice = +data.costprice / (+data.costprice + taxoncostprice) * data.taxPercent;
                       var sellingprice = +data.MRP - (+data.MRP * +taxpercentoncostprice / 100);
                       $("#SellingPrice1").val(sellingprice.toFixed(2));
                   });
            }
            else {
                document.getElementById("StkQty1").innerHTML = "---";
                document.getElementById("Quantity1").value = "";
                document.getElementById("Unit1").innerHTML = "---";
                document.getElementById("SellingPrice1").value = "";
                document.getElementById("MRP1").value = "";
                document.getElementById("DisPer1").value = "0";
                document.getElementById("DisRs1").value = "0.00";
                document.getElementById("Amount1").innerHTML = "0";
                document.getElementById("ItemTax1").innerHTML = "0";
                document.getElementById("proportionatetax1").innerHTML = "0";
                alertbox("Please Select The Item")
            }
        });
    });
</script>

@*CREATE DYNAMIC ROWS ON ENTER BUTTON CLICK*@
<script type="text/javascript">
    $(document).keypress(function (e) {
        if (e.which == 13) {
            var partialview = document.getElementById("PartialView").value;
            if (partialview == "No") { // when delivery challan is made direct
                var rowid = document.getElementById("hdnRowCount").value;
                var previtemCode = "ItemCode" + rowid;
                var prevnarration = "Narration" + rowid;
                var prevquantity = "Quantity" + rowid;
                var prevsellingprice = "SellingPrice" + rowid;
                var prevmrp = "MRP" + rowid;
                var prevdiscountpercent = "DisPer" + rowid;
                var prevdiscountrps = "DisRs" + rowid;
                if (document.getElementById(previtemCode) != null) {
                    //If Required Fields are Empty of Previous Row
                    if ($("#" + previtemCode).val() == "") {
                        alertbox("Please Select The Item");
                    }
                    else if ((+$("#" + prevquantity).val()) == 0 || $("#" + prevquantity).val() == "") {
                        alertbox("Please Fill The Quantity");
                    }
                    else if ($("#" + prevsellingprice).val() == "" || (+$("#" + prevsellingprice).val()) == 0) {
                        alertbox("Please Fill The SellingPrice");
                    }
                    else if ($("#" + prevmrp).val() == "" || (+$("#" + prevmrp).val()) == 0) {
                        alertbox("Please Fill The MRP");
                    }
                        //If Required Fields are Not Empty then Generate Row
                    else {
                        if (document.getElementById(previtemCode) != null) {
                            document.getElementById(previtemCode).disabled = true;
                            document.getElementById(prevnarration).disabled = true;
                            document.getElementById(prevquantity).disabled = true;
                            document.getElementById(prevsellingprice).disabled = true;
                            document.getElementById(prevmrp).disabled = true;
                            document.getElementById(prevdiscountpercent).disabled = true;
                            document.getElementById(prevdiscountrps).disabled = true;
                        }
                        GenerateDynamicRow(rowid);
                    }
                }
                    //If row was DELETED then Generate Row
                else {
                    if (document.getElementById(previtemCode) != null) {
                        document.getElementById(previtemCode).disabled = true;
                        document.getElementById(prevnarration).disabled = true;
                        document.getElementById(prevquantity).disabled = true;
                        document.getElementById(prevsellingprice).disabled = true;
                        document.getElementById(prevmrp).disabled = true;
                        document.getElementById(prevdiscountpercent).disabled = true;
                        document.getElementById(prevdiscountrps).disabled = true;
                    }
                    GenerateDynamicRow(rowid);
                }
            }
            else { //when delivery challan is to be made from quot or order or both
                var rowid = document.getElementById("hdnRowCount").value;
                var validationcounter = 0;
                for (var i = 1; i <= rowid; i++) {
                    var previtemCode = "ItemCode" + i;
                    var prevnarration = "Narration" + i;
                    var prevquantity = "Quantity" + i;
                    var prevsellingprice = "SellingPrice" + i;
                    var prevmrp = "MRP" + i;
                    var prevdiscountpercent = "DisPer" + i;
                    var prevdiscountrps = "DisRs" + i;

                    if (document.getElementById(previtemCode) != null) {
                        if ($("#" + previtemCode).val() == "") {
                            alertbox("Please Select The Item");
                            validationcounter++;
                            break;
                        }
                        else if ($("#" + prevquantity).val() == "" || +$("#" + prevquantity).val() == 0) {
                            alertbox("Please Fill The Quantity");
                            validationcounter++;
                            break;
                        }
                        else if ($("#" + prevsellingprice).val() == "" || (+$("#" + prevsellingprice).val()) == 0) {
                            alertbox("Please Fill The SellingPrice");
                            validationcounter++;
                            break;
                        }
                        else if ($("#" + prevmrp).val() == "" || (+$("#" + prevmrp).val()) == 0) {
                            alertbox("Please Fill The MRP");
                            validationcounter++;
                            break;
                        }
                        else {
                            if (document.getElementById(previtemCode) != null) {
                                document.getElementById(previtemCode).disabled = true;
                                document.getElementById(prevnarration).disabled = true;
                                document.getElementById(prevquantity).disabled = true;
                                document.getElementById(prevsellingprice).disabled = true;
                                document.getElementById(prevmrp).disabled = true;
                                document.getElementById(prevdiscountpercent).disabled = true;
                                document.getElementById(prevdiscountrps).disabled = true;
                            }
                        }
                    }
                }
                if (validationcounter == 0) {
                    GenerateDynamicRow(rowid);
                }
            }
        }
    });
</script>

<script type="text/javascript">
    function GenerateDynamicRow(rowid) {
        if (document.getElementById("Registered").disabled == false) {
            document.getElementById("Registered").disabled = true;
            document.getElementById("NonRegistered").disabled = true;
            document.getElementById("Consumer").disabled = true;
            document.getElementById("Reseller").disabled = true;
            document.getElementById("YesRadioButton").disabled = true;
            document.getElementById("NoRadioButton").disabled = true;
            document.getElementById("ddlformtypes").disabled = true;
        }
        rowid = +rowid + 1;
        row = "row" + rowid;
        item = "ItemCode" + rowid;
        narration = "Narration" + rowid;
        sellingprice = "SellingPrice" + rowid;
        mrp = "MRP" + rowid;
        costprice = "CostPrice" + rowid;
        disper = "DisPer" + rowid;
        disrs = "DisRs" + rowid;
        stkqty = "StkQty" + rowid;
        shopqty = "ShopQty" + rowid;
        quantity = "Quantity" + rowid;
        extraqty = "ExtraQty" + rowid;
        unit = "Unit" + rowid;
        amount = "Amount" + rowid;
        itemtax = "ItemTax" + rowid;

        barcode = "Barcode" + rowid;
        itemname = "ItemName" + rowid;
        itemtype = "ItemType" + rowid;
        designcode = "DesignCode" + rowid;
        designname = "DesignName" + rowid;
        brand = "Brand" + rowid;
        size = "Size" + rowid;
        descriptionvalue = "DescriptionValue" + rowid;
        colorvalue = "ColorValue" + rowid;
        materialvalue = "MaterialValue" + rowid;
        unitvalue = "UnitValue" + rowid;
        numbertype = "NumberType" + rowid;
        amountvalue = "AmountValue" + rowid;
        itemtaxvalue = "ItemTaxValue" + rowid;
        itemtaxamount = "ItemTaxAmount" + rowid;
        proportionatetax = "proportionatetax" + rowid;
        proportionatetaxvalue = "proportionatetaxvalue" + rowid;
        proportionateamount = "proportionatetaxamount" + rowid;

        var partialview = document.getElementById("PartialView").value;
        quotorderquantity = "QuotOrderQty" + rowid;
        quotorderquantityvalue = "QuotOrderQtyValue" + rowid;
        balance = "Balance" + rowid;
        balancevalue = "BalanceValue" + rowid;
        var unorderedList = $("#DynamicRows");

        var data = "<tr id='" + row + "'>";
        data += "<td style='text-align:center'>" + rowid + "</td>";
        data += "<input type='hidden' id='QuotOrderNo" + rowid + "' name='QuotOrderNo" + rowid + "'/><td class='col-md-2 col-lg-2'><select id='" + item + "' name='" + item + "' class='form-control'><option>Select Item</option></select><input type='hidden' id='" + itemname + "' name='" + itemname + "' /><input type='hidden' id='" + itemtype + "' name='" + itemtype + "' value='Inventory' /><input type='hidden' id='" + descriptionvalue + "' name='" + descriptionvalue + "' /><input type='hidden' id='" + colorvalue + "' name='" + colorvalue + "'/><input type='hidden' id='" + materialvalue + "' name='" + materialvalue + "'/></td>";
        data += "<td class='col-md-2 col-lg-2'><textarea id='" + narration + "' name='" + narration + "' class='form-control' placeholder='Narration' style='text-align: center' rows='1'></textarea><input type='hidden' id='" + barcode + "' name='" + barcode + "' /><input type='hidden' id='" + designcode + "' name='" + designcode + "' /><input type='hidden' id='" + designname + "' name='" + designname + "' /><input type='hidden' id='" + brand + "' name='" + brand + "' /><input type='hidden' id='" + size + "' name='" + size + "' /></td>";
        data += "<td style='text-align:center'><a id='" + stkqty + "' href='#' onclick='ShowQuantity(" + rowid + ")'>---</a></td>";
        data += "<td style='text-align:center'><label id='" + shopqty + "' style='font-weight:normal'>---</label></td>";
        if (partialview == "Yes") {
            data += "<td style='text-align:center'><label id='" + quotorderquantity + "' style='font-weight:normal'>---</label><input type='hidden' name='" + quotorderquantityvalue + "' id='" + quotorderquantityvalue + "' value='0' /></td>";
        }
        data += "<td><input type='text' id='" + quantity + "' name='" + quantity + "' autocomplete='off' class='form-control col-md-1 col-lg-1' placeholder='Qty' style='text-align:center;width:100%' onchange='CalculateAmount(" + rowid + ',' + '\"quantity\"' + ")' onkeypress='return AllowDecimal(event," + rowid + ")' /><input type='hidden' id='" + extraqty + "' name='" + extraqty + "' value='0'/></td>";
        if (partialview == "Yes") {
            data += "<td><label id='" + balance + "' class='CenterText' style='font-weight:normal'>0</label><input type='hidden' name='" + balancevalue + "' id='" + balancevalue + "' value='0' /></td>";
        }
        data += "<td style='text-align:center'><label id='" + unit + "' style='font-weight:normal'></label><input type='hidden' name='" + unitvalue + "' id='" + unitvalue + "'/><input type='hidden' name='" + numbertype + "' id='" + numbertype + "'/></td>";
        data += "<td><input type='text' id='" + sellingprice + "' name='" + sellingprice + "' autocomplete='off' class='form-control col-md-2 col-lg-2' placeholder='Sell Price' style='text-align:center;width:100%' onchange='CalculateItemWiseAmount(" + rowid + ',' + '\"sellingprice\"' + ")' onkeypress='return AllowNumbers(event)' /></td>";
        data += "<td><input type='text' id='" + mrp + "' name='" + mrp + "' autocomplete='off' class='form-control col-md-2 col-lg-2' placeholder='MRP' style='text-align:center;width:100%' onchange='CalculateItemWiseAmount(" + rowid + ',' + '\"mrp\"' + ")' onkeypress='return AllowNumbers(event)' /><input type='hidden' id='" + costprice + "' name='" + costprice + "'/></td>";
        data += "<td><input type='text' id='" + disper + "' name='" + disper + "' autocomplete='off' class='form-control col-md-1 col-lg-1' value='0' placeholder='0%' style='font-weight:normal; text-align:center;width:100%' onchange='CalculateAmount(" + rowid + ',' + '\"percent\"' + ")' onkeypress='return AllowNumbers(event)' /></td>";
        data += "<td><input type='text' id='" + disrs + "' name='" + disrs + "'  autocomplete='off' class='form-control col-md-1 col-lg-1' value='0.00' placeholder='0' style='font-weight:normal; text-align:center;width:100%' onchange='CalculateAmount(" + rowid + ',' + '\"rps\"' + ")' onkeypress='return AllowNumbers(event)' /></td>";
        data += "<td style='text-align:right'><label id='" + itemtax + "' value='0' style='font-weight:normal'></label><input type='hidden' id='" + itemtaxvalue + "' name='" + itemtaxvalue + "' value='0'/><input type='hidden' id='" + itemtaxamount + "' name='" + itemtaxamount + "' value='0'/></td>";
        data += "<td style='text-align:right'><label id='" + amount + "' style='font-weight:normal'>0</label><input type='hidden' id='" + amountvalue + "' name='" + amountvalue + "' value='0'/></td>";
        data += "<td style='text-align:right'><label id='proportionatetax" + rowid + "'>0</label><input type='hidden' id='proportionatetaxamount" + rowid + "' name='proportionatetaxamount" + rowid + "' value='0'/><input type='hidden' id='proportionatetaxvalue" + rowid + "' name='proportionatetaxvalue" + rowid + "' value='0'/></td>";
        data += "<td><div style='height:2px'></div><a href='#' onclick='DeleteRow(" + rowid + ")' class='fa fa-trash fa-lg' style='color:red;' /></td></tr>";
        unorderedList.append(data);

        var shopcode = document.getElementById("LoginShopCode").value;
        $.getJSON("/ProcessingQuotation/GetItemsFromShopStockAndStkDistrbtn", { ItemType: $("#" + itemtype).val(), LoginShop: shopcode },
        function (data) {
            var select = $("#" + item);
            select.empty();
            select.append($('<option/>', {
                value: "",
                text: "Select"
            }));
            $.each(data, function (index, itemData) {
                select.append($('<option/>', {
                    value: itemData.Value,
                    text: itemData.Text + " " + itemData.Value
                }));
            });
        });
        $("#" + item).change(function () {
            var name = document.getElementById(item).value;
            var formtype;
            if (document.getElementById("formtypeid").style.display == "none") {
                formtype = "";
            }
            else {
                if (document.getElementById("ddlformtypes").value == "")
                { formtype = ""; }
                else { formtype = $("#DeliveryChallanDetails_FormType").val(); }

            }
            if (name != "") {
                var currentrowid = 0;
                for (var i = rowid - 1; i >= 1; i--) {
                    var previousitemname = "ItemCode" + i;
                    if (name == $("#" + previousitemname).val()) {
                        currentrowid = i;
                        break;
                    }
                }
                if (currentrowid == 0) {
                    var validationcount = 0;
                    for (var i = 1; i < rowid; i++) {
                        var prevquantity = "Quantity" + i;
                        var prevnarration = "Narration" + i;
                        var prevsellingprice = "SellingPrice" + i;
                        var prevmrp = "MRP" + i;
                        if (document.getElementById(prevquantity) != null) {
                            if ((+$("#" + prevquantity).val()) == 0 || $("#" + prevquantity).val() == "") {
                                alertbox("Please Fill The Quantity");
                                validationcount++;
                            }
                            else if ($("#" + prevsellingprice).val() == "" || (+$("#" + prevsellingprice).val()) == 0) {
                                alertbox("Please Fill The SellingPrice");
                                validationcount++;
                            }
                            else if ($("#" + prevmrp).val() == "" || (+$("#" + prevmrp).val()) == 0) {
                                alertbox("Please Fill The MRP");
                                validationcount++;
                            }
                            else {
                                if (document.getElementById(prevquantity) != null) {
                                    if (document.getElementById(prevquantity).disabled == false) {
                                        document.getElementById(prevquantity).disabled = true;
                                        document.getElementById(prevnarration).disabled = true;
                                        document.getElementById(prevsellingprice).disabled = true;
                                        document.getElementById(prevmrp).disabled = true;
                                        document.getElementById("DisPer" + i).disabled = true;
                                        document.getElementById("DisRs" + i).disabled = true;
                                    }
                                }
                            }
                        }
                    }
                    if (validationcount == 0) {
                        $("#Submit").attr("disabled", false);
                        var shopcode = document.getElementById("LoginShopCode").value;
                        $.getJSON("/ProcessingQuotation/GetItemdetailsFromStkDist",
                            {
                                ItemCode: name,
                                ClientState: $("#DeliveryChallanDetails_ClientState").val(),
                                ClientType: $("#DeliveryChallanDetails_ClientType").val(),
                                FormType: $("#ddlformtypes").val(),
                                ConsumeResell: $("#DeliveryChallanDetails_ConsumeResell").val(),
                                shopcode: shopcode
                            },
                     function (data) {
                         document.getElementById("Quantity" + rowid).value = "";
                         document.getElementById("Amount" + rowid).innerHTML = 0.00;
                         document.getElementById("AmountValue" + rowid).value = 0.00;
                         $("#" + itemname).val(data.ItemName);
                         $("#" + barcode).val(data.Barcode);
                         $("#" + descriptionvalue).val(data.Description);
                         $("#" + costprice).val(data.costprice);
                         $("#" + sellingprice).val(data.SellingPrice);
                         $("#" + mrp).val(data.MRP);
                         $("#" + colorvalue).val(data.Color);
                         $("#" + stkqty).text(data.Qty);
                         $("#" + shopqty).html(data.shopstkqty);
                         $("#" + designcode).val(data.DesignCode);
                         $("#" + designname).val(data.DesignName);
                         $("#" + brand).val(data.Brand);
                         $("#" + size).val(data.Size);
                         $("#" + materialvalue).val(data.Material);
                         $("#" + unit).text(data.Unit);
                         $("#" + unitvalue).val(data.Unit);
                         $("#" + numbertype).val(data.NumberType);
                         $("#" + itemtax).text(data.taxPercent);
                         $("#" + itemtaxvalue).val(data.taxPercent);
                         $("#" + disper).val(data.discount);
                         $("#" + disrs).val(data.discountrps);

                         //if new tax arrived e.g. if 5% is there but 12.5% or something else arrived it has to be added as new taxnumber for calculating
                         //on each item which is applied
                         var tax = data.taxPercent;
                         if (tax != '0') {//if tax is '0' no need to add new taxnumber
                             var taxcount = document.getElementById("ItemTaxCount").value;
                             if ($("#ItemTaxNumber" + taxcount).val() == 0) { //if first row's tax is 0 then add the tax in taxnumber1
                                 $("#ItemTaxNumber" + taxcount).val(tax);
                                 document.getElementById("AddTaxes").style.display = "inline";
                                 $("#AddedTax1").text(tax + "%");
                             }
                             else {//if first row tax is not 0 then make the taxnumber2 or 3 or more 
                                 var taxpresent = 0;
                                 for (var i = 1; i <= taxcount; i++) {
                                     var taxno = "ItemTaxNumber" + i;
                                     //if tax is already present then no need to make other taxnumbers
                                     if (tax == $("#" + taxno).val()) {
                                         taxpresent++;
                                     }
                                 }
                                 if (taxpresent == 0) {
                                     taxcount++;
                                     var taxno = "ItemTaxNumber" + taxcount;
                                     var data = "<input type='hidden' id='" + taxno + "' name='" + taxno + "' value='" + tax + "' />";
                                     $("#AllTaxesNumbersValue").append(data);
                                     var addedtaxno = "AddedTax" + taxcount;
                                     var addedtaxamount = "AddedTaxAmount" + taxcount;
                                     var addedtaxamounthdn = "AddedTaxAmounthdn" + taxcount;
                                     var addedamount = "AddedAmount" + taxcount;
                                     var addedamounthdn = "AddedAmounthdn" + taxcount;
                                     var newlabel = "<div class='row'><div class='col-md-3 col-lg-3'><label id='" + addedamount + "'>0</label><input type='hidden' id='" + addedamounthdn + "' name='" + addedamounthdn + "' value='0' /></div>";
                                     newlabel += "<div class='col-md-2 col-lg-2'><label id='" + addedtaxno + "'>" + tax + "%" + "</label></div>";
                                     newlabel += "<div class='col-md-7 col-lg-7'><label id='" + addedtaxamount + "'>0</label><input type='hidden' id='" + addedtaxamounthdn + "' name='" + addedtaxamounthdn + "' value='0' /></div></div>";
                                     $("#AddTaxes").append(newlabel);
                                     $("#ItemTaxCount").val(taxcount);
                                 }
                             }
                         }
                         var CostPrice = +$("#" + costprice).val();
                         var Tax = +$("#" + itemtaxvalue).val();
                         var MRP = +$("#" + mrp).val();
                         taxoncostprice = (CostPrice * Tax) / 100;
                         var taxpercentoncostprice = CostPrice / (CostPrice + taxoncostprice) * Tax;
                         var Sellingprice = MRP - (MRP * +taxpercentoncostprice / 100);
                         $("#SellingPrice" + rowid).val(Sellingprice.toFixed(2));
                     });
                    }
                    else {
                        $("#ItemCode" + rowid).val("").attr("selected", true);
                    }
                }
                else {
                    alertbox("Item Name Already Selected Please change the quantity");
                    document.getElementById("Quantity" + currentrowid).disabled = false;
                    document.getElementById("Narration" + currentrowid).disabled = false;
                    document.getElementById("SellingPrice" + currentrowid).disabled = false;
                    document.getElementById("MRP" + currentrowid).disabled = false;
                    document.getElementById("DisPer" + currentrowid).disabled = false;
                    document.getElementById("DisRs" + currentrowid).disabled = false;

                    $("#ItemCode" + rowid).val("").attr("selected", true);
                    document.getElementById("Quantity" + rowid).value = 0.000;
                    document.getElementById("Amount" + rowid).innerHTML = 0.00;
                    document.getElementById("proportionatetax" + rowid).innerHTML = 0;
                    $("#StkQty" + rowid).text("---");
                    $("#ShopQty" + rowid).text("---");
                    $("#Narration" + rowid).val("");
                    $("#SellingPrice" + rowid).val(0.00);
                    $("#MRP" + rowid).val(0.00);
                    $("#DisRs" + rowid).val("0.00");
                    $("#DisPer" + rowid).val("0");
                    $("#Unit" + rowid).text("---");
                    $("#ItemTax" + rowid).text("0");
                    CalculateTaxSummary(rowid);
                }
            }
            else {
                document.getElementById("StkQty" + rowid).innerHTML = "---";
                document.getElementById("ShopQty" + rowid).innerHTML = "---";
                document.getElementById("Quantity" + rowid).value = "";
                document.getElementById("Unit" + rowid).innerHTML = "---";
                document.getElementById("SellingPrice" + rowid).value = "";
                document.getElementById("MRP" + rowid).value = "";
                document.getElementById("DisPer" + rowid).value = "0";
                document.getElementById("DisRs" + rowid).value = "0.00";
                document.getElementById("Amount" + rowid).innerHTML = "0";
                document.getElementById("ItemTax" + rowid).innerHTML = "0";
                document.getElementById("proportionatetax" + rowid).innerHTML = "0";
                alertbox("Please Select The Item")
                CalculateTaxSummary(rowid);
            }
        });
        $("#hdnRowCount").val(rowid);
    }
</script>

<script type="text/javascript">
    $(function () {
        $("#NonInvButton").click(function () {
            if (document.getElementById("Registered").disabled == false) {
                document.getElementById("Registered").disabled = true;
                document.getElementById("NonRegistered").disabled = true;
                document.getElementById("Consumer").disabled = true;
                document.getElementById("Reseller").disabled = true;
                document.getElementById("YesRadioButton").disabled = true;
                document.getElementById("NoRadioButton").disabled = true;
                document.getElementById("ddlformtypes").disabled = true;
            }
            var noninvrowid = document.getElementById("hdnRowCount").value;
            //VALIDATIONS ON QUANTITY OR ITEM IS EMPTY
            var partialview = document.getElementById("PartialView").value;
            if (partialview == "No") { // when delivery challan is made direct
                var validationcounter = 0;
                var rowid = document.getElementById("hdnRowCount").value;
                var previtemCode = "ItemCode" + noninvrowid;
                var prevnarration = "Narration" + noninvrowid;
                var prevquantity = "Quantity" + noninvrowid;
                var prevsellingprice = "SellingPrice" + noninvrowid;
                var prevmrp = "MRP" + noninvrowid;
                var prevdiscountpercent = "DisPer" + noninvrowid;
                var prevdiscountrps = "DisRs" + noninvrowid;
                if (document.getElementById(previtemCode) != null) {
                    //If Required Fields are Empty of Previous Row
                    if ($("#" + previtemCode).val() == "") {
                        alertbox("Please Select The Item");
                        validationcounter++;
                    }
                    else if ($("#" + prevquantity).val() == "" || (+$("#" + prevquantity).val()) == 0) {
                        alertbox("Please Fill The Quantity");
                        validationcounter++;
                    }
                    else if ($("#" + prevsellingprice).val() == "" || (+$("#" + prevsellingprice).val()) == 0) {
                        alertbox("Please Fill The SellingPrice");
                        validationcounter++;
                    }
                    else if ($("#" + prevmrp).val() == "" || (+$("#" + prevmrp).val()) == 0) {
                        alertbox("Please Fill The MRP");
                        validationcounter++;
                    }
                        //If Required Fields are Not Empty then Generate Row
                    else {
                        if (document.getElementById(previtemCode) != null) {
                            document.getElementById(previtemCode).disabled = true;
                            document.getElementById(prevnarration).disabled = true;
                            document.getElementById(prevquantity).disabled = true;
                            document.getElementById(prevsellingprice).disabled = true;
                            document.getElementById(prevmrp).disabled = true;
                            document.getElementById(prevdiscountpercent).disabled = true;
                            document.getElementById(prevdiscountrps).disabled = true;
                        }
                    }

                }
                    //If row was DELETED then Generate Row
                else {
                    if (document.getElementById(previtemCode) != null) {
                        document.getElementById(previtemCode).disabled = true;
                        document.getElementById(prevnarration).disabled = true;
                        document.getElementById(prevquantity).disabled = true;
                        document.getElementById(prevsellingprice).disabled = true;
                        document.getElementById(prevmrp).disabled = true;
                        document.getElementById(prevdiscountpercent).disabled = true;
                        document.getElementById(prevdiscountrps).disabled = true;
                    }
                }
            }
            else { //when delivery challan is to be made from quot or order or both
                var rowid = document.getElementById("hdnRowCount").value;
                var validationcounter = 0;

                for (var i = 1; i <= rowid; i++) {
                    var previtemCode = "ItemCode" + i;
                    var prevnarration = "Narration" + i;
                    var prevquantity = "Quantity" + i;
                    var prevsellingprice = "SellingPrice" + noninvrowid;
                    var prevmrp = "MRP" + noninvrowid;
                    var prevdiscountpercent = "DisPer" + i;
                    var prevdiscountrps = "DisRs" + i;

                    if (document.getElementById(previtemCode) != null) {
                        if ($("#" + previtemCode).val() == "") {
                            alertbox("Please Select The Item");
                            validationcounter++;
                            break;
                        }
                        else if ($("#" + prevquantity).val() == "" || (+$("#" + prevquantity).val()) == 0) {
                            alertbox("Please Fill The Quantity");
                            validationcounter++;
                            break;
                        }
                        else if ($("#" + prevsellingprice).val() == "" || (+$("#" + prevsellingprice).val()) == 0) {
                            alertbox("Please Fill The SellingPrice");
                            validationcounter++;
                            break;
                        }
                        else if ($("#" + prevmrp).val() == "" || (+$("#" + prevmrp).val()) == 0) {
                            alertbox("Please Fill The MRP");
                            validationcounter++;
                            break;
                        }
                        else {
                            if (document.getElementById(previtemCode) != null) {
                                document.getElementById(previtemCode).disabled = true;
                                document.getElementById(prevnarration).disabled = true;
                                document.getElementById(prevquantity).disabled = true;
                                document.getElementById(prevsellingprice).disabled = true;
                                document.getElementById(prevmrp).disabled = true;
                                document.getElementById(prevdiscountpercent).disabled = true;
                                document.getElementById(prevdiscountrps).disabled = true;
                            }
                        }
                    }
                }

            }
            if (validationcounter == 0) {
                noninvrowid = +noninvrowid + 1;
                noninvrow = "row" + noninvrowid;
                noninvitem = "ItemCode" + noninvrowid;
                noninvnarration = "Narration" + noninvrowid;
                noninvcostprice = "CostPrice" + noninvrowid;
                noninvsellingprice = "SellingPrice" + noninvrowid;
                noninvmrp = "MRP" + noninvrowid;
                noninvdisper = "DisPer" + noninvrowid;
                noninvdisrs = "DisRs" + noninvrowid;
                noninvstkqty = "StkQty" + noninvrowid;
                noninvshopqty = "ShopQty" + noninvrowid;
                noninvquantity = "Quantity" + noninvrowid;
                noninvextraqty = "ExtraQty" + noninvrowid;
                noninvunit = "Unit" + noninvrowid;
                noninvamount = "Amount" + noninvrowid;
                noninvitemtax = "ItemTax" + noninvrowid;

                noninvitemname = "ItemName" + noninvrowid;
                noninvitemtype = "ItemType" + noninvrowid;
                noninvdesigncode = "DesignCode" + noninvrowid;
                noninvdesignname = "DesignName" + noninvrowid;
                noninvbrand = "Brand" + noninvrowid;
                noninvsize = "Size" + noninvrowid;
                noninvdescriptionvalue = "DescriptionValue" + noninvrowid;
                noninvcolorvalue = "ColorValue" + noninvrowid;
                noninvmaterialvalue = "MaterialValue" + noninvrowid;
                noninvunitvalue = "UnitValue" + noninvrowid;
                noninvnumbertype = "NumberType" + noninvrowid;
                noninvamountvalue = "AmountValue" + noninvrowid;
                noninvitemtaxvalue = "ItemTaxValue" + noninvrowid;
                noninvitemtaxamount = "ItemTaxAmount" + noninvrowid;
                noninvproportionatetax = "proportionatetax" + noninvrowid;
                noninvproportionatetaxvalue = "proportionatetaxvalue" + noninvrowid;
                noninvproportionateamount = "proportionatetaxamount" + noninvrowid;
                barcode = "Barcode" + noninvrowid;

                var partialview = document.getElementById("PartialView").value;
                noninvquotorderquantity = "QuotOrderQty" + noninvrowid;
                noninvquotorderquantityvalue = "QuotOrderQtyValue" + noninvrowid;
                noninvbalance = "Balance" + noninvrowid;
                noninvbalancevalue = "BalanceValue" + noninvrowid;
                var unorderedList = $("#DynamicRows");

                var data = "<tr id='" + noninvrow + "'>";
                data += "<td style='text-align:center'>" + noninvrowid + "</td>";
                data += "<td class='col-md-2 col-lg-2'><input type='hidden' id='QuotOrderNo" + noninvrowid + "' name='QuotOrderNo" + noninvrowid + "'/><select id='" + noninvitem + "' name='" + noninvitem + "' class='form-control'><option>Select Item</option></select><input type='hidden' id='" + noninvitemname + "' name='" + noninvitemname + "' /><input type='hidden' id='" + noninvitemtype + "' name='" + noninvitemtype + "' value='NonInventory' /><input type='hidden' id='" + noninvdescriptionvalue + "' name='" + noninvdescriptionvalue + "' /><input type='hidden' id='" + noninvcolorvalue + "' name='" + noninvcolorvalue + "'/><input type='hidden' id='" + noninvmaterialvalue + "' name='" + noninvmaterialvalue + "'/><input type='hidden' id='" + barcode + "' name='" + barcode + "'/></td>";
                data += "<td class='col-md-2 col-lg-2'><textarea class='form-control' style='text-align: center' id='" + noninvnarration + "' name='" + noninvnarration + "' placeholder='Narration' rows='1' ></textarea><input type='hidden' id='" + noninvdesigncode + "' name='" + noninvdesigncode + "' /><input type='hidden' id='" + noninvdesignname + "' name='" + noninvdesignname + "' /><input type='hidden' id='" + noninvbrand + "' name='" + noninvbrand + "' /><input type='hidden' id='" + noninvsize + "' name='" + noninvsize + "' /></td>";
                data += "<td style='text-align:center'><label id='" + noninvstkqty + "'>---</label></td>";
                data += "<td style='text-align:center'><label id='" + noninvshopqty + "'>---</label></td>";
                if (partialview == "Yes") {
                    data += "<td style='text-align:center'><label id='" + noninvquotorderquantity + "' style='font-weight:normal'>---</label><input type='hidden' name='" + noninvquotorderquantityvalue + "' id='" + noninvquotorderquantityvalue + "' value='0' /></td>";
                }
                data += "<td><input type='text' id='" + noninvquantity + "' name='" + noninvquantity + "' autocomplete='off' class='form-control col-md-1 col-lg-1' placeholder='Qty' style='text-align:center;width:100%' onchange='CalculateAmount(" + noninvrowid + ',' + '\"quantity\"' + ")' onkeypress='return AllowDecimal(event," + noninvrowid + ")' /><input type='hidden' id='" + noninvextraqty + "' name='" + noninvextraqty + "' value='0'/></td>";
                if (partialview == "Yes") {
                    data += "<td><label id='" + noninvbalance + "' class='CenterText' style='font-weight:normal'>0</label><input type='hidden' name='" + noninvbalancevalue + "' id='" + noninvbalancevalue + "' value='0' /></td>";
                }
                data += "<td><label id='" + noninvunit + "' name='" + noninvunit + "' style='font-weight:normal'></label><input type='hidden' id='" + noninvunitvalue + "' name='" + noninvunitvalue + "'/><input type='hidden' name='" + noninvnumbertype + "' id='" + noninvnumbertype + "'></td>";
                data += "<td><input type='text' class='form-control' id='" + noninvsellingprice + "' name='" + noninvsellingprice + "' onchange='CalculateAmount(" + noninvrowid + ',' + '\"sellingprice\"' + ")' style='font-weight:normal; text-align:center;' placeholder='Sell Price' onkeypress='return AllowNumbers(event)' /></td>";
                data += "<td><input type='text' class='form-control' id='" + noninvmrp + "' name='" + noninvmrp + "' onchange='CalculateAmount(" + noninvrowid + ',' + '\"mrp\"' + ")' style='font-weight:normal; text-align:center;' placeholder='MRP' onkeypress='return AllowNumbers(event)' /><input type='hidden' id='" + noninvcostprice + "' name='" + noninvcostprice + "'/></td>";
                data += "<td><input type='text' class='form-control' id='" + noninvdisper + "' name='" + noninvdisper + "' style='font-weight:normal; text-align:center' value='0' placeholder='0%' onchange='CalculateAmount(" + noninvrowid + ',' + '\"percent\"' + ")' onkeypress='return AllowNumbers(event)' /></td>";
                data += "<td><input type='text' class='form-control' id='" + noninvdisrs + "' name='" + noninvdisrs + "' style='font-weight:normal; text-align:center' value='0.00' placeholder='0' onchange='CalculateAmount(" + noninvrowid + ',' + '\"rps\"' + ")' onkeypress='return AllowNumbers(event)' /></td>";
                data += "<td style='text-align:right'><label id='" + noninvitemtax + "' name='" + noninvitemtax + "' style='font-weight:normal'>0</label><input type='hidden' id='" + noninvitemtaxvalue + "' name='" + noninvitemtaxvalue + "'/><input type='hidden' id='" + noninvitemtaxamount + "' name='" + noninvitemtaxamount + "' value='0'/></td>";
                data += "<td style='text-align:right'><label id='" + noninvamount + "' name='" + noninvamount + "' style='font-weight:normal'></label><input type='hidden' id='" + noninvamountvalue + "' name='" + noninvamountvalue + "'/></td>";
                data += "<td style='text-align: right'><label id='" + noninvproportionatetax + "'>0</label><input type='hidden' id='" + noninvproportionatetaxvalue + "' name='" + noninvproportionatetaxvalue + "' value='0' /><input type='hidden' id='" + noninvproportionateamount + "' name='" + noninvproportionateamount + "' value='0' /></td>";
                data += "<td><div style='height:2px'></div><a href='#' onclick='DeleteRow(" + noninvrowid + ")' class='fa fa-trash fa-lg' style='color:red;' /></td></tr>";
                unorderedList.append(data);

                //FILL ITEM DDL ON ENTER CLICK EVENT
                $.getJSON("/ProcessingQuotation/GetItemsFromShopStockAndStkDistrbtn", { ItemType: $("#ItemType" + noninvrowid).val() },
                function (data) {
                    var select = $("#" + noninvitem);
                    select.empty();
                    select.append($('<option>', {
                        text: "Select Item",
                        value: "",
                    }));
                    $.each(data, function (index, itemdata) {
                        select.append($('<option>', {
                            text: itemdata.Text + " " + itemdata.Value,
                            value: itemdata.Value,
                        }));
                    });
                });

                var clientstate = document.getElementById("DeliveryChallanDetails_ClientState").value;
                var clienttype = document.getElementById("DeliveryChallanDetails_ClientType").value;
                var formtype = document.getElementById("ddlformtypes").value;
                var consumeresell = document.getElementById("DeliveryChallanDetails_ConsumeResell").value;

                if (document.getElementById("formtypeid").style.display == "none") {
                    formtype = "";
                }
                else {
                    if (document.getElementById("ddlformtypes").value == "") {
                        formtype = "";
                    }
                    else {
                        formtype = $("#ddlformtypes").val();
                    }
                }

                //GET ITEM DETAILS FROM ITEMNAME
                $("#" + noninvitem).unbind("change");
                $("#" + noninvitem).change(function () {
                    var noninvitemcode = document.getElementById(noninvitem).value;
                    if (noninvitemcode != "") {
                        //IF PREVIOUS ROW IS ENABLED FOR CHANGE THE QUANTITY BUT WE SELECT AGAIN DDL THEN DISABLED THIS ENABLES QUANTITY
                        var validationcount = 0;
                        for (var i = 1; i < noninvrowid; i++) {
                            var prevquantity = "Quantity" + i;
                            var prevsellingprice = "SellingPrice" + i;
                            var prevmrp = "MRP" + i;
                            var prevnarration = "Narration" + i;
                            var prevdiscountrs = "DisRs" + i;
                            var prevdiscountper = "DisPer" + i;
                            if (document.getElementById(prevquantity) != null) {
                                if ((+$("#" + prevquantity).val()) == 0 || $("#" + prevquantity).val() == "") {
                                    alertbox("Please Fill The Quantity");
                                    validationcount++;
                                }
                                else if ($("#" + prevsellingprice).val() == "" || (+$("#" + prevsellingprice).val()) == 0) {
                                    alertbox("Please Fill The SellingPrice");
                                    validationcount++;
                                }
                                else if ($("#" + prevmrp).val() == "" || (+$("#" + prevmrp).val()) == 0) {
                                    alertbox("Please Fill The MRP");
                                    validationcount++;
                                }
                                else {
                                    if (document.getElementById(prevquantity).disabled == false) {
                                        document.getElementById(prevquantity).disabled = true;
                                        document.getElementById(prevnarration).disabled = true;
                                        document.getElementById(prevsellingprice).disabled = true;
                                        document.getElementById(prevmrp).disabled = true;
                                        document.getElementById(prevdiscountper).disabled = true;
                                        document.getElementById(prevdiscountrs).disabled = true;
                                    }
                                }
                            }
                        }
                        if (validationcount == 0) {
                            $.getJSON("/ProcessingQuotation/GetNonInvItemdetails", { ItemCode: noninvitemcode, subcat: $("#ddlSubcat").val(), ClientState: clientstate, ClientType: clienttype, FormType: $("#ddlformtypes").val(), ConsumeResell: consumeresell },
                               function (data) {
                                   $("#" + noninvitemname).val(data.itemName);
                                   $("#" + noninvdescriptionvalue).val(data.description);
                                   $("#" + noninvcolorvalue).val(data.colorCode);
                                   $("#" + noninvdesigncode).val(data.designCode);
                                   $("#" + noninvdesignname).val(data.designName);
                                   $("#" + noninvbrand).val(data.brandName);
                                   $("#" + noninvsize).val(data.size);
                                   $("#" + noninvunit).text(data.unit);
                                   $("#" + noninvunitvalue).val(data.unit);
                                   $("#" + noninvcostprice).val(data.costprice);
                                   $("#" + noninvsellingprice).val(data.sellingprice);
                                   $("#" + noninvmrp).val(data.mrp);
                                   $("#" + noninvmaterialvalue).val(data.typeOfMaterial);
                                   $("#" + noninvitemtax).text(data.taxPercent);
                                   $("#" + noninvitemtaxvalue).val(data.taxPercent);
                                   $("#" + noninvnumbertype).val(data.NumberType);
                                   $("#" + noninvdisper).val(data.discount);
                                   $("#" + noninvdisrs).val(data.discountrps);

                                   //if new tax arrived e.g. if 5% is there but 12.5% or something else arrived it has to be added as new taxnumber for calculating
                                   //on each item which is applied
                                   var tax = data.taxPercent;
                                   if (tax != '0') {//if tax is '0' no need to add new taxnumber
                                       var taxcount = document.getElementById("ItemTaxCount").value;
                                       if ($("#ItemTaxNumber" + taxcount).val() == 0) { //if first row's tax is 0 then add the tax in taxnumber1
                                           $("#ItemTaxNumber" + taxcount).val(tax);
                                           document.getElementById("AddTaxes").style.display = "inline";
                                           $("#AddedTax1").text(tax + "%");
                                       }
                                       else {//if first row tax is not 0 then make the taxnumber2 or 3 or more 
                                           var taxpresent = 0;
                                           for (var i = 1; i <= taxcount; i++) {
                                               var taxno = "ItemTaxNumber" + i;
                                               //if tax is already present then no need to make other taxnumbers
                                               if (tax == $("#" + taxno).val()) {
                                                   taxpresent++;
                                               }
                                           }
                                           if (taxpresent == 0) {
                                               taxcount++;
                                               var taxno = "ItemTaxNumber" + taxcount;
                                               var data = "<input type='hidden' id='" + taxno + "' name='" + taxno + "' value='" + tax + "' />";
                                               $("#AllTaxesNumbersValue").append(data);
                                               var addedtaxno = "AddedTax" + taxcount;
                                               var addedtaxamount = "AddedTaxAmount" + taxcount;
                                               var addedtaxamounthdn = "AddedTaxAmounthdn" + taxcount;
                                               var addedamount = "AddedAmount" + taxcount;
                                               var addedamounthdn = "AddedAmounthdn" + taxcount;
                                               var newlabel = "<div class='row'><div class='col-md-3 col-lg-3'><label id='" + addedamount + "'>0</label><input type='hidden' id='" + addedamounthdn + "' name='" + addedamounthdn + "' value='0' /></div>";
                                               newlabel += "<div class='col-md-2 col-lg-2'><label id='" + addedtaxno + "'>" + tax + "%" + "</label></div>";
                                               newlabel += "<div class='col-md-7 col-lg-7'><label id='" + addedtaxamount + "'>0</label><input type='hidden' id='" + addedtaxamounthdn + "' name='" + addedtaxamounthdn + "' value='0' /></div></div>";
                                               $("#AddTaxes").append(newlabel);
                                               $("#ItemTaxCount").val(taxcount);
                                           }
                                       }
                                   }
                                   var CostPrice = +$("#" + noninvcostprice).val();
                                   var Tax = +$("#" + noninvitemtaxvalue).val();
                                   var MRP = +$("#" + noninvmrp).val();
                                   taxoncostprice = (CostPrice * Tax) / 100;
                                   var taxpercentoncostprice = CostPrice / (CostPrice + taxoncostprice) * Tax;
                                   var Sellingprice = MRP - (MRP * +taxpercentoncostprice / 100);
                                   $("#SellingPrice" + noninvrowid).val(Sellingprice.toFixed(2));
                               });
                        }
                        else {
                            $("#itemCode" + noninvrowid).val("").attr("selected", true);
                        }
                    }
                    else {
                        alertbox("Please Select Item First");
                        $("#ItemCode" + noninvrowid).val("").attr("selected", true);
                        document.getElementById("Quantity" + noninvrowid).value = 0.000;
                        document.getElementById("Amount" + noninvrowid).innerHTML = 0.00;
                        document.getElementById("proportionatetax" + noninvrowid).innerHTML = 0;
                        $("#Narration" + noninvrowid).val("");
                        $("#SellingPrice" + noninvrowid).val(0.00);
                        $("#MRP" + noninvrowid).val(0.00);
                        $("#DisRs" + noninvrowid).val(0.00)
                        $("#DisPer" + noninvrowid).val(0)
                        $("#Unit" + noninvrowid).text("---");
                        $("#ItemTax" + noninvrowid).text("0");
                        CalculateTaxSummary(noninvrowid);
                    }
                });
                $("#hdnRowCount").val(noninvrowid);
            }
        });
    });
</script>

@*CALCULATE AMOUNT*@
<script type="text/javascript">
    function CalculateAmount(count, type) {
        //CALCUALTE PROPOTIONATE TAX
        var packandforwd = (+document.getElementById("DeliveryChallanDetails_PackAndForwd").value);
        if (type == "rps") {
            document.getElementById("discountType").value = "rps";
        }
        else if (type == "percent") {
            document.getElementById("discountType").value = "percent"
        }
        if (packandforwd != 0 || packandforwd != "") {
            var rowid = document.getElementById("hdnRowCount").value;
            for (var i = 1; i <= rowid; i++) {
                var quantity = "Quantity" + i;
                var stockquantity = "StkQty" + i;
                var shopquantity = "ShopQty" + i;
                var sellingprice = "SellingPrice" + i;
                var mrp = "MRP" + i;
                var costprice = "CostPrice" + i;
                var amount = "Amount" + i;
                var amountvalue = "AmountValue" + i;
                var disper = "DisPer" + i;
                var disrs = "DisRs" + i;
                var extraqty = "ExtraQty" + i;
                var quotorderqty = "QuotOrderQty" + i;
                var itemtaxval = "ItemTaxValue" + i;

                if (document.getElementById(quantity) != null) {
                    var percent = (+document.getElementById(disper).value) / 100;
                    var rupees = (+document.getElementById(disrs).value);

                    if (type == "mrp") {
                        var taxoncostprice = +$("#" + costprice).val() * +$("#" + itemtaxval).val() / 100;
                        var taxpercentoncostprice = +$("#" + costprice).val() / (+$("#" + costprice).val() + taxoncostprice) * +$("#" + itemtaxval).val();
                        var sellingpriceval = (+$("#" + mrp).val()) - (+$("#" + mrp).val() * +taxpercentoncostprice / 100);
                        $("#" + sellingprice).val(sellingpriceval.toFixed(2));
                    }
                    else if (type == "sellingprice") {
                        var calculatedmrpfromsellprice = +$("#" + sellingprice).val() * +$("#" + itemtaxval).val() / 100;
                        calculatedmrpfromsellprice = +$("#" + sellingprice).val() + calculatedmrpfromsellprice;
                        $("#" + mrp).val(calculatedmrpfromsellprice.toFixed(2));
                    }

                    var stkqty = +document.getElementById(stockquantity).innerHTML;
                    var qty = +document.getElementById(quantity).value;
                    var shopqty = document.getElementById(shopquantity).innerHTML;

                    if (i == count) {
                        if (type == 'quantity') {
                            if (document.getElementById(quotorderqty) == null) {
                                if (shopqty != "---") {
                                    shopqty = +shopqty;
                                    if (qty > shopqty) {
                                        alertbox("Can Not Exceed Above Shop Stock Quantity..");
                                        document.getElementById(quantity).value = 0;
                                    }
                                }
                            }
                            else {
                                var quotorderqtyvalue = document.getElementById(quotorderqty).innerHTML;
                                if (shopqty != "---") {
                                    shopqty = +shopqty;
                                    if (qty > shopqty) {
                                        alertbox("Can Not Exceed Above Shop Stock Quantity..");
                                        document.getElementById(quantity).value = 0;
                                    }
                                    else if (qty > stkqty) {
                                        alertbox((qty - stkqty) + " Extra Quantity Sent");
                                        document.getElementById(extraqty).value = qty - stkqty;
                                    }
                                    else { document.getElementById(extraqty).value = 0; }
                                }
                            }
                        }
                    }

                    var dynamicamount = (+document.getElementById(quantity).value) * (+document.getElementById(sellingprice).value);
                    //CALCULATE AMOUNT USING DISCOUNT
                    var discounttype = document.getElementById("discountType").value;
                    if (qty == 0 || (+document.getElementById(sellingprice).value) == 0 || (+document.getElementById(mrp).value) == 0) {
                        document.getElementById(disrs).value = "0.00";
                    }
                    else if (discounttype == "percent") {
                        if (percent != 0) {
                            var valueafterdiscount = dynamicamount * percent;
                            document.getElementById(disrs).value = valueafterdiscount.toFixed(2);
                            dynamicamount = dynamicamount - valueafterdiscount;

                        }
                        else { document.getElementById(disrs).value = "0.00"; }
                    }
                    else {
                        if (rupees != 0) {
                            var valueafterdiscount = rupees / dynamicamount * 100;
                            document.getElementById(disper).value = valueafterdiscount.toFixed(1);
                            dynamicamount = dynamicamount - rupees;
                        }
                        else { document.getElementById(disper).value = 0; }
                    }
                    document.getElementById(amount).innerHTML = addCommas(dynamicamount.toFixed(2));
                    document.getElementById(amountvalue).value = dynamicamount.toFixed(2);
                    if (i == count) {
                        if (document.getElementById(quotorderqty) != null) {
                            CalculateBalance(i, type);
                        }
                    }
                }
            }
            var totalamount = 0;
            for (var i = 1; i <= rowid; i++) {
                var amount = "Amount" + i;
                if (document.getElementById(amount) != null) {
                    totalamount = (+totalamount) + (+removeCommas(document.getElementById(amount).innerHTML));
                }
            }
            document.getElementById("TotalAmount").innerHTML = "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
            document.getElementById("DeliveryChallanDetails_TotalAmount").value = totalamount.toFixed(2);

            var totalamountwithpackandforwd = 0;
            for (var i = 1; i <= rowid; i++) {
                var amount = "Amount" + i;
                var amountvalue = "AmountValue" + i;
                var proportionatetax = "proportionatetax" + i;
                var proportionatetaxvalue = "proportionatetaxvalue" + i;
                var proportionateamount = "proportionatetaxamount" + i;
                if (document.getElementById(amount) != null) {
                    var propotaxpercent = (+removeCommas(document.getElementById(amount).innerHTML)) / (+document.getElementById("DeliveryChallanDetails_TotalAmount").value);
                    document.getElementById(proportionatetax).innerHTML = (propotaxpercent * 100).toFixed(2);
                    document.getElementById(proportionatetaxvalue).value = (propotaxpercent * 100).toFixed(2);
                    var packandforwdpropoamount = propotaxpercent * packandforwd;
                    document.getElementById(proportionateamount).value = packandforwdpropoamount.toFixed(2);
                    if (document.getElementById(proportionatetax).innerHTML.toString() == "NaN") {
                        document.getElementById(proportionatetax).innerHTML = "0";
                    }
                    CalculateTaxSummary(i);
                }
            }
            CalculateTotalDiscount();
            CalcGrandTotal();
        }
        else {
            var proportionatecount = document.getElementById("hdnRowCount").value;
            for (var i = 1; i <= proportionatecount; i++) {
                var proportionate = "proportionatetax" + i;
                var proportionatetaxvalue = "proportionatetaxvalue" + i;
                var proporamount = "proportionatetaxamount" + i;
                if (document.getElementById(proportionate) != null) {
                    document.getElementById(proportionate).innerHTML = "0";
                    document.getElementById(proportionatetaxvalue).value = 0;
                    document.getElementById(proporamount).value = 0;
                }
            }
            var quantity = "Quantity" + count;
            var stockquantity = "StkQty" + count;
            var shopquantity = "ShopQty" + count;
            var sellingprice = "SellingPrice" + count;
            var mrp = "MRP" + count;
            var costprice = "CostPrice" + count;
            var amount = "Amount" + count;
            var amountvalue = "AmountValue" + count;
            var disper = "DisPer" + count;
            var disrs = "DisRs" + count;
            var extraqty = "ExtraQty" + count;
            var quotorderqty = "QuotOrderQty" + count;
            var itemtaxval = "ItemTaxValue" + count;

            if (document.getElementById(quantity) != null) {
                var percent = (+document.getElementById(disper).value) / 100;
                var rupees = (+document.getElementById(disrs).value);

                if (type == "mrp") {
                    var taxoncostprice = +$("#" + costprice).val() * +$("#" + itemtaxval).val() / 100;
                    var taxpercentoncostprice = +$("#" + costprice).val() / (+$("#" + costprice).val() + taxoncostprice) * +$("#" + itemtaxval).val();
                    var sellingpriceval = (+$("#" + mrp).val()) - (+$("#" + mrp).val() * +taxpercentoncostprice / 100);
                    $("#" + sellingprice).val(sellingpriceval.toFixed(2));
                }
                else if (type == "sellingprice") {
                    var calculatedmrpfromsellprice = +$("#" + sellingprice).val() * +$("#" + itemtaxval).val() / 100;
                    calculatedmrpfromsellprice = +$("#" + sellingprice).val() + calculatedmrpfromsellprice;
                    $("#" + mrp).val(calculatedmrpfromsellprice.toFixed(2));
                }

                var stkqty = +document.getElementById(stockquantity).innerHTML;
                var qty = +document.getElementById(quantity).value;
                var shopqty = document.getElementById(shopquantity).innerHTML;

                if (type == 'quantity') {
                    if (document.getElementById(quotorderqty) == null) {
                        if (shopqty != "---") {
                            shopqty = +shopqty;
                            if (qty > shopqty) {
                                alertbox("Can Not Exceed Above Shop Stock Quantity..");
                                document.getElementById(quantity).value = 0;
                            }
                        }
                    }
                    else {
                        var quotorderqtyvalue = document.getElementById(quotorderqty).innerHTML;
                        if (shopqty != "---") {
                            shopqty = +shopqty;
                            if (qty > shopqty) {
                                alertbox("Can Not Exceed Above Shop Stock Quantity..");
                                document.getElementById(quantity).value = 0;
                            }
                            else if (qty > stkqty) {
                                alertbox((qty - stkqty) + " Extra Quantity Sent");
                                document.getElementById(extraqty).value = qty - stkqty;
                            }
                            else { document.getElementById(extraqty).value = 0; }
                        }
                    }
                }

                var dynamicamount = (+document.getElementById(quantity).value) * (+document.getElementById(sellingprice).value);

                //CALCULATE AMOUNT USING DISCOUNT
                var discounttype = document.getElementById("discountType").value;
                if (qty == 0 || (+document.getElementById(sellingprice).value) == 0 || (+document.getElementById(mrp).value) == 0) {
                    document.getElementById(disper).value = "0";
                    document.getElementById(disrs).value = "0.00";
                }
                else if (discounttype == "percent") {
                    if (percent != 0) {
                        var valueafterdiscount = dynamicamount * percent;
                        document.getElementById(disrs).value = valueafterdiscount.toFixed(2);
                        dynamicamount = dynamicamount - valueafterdiscount;

                    }
                    else { document.getElementById(disrs).value = "0.00"; }
                }
                else {
                    if (rupees != 0) {
                        var valueafterdiscount = rupees / dynamicamount * 100;
                        document.getElementById(disper).value = valueafterdiscount.toFixed(1);
                        dynamicamount = dynamicamount - rupees;
                    }
                    else { document.getElementById(disper).value = 0; }
                }
                document.getElementById(amount).innerHTML = addCommas(dynamicamount.toFixed(2));
                document.getElementById(amountvalue).value = dynamicamount.toFixed(2);
            }

            CalculateTaxSummary(count);
            CalculateTotalDiscount();
            CalculateTotalAmount();
            CalcGrandTotal();
            if (document.getElementById(quotorderqty) != null) {
                CalculateBalance(count, type);
            }
        }
    }

    function CalculateTotalAmount() {
        var count = document.getElementById("hdnRowCount").value;
        var totalamount = 0;
        for (i = 1; i <= count; i++) {
            amount = "Amount" + i;
            if (document.getElementById(amount) != null) {
                var AMOUNT = +removeCommas(document.getElementById(amount).innerHTML);
                totalamount = totalamount + AMOUNT;
            }
        }
        document.getElementById("TotalAmount").innerHTML = "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
        document.getElementById("DeliveryChallanDetails_TotalAmount").value = totalamount;
        totalamount = Math.round(totalamount.toFixed(2));
        document.getElementById("GrandTotal").innerHTML = "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
        document.getElementById("Inwords").innerHTML = NumberToWords();
        document.getElementById("DeliveryChallanDetails_GrandTotal").value = totalamount.toFixed(2);
    }

    function CalcGrandTotal() {
        var ttlamt = 0;
        ttlamt = (+removeCommas(document.getElementById("TotalAmount").innerHTML)) + (+document.getElementById("DeliveryChallanDetails_PackAndForwd").value);
        var totaltaxamt = 0;
        var TaxCount = (+document.getElementById("ItemTaxCount").value);
        if (+($("#ItemTaxNumber1").val()) != 0) {
            for (var i = 1; i <= TaxCount; i++) {
                var addedtaxamount = "AddedTaxAmount" + i;
                totaltaxamt = totaltaxamt + (+removeCommas(document.getElementById(addedtaxamount).innerHTML));
            }
            document.getElementById("TotalTaxAmount").innerHTML = addCommas(totaltaxamt.toFixed(2));
            document.getElementById("DeliveryChallanDetails_TotalTaxAmount").value = totaltaxamt.toFixed(2);
        }
        ttlamt += totaltaxamt;
        ttlamt = Math.round(ttlamt.toFixed(2));
        document.getElementById("GrandTotal").innerHTML = "<i class='fa fa-rupee'></i>" + addCommas(ttlamt.toFixed(2));
        document.getElementById("Inwords").innerHTML = NumberToWords();
        document.getElementById("DeliveryChallanDetails_GrandTotal").value = ttlamt.toFixed(2);
    }
</script>

@*CALCULATE TAX SUMMARY *@
<script type="text/javascript">
    function CalculateTaxSummary(rowid) {
        var TaxCount = document.getElementById("ItemTaxCount").value;

        var currentitemtaxvalue = "ItemTaxValue" + rowid;
        var currentamount = "Amount" + rowid;
        var currentproportionateamount = "proportionatetaxamount" + rowid;
        var currenttaxamount = "ItemTaxAmount" + rowid;

        if (document.getElementById(currentamount) != null) {
            document.getElementById(currenttaxamount).value = (((+removeCommas(document.getElementById(currentamount).innerHTML)) + (+document.getElementById(currentproportionateamount).value)) * (+document.getElementById(currentitemtaxvalue).value / 100)).toFixed(2);
        }

        for (var i = 1; i <= TaxCount; i++) {
            var TotalTaxAmount = 0;
            var itemtaxno = "ItemTaxNumber" + i;
            var addedtaxamount = "AddedTaxAmount" + i;
            var addedtaxamounthdn = "AddedTaxAmounthdn" + i;
            var addedamount = "AddedAmount" + i;
            var addedamounthdn = "AddedAmounthdn" + i;
            for (var j = 1; j <= rowid; j++) {
                var itemtaxvalue = "ItemTaxValue" + j;
                var amount = "Amount" + j;
                var proporamount = "proportionatetaxamount" + j;
                if (document.getElementById(amount) != null) {
                    if ($("#" + itemtaxno).val() == $("#" + itemtaxvalue).val()) {
                        TotalTaxAmount = (+TotalTaxAmount) + (+removeCommas(document.getElementById(amount).innerHTML)) + (+document.getElementById(proporamount).value);
                    }
                }
            }
            document.getElementById(addedamount).innerHTML = "<i class='fa fa-inr'></i>" + addCommas(TotalTaxAmount.toFixed(2));
            document.getElementById(addedamounthdn).value = TotalTaxAmount.toFixed(2);
            TotalTaxAmount = TotalTaxAmount * (+document.getElementById(itemtaxno).value / 100);
            document.getElementById(addedtaxamount).innerHTML = "<i class='fa fa-inr'></i>" + addCommas(TotalTaxAmount.toFixed(2));
            document.getElementById(addedtaxamounthdn).value = TotalTaxAmount.toFixed(2);
        }
    }

    function CalculateItemWiseAmount(count, type) {
        var packandforwd = (+document.getElementById("DeliveryChallanDetails_PackAndForwd").value);
        if (type == "rps") {
            document.getElementById("discountType").value = "rps";
        }
        else if (type == "percent") {
            document.getElementById("discountType").value = "percent"
        }
        if (packandforwd != 0 || packandforwd != "") {
            var rowid = document.getElementById("hdnRowCount").value;
            for (var i = 1; i <= rowid; i++) {
                var quantity = "Quantity" + i;
                var quotorderquantity = "QuotOrderQty" + i;
                var sellingprice = "SellingPrice" + i;
                var mrp = "MRP" + i;
                var costprice = "CostPrice" + i;
                var amount = "Amount" + i;
                var discountpercent = "DisPer" + i;
                var discountrps = "DisRs" + i;
                var amountvalue = "AmountValue" + i;
                var unit = "Unit" + i;
                var itemtaxval = "ItemTaxValue" + i;

                if (document.getElementById(quantity) != null) {
                    var percent = (+document.getElementById(discountpercent).value) / 100;
                    var rupees = (+document.getElementById(discountrps).value);
                    var roundupqty = (+document.getElementById(quantity).value);

                    if (type == "mrp") {
                        var taxoncostprice = +$("#" + costprice).val() * +$("#" + itemtaxval).val() / 100;
                        var taxpercentoncostprice = +$("#" + costprice).val() / (+$("#" + costprice).val() + taxoncostprice) * +$("#" + itemtaxval).val();
                        var sellingpriceval = (+$("#" + mrp).val()) - (+$("#" + mrp).val() * +taxpercentoncostprice / 100);
                        $("#" + sellingprice).val(sellingpriceval.toFixed(2));
                    }
                    else if (type == "sellingprice") {
                        var calculatedmrpfromsellprice = +$("#" + sellingprice).val() * +$("#" + itemtaxval).val() / 100;
                        calculatedmrpfromsellprice = +$("#" + sellingprice).val() + calculatedmrpfromsellprice;
                        $("#" + mrp).val(calculatedmrpfromsellprice.toFixed(2));
                    }

                    var calculatedvalue = 0;
                    if ($("#" + unit).text() == "Dozens") {
                        calculatedvalue = ((+document.getElementById(quantity).value) * 12) * (+document.getElementById(sellingprice).value);
                    }
                    else {
                        calculatedvalue = (+document.getElementById(quantity).value) * (+document.getElementById(sellingprice).value);
                    }

                    var discounttype = document.getElementById("discountType").value;
                    if (roundupqty == 0 || (+document.getElementById(sellingprice).value) == 0 || (+document.getElementById(mrp).value) == 0) {
                        document.getElementById(discountpercent).value = "0";
                        document.getElementById(discountrps).value = "0.00";
                    }
                    else if (discounttype == "percent") {
                        if (percent != 0) {
                            var valueafterdiscount = calculatedvalue * percent;
                            document.getElementById(discountrps).value = +valueafterdiscount.toFixed(2);
                            calculatedvalue -= valueafterdiscount;

                        }
                        else { document.getElementById(discountrps).value = "0.00"; }
                    }
                    else {
                        if (rupees != 0) {
                            var valueafterdiscount = rupees / calculatedvalue * 100;
                            document.getElementById(discountpercent).value = valueafterdiscount.toFixed(1);
                            calculatedvalue -= rupees;
                        }
                        else { document.getElementById(discountpercent).value = 0; }
                    }

                    document.getElementById(amountvalue).value = calculatedvalue.toFixed(2);
                    document.getElementById(amount).innerHTML = addCommas(calculatedvalue.toFixed(2));
                    if (i == count) {
                        if (document.getElementById(quotorderquantity) != null) {
                            CalculateBalance(i, type);
                        }
                    }
                }

            }

            var totalamount = 0;
            for (var i = 1; i <= rowid; i++) {
                var amount = "Amount" + i;
                if (document.getElementById(amount) != null) {
                    totalamount = (+totalamount) + (+removeCommas(document.getElementById(amount).innerHTML));
                }
            }
            document.getElementById("TotalAmount").innerHTML = "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
            document.getElementById("Total_Amount_Value").value = totalamount.toFixed(2);

            //var totalamountwithpackandforwd = 0;
            for (var i = 1; i <= rowid; i++) {
                var amount = "Amount" + i;
                var amountvalue = "AmountValue" + i;
                var proportionate = "proportionatetax" + i;
                var proportionatetaxvalue = "proportionatetaxvalue" + i;
                var proportionateamount = "proportionatetaxamount" + i;
                if (document.getElementById(amount) != null) {
                    var propotaxpercent = (+removeCommas(document.getElementById(amount).innerHTML)) / (+document.getElementById("Total_Amount_Value").value);
                    document.getElementById(proportionate).innerHTML = (propotaxpercent * 100).toFixed(2);
                    document.getElementById(proportionatetaxvalue).value = (propotaxpercent * 100).toFixed(2);
                    var packandforwdpropoamount = propotaxpercent * packandforwd;
                    document.getElementById(proportionateamount).value = packandforwdpropoamount.toFixed(2);
                    CalculateTaxSummary(i);
                }
            }
            CalculateTotalDiscount();
            CalculateTaxSummary(rowid);

        }
        else {
            var proportionatecount = document.getElementById("hdnRowCount").value;
            for (var i = 1; i <= proportionatecount; i++) {
                var proportionate = "proportionatetax" + i;
                var proportionatetaxvalue = "proportionatetaxvalue" + i;
                var proporamount = "proportionatetaxamount" + i;
                if (document.getElementById(proportionate) != null) {
                    document.getElementById(proportionate).innerHTML = "0";
                    document.getElementById(proportionatetaxvalue).value = 0;
                    document.getElementById(proporamount).value = 0;
                }
            }
            var quantity = "Quantity" + count;
            var quotorderquantity = "QuotOrderQty" + count;
            var sellingprice = "SellingPrice" + count;
            var mrp = "MRP" + count;
            var costprice = "CostPrice" + count;
            var amount = "Amount" + count;
            var discountpercent = "DisPer" + count;
            var discountrps = "DisRs" + count;
            var amountvalue = "AmountValue" + count;
            var unit = "Unit" + count;
            var itemtaxval = "ItemTaxValue" + count;

            var totalamount = 0;
            if (document.getElementById(quantity) != null) {
                var percent = (+document.getElementById(discountpercent).value) / 100;
                var rupees = (+document.getElementById(discountrps).value);
                var roundupqty = (+document.getElementById(quantity).value);
                document.getElementById(quantity).value = roundupqty;

                if (type == "mrp") {
                    var taxoncostprice = +$("#" + costprice).val() * +$("#" + itemtaxval).val() / 100;
                    var taxpercentoncostprice = +$("#" + costprice).val() / (+$("#" + costprice).val() + taxoncostprice) * +$("#" + itemtaxval).val();
                    var sellingpriceval = (+$("#" + mrp).val()) - (+$("#" + mrp).val() * +taxpercentoncostprice / 100);
                    $("#" + sellingprice).val(sellingpriceval.toFixed(2));
                }
                else if (type == "sellingprice") {
                    var calculatedmrpfromsellprice = +$("#" + sellingprice).val() * +$("#" + itemtaxval).val() / 100;
                    calculatedmrpfromsellprice = +$("#" + sellingprice).val() + calculatedmrpfromsellprice;
                    $("#" + mrp).val(calculatedmrpfromsellprice.toFixed(2));
                }

                var calculatedvalue = 0;
                if ($("#" + unit).text() == "Dozens") {
                    calculatedvalue = ((+document.getElementById(quantity).value) * 12) * (+document.getElementById(sellingprice).value);
                }
                else {
                    calculatedvalue = (+document.getElementById(quantity).value) * (+document.getElementById(sellingprice).value);
                }

                var discounttype = document.getElementById("discountType").value;
                if (roundupqty == 0 || (+document.getElementById(sellingprice).value) == 0 || (+document.getElementById(mrp).value) == 0) {
                    document.getElementById(discountpercent).value = "0";
                    document.getElementById(discountrps).value = "0.00";
                }
                else if (discounttype == "percent") {
                    if (percent != 0) {
                        var valueafterdiscount = calculatedvalue * percent;
                        document.getElementById(discountrps).value = +valueafterdiscount.toFixed(2);
                        calculatedvalue -= valueafterdiscount;

                    }
                    else { document.getElementById(discountrps).value = "0.00"; }
                }
                else {
                    if (rupees != 0) {
                        var valueafterdiscount = rupees / calculatedvalue * 100;
                        document.getElementById(discountpercent).value = valueafterdiscount.toFixed(1);
                        calculatedvalue -= rupees;
                    }
                    else { document.getElementById(discountpercent).value = 0; }
                }

                document.getElementById(amountvalue).value = calculatedvalue.toFixed(2);
                document.getElementById(amount).innerHTML = addCommas(calculatedvalue.toFixed(2));
                if (document.getElementById(quotorderquantity) != null) {
                    CalculateBalance(count, type);
                }
            }
            var rowid = document.getElementById("hdnRowCount").value;
            for (var i = 1; i <= rowid; i++) {
                var amount = "Amount" + i;
                if (document.getElementById(amount) != null) {
                    totalamount = (+totalamount) + (+removeCommas(document.getElementById(amount).innerHTML));
                }
            }
            document.getElementById("TotalAmount").innerHTML = "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
            document.getElementById("Total_Amount_Value").value = totalamount.toFixed(2);

            CalculateTotalDiscount();
            CalculateTaxSummary(rowid);

        }
    }

    function CalculateBalance(id, type) {
        var quantity = "Quantity" + id;
        var quotorderquantity = "QuotOrderQty" + id;
        var extraqty = "ExtraQty" + id;
        var balance = "Balance" + id;
        var balancevalue = "BalanceValue" + id;
        var prevbalance = "PrevBalance" + id;
        var stockqty = "StkQty" + id;

        var qty = 0, quotorderqty = 0, bal = 0; prevbal = 0; stkqty = 0;
        qty = +document.getElementById(quantity).value;
        quotorderqty = document.getElementById(quotorderquantity).innerHTML;

        if (document.getElementById(prevbalance) == null) {
            if (quotorderqty != "---" && quotorderqty != "") {
                quotorderqty = +quotorderqty;
                if (quotorderqty >= qty) {
                    bal = quotorderqty - qty;
                    document.getElementById(extraqty).value = 0;
                    if (bal != 0) {
                        document.getElementById(balance).style.color = "red";
                    }
                    else {
                        document.getElementById(balance).style.color = "gray";
                        if (type == 'quantity') {
                            alertbox("All Quantity Sent..");
                        }
                    }

                }
                else {
                    if (type == 'quantity') {
                        alertbox(0 - (quotorderqty - qty) + " Extra Quantity Sent");
                        alertbox("All Quantity Sent..");
                        bal = 0;
                        document.getElementById(balance).style.color = "gray";
                        document.getElementById(extraqty).value = 0 - (quotorderqty - qty);
                    }
                }
                document.getElementById(balance).innerText = bal;
                document.getElementById(balancevalue).value = bal;
                document.getElementById("Quantity" + id).value = qty;
            }
            else {
                bal = 0;
            }
        }
        else {
            prevbal = +document.getElementById(prevbalance).value;
            bal = prevbal - qty;
            if (bal >= 0) {
                document.getElementById(balance).innerHTML = bal;
                document.getElementById(balancevalue).value = bal;
                if (bal != 0) {
                    document.getElementById(balance).style.color = "red";
                }
                else {
                    document.getElementById(balance).style.color = "gray";
                    if (type == 'quantity') {
                        alertbox("All Quantity Sent..");
                    }
                }
            }
            else {
                if (type == 'quantity') {
                    alertbox(0 - bal + " Extra Quantity Sent");
                    alertbox("All Quantity Sent..");
                    document.getElementById(extraqty).value = 0 - bal;
                    document.getElementById(balance).innerHTML = 0;
                    document.getElementById(balancevalue).value = 0;
                    document.getElementById(balance).style.color = "gray";
                }
            }
        }
    }
</script>

<script type="text/javascript">
    function CalculateItemTaxNumber() {
        var rowcount = +document.getElementById("hdnRowCount").value;
        for (i = 1; i <= rowcount; i++) {
            var tax = document.getElementById("ItemTaxValue" + i).value;
            if (tax != 0) {//if tax is '0' no need to add new taxnumber
                CalculateItemTax(tax);
            }
        }
    }

    function CalculateItemTax(tax) {
        var taxcount = document.getElementById("ItemTaxCount").value;
        if ($("#ItemTaxNumber" + taxcount).val() == 0) { //if first row's tax is 0 then add the tax in taxnumber1
            $("#ItemTaxNumber" + taxcount).val(tax);
            document.getElementById("AddTaxes").style.display = "inline";
            $("#AddedTax1").text(tax + "%");
        }
        else {//if first row tax is not 0 then make the taxnumber2 or 3 or more 
            var taxpresent = 0;
            for (var i = 1; i <= taxcount; i++) {
                var taxno = "ItemTaxNumber" + i;
                //if tax is already present then no need to make other taxnumbers
                if (tax == $("#" + taxno).val()) {
                    taxpresent++;
                }
            }
            if (taxpresent == 0) {
                taxcount++;
                var taxno = "ItemTaxNumber" + taxcount;
                var data = "<input type='hidden' id='" + taxno + "' name='" + taxno + "' value='" + tax + "' />";
                $("#AllTaxesNumbersValue").append(data);
                var addedtaxno = "AddedTax" + taxcount;
                var addedtaxamount = "AddedTaxAmount" + taxcount;
                var addedtaxamounthdn = "AddedTaxAmounthdn" + taxcount;
                var addedamount = "AddedAmount" + taxcount;
                var addedamounthdn = "AddedAmounthdn" + taxcount;
                var newlabel = "<div class='row'><div class='col-md-3 col-lg-3'><label id='" + addedamount + "'>0</label><input type='hidden' id='" + addedamounthdn + "' name='" + addedamounthdn + "' value='0' /></div>";
                newlabel += "<div class='col-md-2 col-lg-2'><label id='" + addedtaxno + "'>" + tax + "%" + "</label></div>";
                newlabel += "<div class='col-md-7 col-lg-7'><label id='" + addedtaxamount + "'>0</label><input type='hidden' id='" + addedtaxamounthdn + "' name='" + addedtaxamounthdn + "' value='0' /></div></div>";
                $("#AddTaxes").append(newlabel);
                $("#ItemTaxCount").val(taxcount);
            }
        }
    }
</script>

@*CALCULATE PACKAGING AND FORWQARDING PROPOTIONATE TAX*@
<script type="text/javascript">
    function CalculatePackAndForwd() {
        var rowid = document.getElementById("hdnRowCount").value;
        var totalamount = 0;
        var valueaftertax = 0;
        for (var i = 1; i <= rowid; i++) {
            var amount = "Amount" + i;
            if (document.getElementById(amount) != null) {
                totalamount = (+totalamount) + (+removeCommas(document.getElementById(amount).innerHTML));
            }
        }
        var finaltotalamount = totalamount;
        totalamount = totalamount + (+document.getElementById("DeliveryChallanDetails_PackAndForwd").value);
        var packandforwd = (+document.getElementById("DeliveryChallanDetails_PackAndForwd").value);
        for (var i = 1; i <= rowid; i++) {
            if ($("#DeliveryChallanDetails_QuotNo").val() == "") {
                CalculateAmount(i);
            }
            else {
                CalculateItemWiseAmount(i, '');
            }
        }
        CalculateTotalDiscount();
        CalcGrandTotal();
    }

    @*CALCULATE TRADE DISCOUNT*@
    function CalculateTotalDiscount() {
        var rowid = document.getElementById("hdnRowCount").value;
        var totalamount = 0;
        for (var i = 1; i <= rowid; i++) {
            var disinrs = "DisRs" + i;
            if (document.getElementById(disinrs) != null) {
                totalamount = (+totalamount) + (+removeCommas(document.getElementById(disinrs).value));
            }
        }
        document.getElementById("TotalDiscountValue").innerHTML = addCommas(totalamount.toFixed(2));
        document.getElementById("DeliveryChallanDetails_TotalDiscount").value = totalamount.toFixed(2);
    };


    function CheckRegistered(value) {
        if (value == 'yes') {
            document.getElementById("DeliveryChallanDetails_ClientType").value = "Registered";
            if (document.getElementById("DeliveryChallanDetails_ConsumeResell").value == "Reseller") {
                if (document.getElementById("SalesBillDetails_ClientState").value != "Maharashtra") {
                    $("#ddlformtypes").val("").attr("selected", "selected");
                    document.getElementById("YesRadioButton").disabled = false;
                    document.getElementById("NoRadioButton").checked = true;
                    document.getElementById("NoRadioButton").disabled = false;
                    document.getElementById("formtypeid").style.display = "none";
                }
            }
            else if (document.getElementById("DeliveryChallanDetails_ConsumeResell").value == "Consumer") {
                document.getElementById("YesRadioButton").disabled = true;
                document.getElementById("NoRadioButton").disabled = true;
            }
        }
        else if (value == "no") {
            document.getElementById("DeliveryChallanDetails_ClientType").value = "Non-Registered";
            $("#ddlformtypes").val("").attr("selected", "selected");
            document.getElementById("YesRadioButton").disabled = true;
            document.getElementById("NoRadioButton").checked = true;
            document.getElementById("NoRadioButton").disabled = true;
            document.getElementById("formtypeid").style.display = "none";
        }

        else if (value == "Consumer") {
            document.getElementById("DeliveryChallanDetails_ConsumeResell").value = "Consumer";
            $("#ddlformtypes").val("").attr("selected", "selected");
            $("#YesRadioButton").attr("disabled", true);
            $("#NoRadioButton").attr("disabled", true);
            document.getElementById("NoRadioButton").checked = true;
            document.getElementById("formtypeid").style.display = "none";
        }
        else {
            document.getElementById("DeliveryChallanDetails_ConsumeResell").value = "Reseller";
            if (document.getElementById("SalesBillDetails_ClientState").value != "Maharashtra") {
                if (document.getElementById("DeliveryChallanDetails_ClientType").value == "Registered") {
                    $("#YesRadioButton").attr("disabled", false);
                    $("#NoRadioButton").attr("disabled", false);
                    document.getElementById("formtypeid").style.display = "none";
                }
            }
        }
    }

    function DisplayForm(code) {
        if (code == 'yes') {
            document.getElementById("ddlformtypes").disabled = false;
            document.getElementById("formtypeid").style.display = "inline";
        }
        else {
            document.getElementById("formtypeid").style.display = "none";
            $("#ddlformtypes").val("").attr("selected", true);
            document.getElementById("ddlformtypes").disabled = true;
            document.getElementById("ClientDetails_FormType").value = null;
        }
    }
</script>

<style type="text/css">
    .CenterText {
        text-align: center;
        width: 100%;
    }
</style>

@*Enable all textboxes on submit*@
<script type="text/javascript">
    $(function () {
        $("#Submit").click(function () {
            var rowid = document.getElementById("hdnRowCount").value;
            var partialview = document.getElementById("PartialView").value;
            if (partialview == "No") {
                var validationcounter = 0;
                if ($("#DeliveryChallanDetails_ClientName").val() == "" || $("#ddltypeofmode").val() == "" || $("#ddltransportnames").val() == "" || $("#SalesPerson").val() == "") {
                    validationcounter++;
                }

                var itemCode = "ItemCode" + rowid;
                var narration = "Narration" + rowid;
                var quantity = "Quantity" + rowid;
                var sellingprice = "SellingPrice" + rowid;
                var mrp = "MRP" + rowid;
                var discountpercent = "DisPer" + rowid;
                var discountrps = "DisRs" + rowid;
                if (document.getElementById(itemCode) != null) {
                    if ($("#" + itemCode).val() == "") {
                        alertbox("Please Select The Item");
                        validationcounter++;
                        return false;
                    }
                    else if ($("#" + quantity).val() == "" || (+$("#" + quantity).val()) == 0) {
                        alertbox("Please Fill The Quantity");
                        validationcounter++;
                        return false;
                    }
                    else if ($("#" + sellingprice).val() == "" || (+$("#" + sellingprice).val()) == 0) {
                        alertbox("Please Fill The SellingPrice");
                        validationcounter++;
                        return false;
                    }
                    else if ($("#" + mrp).val() == "" || (+$("#" + mrp).val()) == 0) {
                        alertbox("Please Fill The MRP");
                        validationcounter++;
                        return false;
                    }
                    else {
                        document.getElementById("DeliveryChallanDetails_ClientName").disabled = false;
                        document.getElementById("DeliveryChallanDetails_QuotNo").disabled = false;
                        document.getElementById("DeliveryChallanDetails_OrderNo").disabled = false;
                        if (document.getElementById("formtypeid").style.display == "inline") {
                            document.getElementById("ddlformtypes").disabled = false;
                        }
                        var emptyrowcount = 0;
                        for (var i = 1; i <= rowid; i++) {
                            var quotorderno = "QuotOrderNo" + i;
                            var itemCode = "ItemCode" + i;
                            var narration = "Narration" + i;
                            var quantity = "Quantity" + i;
                            var sellingprice = "SellingPrice" + i;
                            var mrp = "MRP" + i;
                            var discountpercent = "DisPer" + i;
                            var discountrps = "DisRs" + i;
                            if (document.getElementById(itemCode) != null) {
                                document.getElementById(itemCode).disabled = false;
                                document.getElementById(narration).disabled = false;
                                document.getElementById(quantity).disabled = false;
                                document.getElementById(sellingprice).disabled = false;
                                document.getElementById(mrp).disabled = false;
                                document.getElementById(discountpercent).disabled = false;
                                document.getElementById(discountrps).disabled = false;
                            }
                            else {
                                emptyrowcount++;
                            }
                        }
                        if (emptyrowcount == rowid) {
                            alertbox("Please Insert At Least One Item");
                            validationcounter++;
                            return false;
                        }
                    }
                }
                else {
                    document.getElementById("DeliveryChallanDetails_ClientName").disabled = false;
                    document.getElementById("DeliveryChallanDetails_QuotNo").disabled = false;
                    document.getElementById("DeliveryChallanDetails_OrderNo").disabled = false;
                    if (document.getElementById("formtypeid").style.display == "inline") {
                        document.getElementById("ddlformtypes").disabled = false;
                    }
                    var emptyrowcount = 0;
                    for (var i = 1; i <= rowid; i++) {
                        var quotorderno = "QuotOrderNo" + i;
                        var itemCode = "ItemCode" + i;
                        var narration = "Narration" + i;
                        var quantity = "Quantity" + i;
                        var sellingprice = "SellingPrice" + i;
                        var mrp = "MRP" + i;
                        var discountpercent = "DisPer" + i;
                        var discountrps = "DisRs" + i;
                        if (document.getElementById(itemCode) != null) {
                            document.getElementById(itemCode).disabled = false;
                            document.getElementById(narration).disabled = false;
                            document.getElementById(quantity).disabled = false;
                            document.getElementById(sellingprice).disabled = false;
                            document.getElementById(mrp).disabled = false;
                            document.getElementById(discountpercent).disabled = false;
                            document.getElementById(discountrps).disabled = false;
                        }
                        else {
                            emptyrowcount++;
                        }
                    }
                    if (emptyrowcount == rowid) {
                        alertbox("Please Insert At Least One Item");
                        validationcounter++;
                        return false;
                    }
                }
                if (validationcounter == 0) {
                    setTimeout(function () {
                        document.getElementById("Submit").disabled = true;
                    }, 100);
                }
            }
            else {
                var validationcounter = 0;
                if ($("#DeliveryChallanDetails_ClientName").val() == "" || $("#ddltypeofmode").val() == "" || $("#ddltransportnames").val() == "" || $("#SalesPerson").val() == "") {
                    validationcounter++;
                }
                for (var i = 1; i <= rowid; i++) {
                    var itemCode = "ItemCode" + i;
                    var narration = "Narration" + i;
                    var quantity = "Quantity" + i;
                    var sellingprice = "SellingPrice" + i;
                    var mrp = "MRP" + i;
                    var discountpercent = "DisPer" + i;
                    var discountrps = "DisRs" + i;
                    if (document.getElementById(itemCode) != null) {
                        if ($("#" + itemCode).val() == "") {
                            alertbox("Please Select The Item");
                            validationcounter++;
                            break;
                        }
                        else if ($("#" + quantity).val() == "" || (+$("#" + quantity).val()) == 0) {
                            alertbox("Please Fill The Quantity");
                            validationcounter++;
                            break;
                        }
                        else if ($("#" + sellingprice).val() == "" || (+$("#" + sellingprice).val()) == 0) {
                            alertbox("Please Fill The SellingPrice");
                            validationcounter++;
                            return false;
                        }
                        else if ($("#" + mrp).val() == "" || (+$("#" + mrp).val()) == 0) {
                            alertbox("Please Fill The MRP");
                            validationcounter++;
                            return false;
                        }
                    }
                }

                if (validationcounter == 0) {
                    document.getElementById("DeliveryChallanDetails_ClientName").disabled = false;
                    document.getElementById("DeliveryChallanDetails_QuotNo").disabled = false;
                    document.getElementById("DeliveryChallanDetails_OrderNo").disabled = false;
                    if (document.getElementById("formtypeid").style.display == "inline") {
                        document.getElementById("ddlformtypes").disabled = false;
                    }
                    var emptyrowcount = 0;
                    for (var i = 1; i <= rowid; i++) {
                        var quotorderno = "QuotOrderNo" + i;
                        var previtemCode = "ItemCode" + i;
                        var previtemname = "ItemName" + i;
                        var prevnarration = "Narration" + i;
                        var prevquantity = "Quantity" + i;
                        var sellingprice = "SellingPrice" + i;
                        var mrp = "MRP" + i;
                        var prevdiscountpercent = "DisPer" + i;
                        var prevdiscountrps = "DisRs" + i;
                        if (document.getElementById(previtemCode) != null) {
                            document.getElementById(quotorderno).disabled = false;
                            document.getElementById(previtemCode).disabled = false;
                            document.getElementById(previtemname).disabled = false;
                            document.getElementById(prevnarration).disabled = false;
                            document.getElementById(prevquantity).disabled = false;
                            document.getElementById(sellingprice).disabled = false;
                            document.getElementById(mrp).disabled = false;
                            document.getElementById(prevdiscountpercent).disabled = false;
                            document.getElementById(prevdiscountrps).disabled = false;
                        }
                        else {
                            emptyrowcount++;
                        }
                    }
                    if (emptyrowcount == rowid) {
                        alertbox("Please Insert At Least One Item");
                        validationcounter++;
                        return false;
                    }
                }
                else {
                    return false;
                }
                if (validationcounter == 0) {
                    setTimeout(function () {
                        document.getElementById("Submit").disabled = true;
                    }, 100);
                }
            }
        });
    });
</script>

<script type="text/javascript">
    function ShowQuantity(row) {
        var itemcode = document.getElementById("ItemCode" + row).value;
        window.open("/Stock/ShowAllQuantity?code=" + itemcode, "_target", "width=500,height=300,top=150px,left=400px");
    }
</script>

<script type="text/javascript">
    function AllowNumbers(key) {
        var keycode = (key.which) ? key.which : key.keyCode;
        //comparing pressed keycodes
        if (!(keycode == 8 || keycode == 46) && (keycode < 48 || keycode > 57)) {
            return false;
        }
    }
    function AllowDecimal(key, rowid) {
        var numbertype = $("#NumberType" + rowid).val();
        var quantity = $("#Quantity" + rowid).val();

        var pointFoundCount = 0;
        for (var i = 0; i <= quantity.length; i++) {
            if (quantity[i] == '.') {
                pointFoundCount++;
            }
        }

        var pointposition = quantity.indexOf(".");
        var digitupto = 0;
        if (pointposition != -1) {
            digitupto = quantity.substr(pointposition, quantity.length).length;
        }

        var keycode = (key.which) ? key.which : key.keyCode;
        //comparing pressed keycodes
        if (numbertype == 'Whole') { //if unit type is whole number then don't allow point
            if (!(keycode == 8) && (keycode < 48 || keycode > 57)) {
                return false;
            }
        }
        else if (quantity.length == 0) {
            if (!(keycode == 8) && (keycode < 48 || keycode > 57)) {
                return false;
            }
        }
        else if (keycode == 46) { //if decimal point is inserted
            if (pointFoundCount > 0 && pointFoundCount < 2) { // more than one decimal point is inserted then don't allow to insert it
                return false;
            }
        }
        else if (digitupto != 0) { // if unit type is decimal then wait for decimal point to be insert then execute this condition 
            if (numbertype == '2Digit') { // if unit type is 2 digit the then allow 2 digits after decimal not the characters in between
                if (!(keycode == 8 || keycode == 46) && (keycode < 48 || keycode > 57) || digitupto >= 3) {
                    return false;
                }
            }
            else { // if unit type is 2 digit the then allow 3 digits after decimal not the characters in between
                if (!(keycode == 8 || keycode == 46) && (keycode < 48 || keycode > 57) || digitupto >= 4) {
                    return false;
                }
            }
        }
        else { //don't allow any decimal point or character until first digit occurs
            if (quantity.length == 0) // if first digit is point in quantity field then don't allow it and characters too
            {
                if (!(keycode == 8) && (keycode < 48 || keycode > 57)) {
                    return false;
                }
            }
            else { //don't allow any character until the above else if condition meets
                if (!(keycode == 8 || keycode == 46) && (keycode < 48 || keycode > 57)) {
                    return false;
                }
            }
        }
    }
</script>

<script>
    $(document).ready(function () {
        $("#Edit").click(function () {
            window.location.assign("/ProcessingQuotation/ChallanEdit");
        });

        //$("#Delete").click(function () {
        //    window.location.assign("/ProcessingQuotation/ChallanDelete");
        //});

        $("#Print").click(function () {
            window.location.assign("/ProcessingQuotation/ChallanPrint");
        });
    });
</script>
@Html.Partial("../Shared/Header")
<section>
    <div class="mainwrapper">
        @Html.Partial("../Shared/LeftMenu")
        @using (Html.BeginForm("DeliveryChallan", "ProcessingQuotation", FormMethod.Post))
        {
            <input type="hidden" id="preparedby" value="@HttpContext.Current.Session["UserEmail"]"/>
    
            <input type="hidden" id="PartialView" name="PartialView" value="No" />//when delivery challan is made from quot or sales order for first time then value is yes else 2nd time or more than that then value is holding
            <input type="hidden" id="discountType" value="percent" />
            <div id="AllTaxesNumbersValue">
                <input type="hidden" id="ItemTaxCount" name="ItemTaxCount" value="1" />
                <input type="hidden" id="ItemTaxNumber1" name="ItemTaxNumber1" value="0" />
            </div>
            <input type="hidden" id="hdnRowCount" name="hdnRowCount" value="1" />
            <input type="hidden" value="0" id="mainpageBillItemCounts" />
            @Html.HiddenFor(model => model.DeliveryChallanDetails.TransportContactNo)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.ClientContactNo)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.ClientEmail)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.ClientState)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.ClientAddress)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.ClientType)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.ConsumeResell)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.SalesPersonAddress)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.SalesPersonContact)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.SalesPersonEmail)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.SalesPersonDesignation)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.TotalAmount)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.GrandTotal)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.TotalDiscount)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.TotalTaxAmount)
            @Html.HiddenFor(model => model.ChallanCode)

            @Html.HiddenFor(model => model.DeliveryChallanDetails.ShopAddress)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.ShopContactPerson)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.ShopEmail)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.ShopName)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.PreparedBy)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.PreparedEmail)
            @Html.HiddenFor(model => model.DeliveryChallanDetails.PreparedContact)
            <audio id="audio" muted="true" preload="auto" style="display: none" controls="controls" autoplay="false">
                <source src="" type="audio/ogg" />
            </audio>
            <div class="mainpanel">
                <div class="col-md-12 col-lg-12">
                    <div class="col-md-12 col-lg-12">
                        <div class="row">
                            <label style="font-size: 22px">Delivery Challan</label>
                            @if (HttpContext.Current.Session["UserName"].ToString() != "SuperAdmin")
                            {
                                if (Session["LOGINSHOPGODOWNCODE"] != null)
                                {
                                <div style="text-align: right">
                                    <label style="font-family: 'Good Times'; font-size: small; color: red">Login At:</label>
                                    <label style="font-family: 'Good Times'; font-size: small; color: red" id="LoginShopName">@Session["SHOPGODOWNNAME"].ToString()</label>
                                </div>
                                <input type="hidden" id="LoginShopCode" value="@Session["LOGINSHOPGODOWNCODE"].ToString()" />
                                }
                            }
                            <div class="col-md-12 col-lg-12">

                                <table style="border: 1px double; width: 100%">
                                    <tr>
                                        <td>
                                            <div class="row">
                                                <div class="col-md-12 col-lg-12">
                                                    <div class="col-md-4 col-lg-4" style="border-right: 1px solid #999; height: 200px;">
                                                        <div class="row" id="Quot">
                                                            <div class="col-md-12 col-lg-12">
                                                                <div style="height: 5px"></div>
                                                                <div class="row">
                                                                    <div class="col-lg-11 col-md-11">
                                                                        <label>Client Name<i style="color: red">*</i></label>
                                                                        @Html.TextBoxFor(model => model.DeliveryChallanDetails.ClientName, new { @placeholder = "Client Name", @class = "form-control", })
                                                                        @Html.ValidationMessageFor(model => model.DeliveryChallanDetails.ClientName, null, new { style = "color:red" })
                                                                    </div>
                                                                </div>
                                                                <div class="row" id="ClientDetails" style="display: none">
                                                                    <div style="height: 5px"></div>
                                                                    <label>State: &nbsp</label><label style="font-weight: normal" id="ClientState"></label><br />
                                                                    <label>Client Type: &nbsp</label>
                                                                    <input type="radio" id="Registered" name="Registered" onclick="CheckRegistered('yes')" />
                                                                    Registered
                                        <input type="radio" id="NonRegistered" name="Registered" onclick="CheckRegistered('no')" />
                                                                    Non-Registered
                                        <br />
                                                                    <input type="radio" id="Consumer" name="ConsumeResell" onclick="CheckRegistered('Consumer')" />
                                                                    Consumer
                                        <input type="radio" id="Reseller" name="ConsumeResell" onclick="CheckRegistered('Reseller')" />
                                                                    Reseller
                                      <div class="row">
                                          <div class="col-lg-6 col-md-6">
                                              <label for="exampleInputSalesTax">Form Applicable</label><br />
                                              <input type="radio" id="YesRadioButton" name="RadioButton" disabled="disabled" onclick="DisplayForm('yes')" />Yes &nbsp
                                        <input type="radio" id="NoRadioButton" name="RadioButton" disabled="disabled" checked="checked" onclick="DisplayForm('no')" />No                                   
                                          </div>
                                          <div class="col-lg-5 col-md-5">
                                              <div class="row">
                                                  <div id="formtypeid" style="display: none">
                                                      <label>Form Type</label>
                                                      @Html.DropDownListFor(model => model.DeliveryChallanDetails.FormType, new List<SelectListItem> { new SelectListItem { Text = "C-Form" }, new SelectListItem { Text = "E1-Form" }, new SelectListItem { Text = "E2-Form" } }, "Select Type", new { id = "ddlformtypes", @class = "form-control" })<br />
                                                  </div>
                                              </div>
                                          </div>
                                      </div>
                                                                </div>
                                                                <div class="form-group"></div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-4 col-md-4" style="border-right: 1px solid #999; height: 200px;">
                                                        <div class="col-md-12 col-lg-12">
                                                            <div style="height: 5px"></div>
                                                            <div class="row" id="TransportDetails">
                                                                <div class="col-md-12 col-lg-12">
                                                                    <div class="row">
                                                                        <div class="row">
                                                                            <div class="col-md-12 col-lg-12">
                                                                                <label>Transport Details</label>
                                                                            </div>
                                                                            <br />
                                                                            <div class="col-md-6 col-lg-6">
                                                                                <label>Mode <i style="color: red">*</i></label>
                                                                                @Html.DropDownListFor(model => model.DeliveryChallanDetails.TransportMode, new List<SelectListItem> { new SelectListItem { Text = "Road" }, new SelectListItem { Text = "Train" }, new SelectListItem { Text = "Air" } }, "Select Mode", new { id = "ddltypeofmode", @class = "form-control" })
                                                                                @Html.ValidationMessageFor(model => model.DeliveryChallanDetails.TransportMode, null, new { style = "color:red" })
                                                                            </div>
                                                                            <div class="col-md-6 col-lg-6">
                                                                                <label>Name <i style="color: red">*</i></label>
                                                                                @Html.DropDownListFor(model => model.DeliveryChallanDetails.TransportName, Enumerable.Empty<SelectListItem>(), "Select Name", new { id = "ddltransportnames", @class = "form-control" })
                                                                                @Html.ValidationMessageFor(model => model.DeliveryChallanDetails.TransportName, null, new { style = "color:red" })
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div style="height: 10px"></div>
                                                            <div class="row">
                                                                <div class="row">
                                                                    <div class="col-md-12 col-lg-12">
                                                                        <label>Sales Person Name:<i style="color: red">*</i></label>
                                                                    </div>
                                                                </div>
                                                                <div class="row form-group">
                                                                    <div class="col-md-9 col-lg-9">
                                                                        @Html.TextBoxFor(model => model.DeliveryChallanDetails.SalesPersonName, new { id = "SalesPerson", @class = "form-control", @autocomplete = "off", @placeholder = "Sales Person Name" })
                                                                        @Html.ValidationMessageFor(model => model.DeliveryChallanDetails.SalesPersonName, null, new { @style = "color:#f00" })
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4 col-lg-4">
                                                        <div style="height: 5px"></div>
                                                        <div class="row">
                                                            <div class="col-md-12 col-lg-12">
                                                                @{
                            string dt = DateTime.Now.ToString("dd/MM/yyyy");
                            string code = Model.ChallanCode;
                                                                }
                                                                <table>
                                                                    <tr>
                                                                        <td style="width: 43%">
                                                                            <div style="height: 2px"></div>
                                                                            <label style="font-size: 14px;">Date</label>
                                                                        </td>
                                                                        <td>
                                                                            <label id="date" style="font-size: 16px;">&nbsp @dt</label>
                                                                        </td>
                                                                    </tr>
                                                                    <tr style="height: 10px"></tr>
                                                                    <tr>
                                                                        <td>
                                                                            <div style="height: 2px"></div>
                                                                            <label style="font-size: 14px;">Challan No.</label>
                                                                        </td>
                                                                        <td>
                                                                            <label id="pono" style="font-size: 15px;">&nbsp @code</label>
                                                                        </td>
                                                                    </tr>
                                                                    <tr style="height: 8px"></tr>
                                                                    <tr>
                                                                        <td>
                                                                            <div style="height: 2px"></div>
                                                                            <label style="font-size: 14px;">Lr No.</label>
                                                                        </td>
                                                                        <td>
                                                                            @Html.TextBoxFor(model => model.DeliveryChallanDetails.LrNo, new { @class = "form-control", @placeholder = "Lr No", @style = "text-align:center", @autocomplete = "off" })
                                                                        </td>
                                                                    </tr>
                                                                    <tr style="height: 10px"></tr>
                                                                    <tr>
                                                                        <td>
                                                                            <div style="height: 2px"></div>
                                                                            <label style="font-size: 14px;">Quotation No.</label>
                                                                        </td>
                                                                        <td>
                                                                            @Html.TextBoxFor(model => model.DeliveryChallanDetails.QuotNo, new { @class = "form-control", @placeholder = "Quot No", style = "text-align:center" })
                                                                        </td>
                                                                    </tr>
                                                                    <tr style="height: 8px"></tr>
                                                                    <tr>
                                                                        <td>
                                                                            <div style="height: 2px"></div>
                                                                            <label style="font-size: 14px;">Sales Order No.</label>
                                                                        </td>
                                                                        <td>
                                                                            @Html.TextBoxFor(model => model.DeliveryChallanDetails.OrderNo, new { @class = "form-control", @placeholder = "Order No", style = "text-align:center" })
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td></td>
                                                                        <td style="text-align: left;" id="bills"></td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-12 col-lg-12">
                                                    <div style="height: 5px"></div>
                                                </div>

                                                <div class="col-md-12 col-lg-12">
                                                    <div id="DynamicRowsDiv">
                                                        <table class="table" id="DynamicRows" style="border-color: #d2d2d2; border: outset">
                                                            <thead id="DynamicRowsHeading">
                                                                <tr>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">
                                                                            Sr.<br />
                                                                            No.</label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">Item<label style="color: red">*</label></label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">Narration</label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">Stk Qty</label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">Shop Qty</label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">Qty<i style="color: red">*</i></label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">Unit</label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">
                                                                            Sell<br />
                                                                            Price<label style="color: red">*</label></label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">MRP<label style="color: red">*</label></label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">
                                                                            Disc<br />
                                                                            (%)</label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">
                                                                            Disc<br />
                                                                            (<i class="fa fa-rupee"></i>)</label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">
                                                                            Tax<br />
                                                                            (%)</label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">
                                                                            Amt<br />
                                                                            (<i class="fa fa-rupee"></i>)</label></th>
                                                                    <th>
                                                                        <label style="text-align: center; width: 100%">
                                                                            Prop 
                                                                            Tax<br />
                                                                            (%)</label></th>
                                                                    <th></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="PopUpDynamicRows">
                                                                <tr id="row1">
                                                                    <td style="text-align: center">
                                                                        <label style="font-weight: normal">1</label>
                                                                    </td>
                                                                    <td class="col-md-2 col-lg-2">
                                                                        <select id="ItemCode1" name="ItemCode1" class="form-control" disabled="disabled">
                                                                            <option value="">Select Item </option>
                                                                        </select>
                                                                        <input type="hidden" id="ItemName1" name="ItemName1" />
                                                                        <input type="hidden" id="ItemType1" name="ItemType1" value="Inventory" />
                                                                        <input type="hidden" id="ColorValue1" name="ColorValue1" />
                                                                        <input type="hidden" id="DescriptionValue1" name="DescriptionValue1" />
                                                                        <input type="hidden" id="Barcode1" name="Barcode1" />
                                                                        <input type="hidden" id="DesignCode1" name="DesignCode1" />
                                                                        <input type="hidden" id="DesignName1" name="DesignName1" />
                                                                        <input type="hidden" id="Brand1" name="Brand1" />
                                                                        <input type="hidden" id="Size1" name="Size1" />
                                                                        <input type="hidden" id="MaterialValue1" name="MaterialValue1" />
                                                                    </td>
                                                                    <td class="col-md-2 col-lg-2">
                                                                        <textarea id="Narration1" name="Narration1" class="form-control" disabled="disabled" placeholder="Narration" style="text-align: center" rows="1"></textarea>
                                                                    </td>
                                                                    <td style="text-align: center">
                                                                        <a href="#" onclick="ShowQuantity(1)" id="StkQty1" style="font-weight: normal">---</a>
                                                                    </td>
                                                                    <td style="text-align: center">
                                                                        <label id="ShopQty1" style="font-weight: normal">---</label>
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" class="form-control" style="text-align: center" id="Quantity1" name="Quantity1" disabled="disabled" placeholder="Qty" autocomplete="off" onchange="CalculateAmount(1,'quantity')" onkeypress="return AllowDecimal(event,1)" />
                                                                        <input type="hidden" id="ExtraQty1" name="ExtraQty1" value="0" />
                                                                    </td>
                                                                    <td>
                                                                        <label id="Unit1" style="font-weight: normal"></label>
                                                                        <input type="hidden" id="UnitValue1" name="UnitValue1" />
                                                                        <input type="hidden" id="NumberType1" name="NumberType1" />
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" class="form-control" style="text-align: center" id="SellingPrice1" name="SellingPrice1" autocomplete="off" disabled="disabled" placeholder="Sell Price" onchange="CalculateAmount(1,'sellingprice')" onkeypress="return AllowNumbers(event)" />
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" class="form-control" style="text-align: center" id="MRP1" name="MRP1" autocomplete="off" disabled="disabled" placeholder="MRP" onchange="CalculateAmount(1,'mrp')" onkeypress="return AllowNumbers(event)" />
                                                                        <input type="hidden" id="CostPrice1" name="CostPrice1" />
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" id="DisPer1" name="DisPer1" autocomplete="off" class="form-control" value="0" placeholder="0%" disabled="disabled" style="text-align: center; width: 100%" onchange="CalculateAmount(1,'percent')" onkeypress="return AllowNumbers(event)" />
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" id="DisRs1" name="DisRs1" autocomplete="off" class="form-control" value="0.00" placeholder="0" disabled="disabled" style="text-align: center; width: 100%" onchange="CalculateAmount(1,'rps')" onkeypress="return AllowNumbers(event)" />
                                                                    </td>
                                                                    <td style="text-align: right">
                                                                        <label style="font-weight: normal" id="ItemTax1">0</label><input type="hidden" id="ItemTaxValue1" name="ItemTaxValue1" value="0" />
                                                                        <input type="hidden" id="ItemTaxAmount1" name="ItemTaxAmount1" value="0" />
                                                                    </td>
                                                                    <td style="text-align: right">
                                                                        <label style="font-weight: normal" id="Amount1">0</label>
                                                                        <input type="hidden" id="AmountValue1" name="AmountValue1" />
                                                                    </td>
                                                                    <td style="text-align: right">
                                                                        <label id="proportionatetax1" style="text-align: right">0</label>
                                                                        <input type="hidden" id="proportionatetaxvalue1" name="proportionatetaxvalue1" value="0" />
                                                                        <input type="hidden" id="proportionatetaxamount1" name="proportionatetaxamount1" value="0" />
                                                                    </td>
                                                                    <td><a href='#' onclick="DeleteRow(1)" class='fa fa-trash fa-lg' style='color: red;' /></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>

                                                <div class="col-md-12 col-lg-12">
                                                    <div id="LoadList"></div>
                                                </div>
                                                <div id="EmptyDivWhenCompleted">
                                                    <div class="col-md-12 col-lg-12">
                                                        <button class="btn btn-link" id="NonInvButton" type="button" style="float: right; text-align: right; color: orangered; font-size: small;">Non-Inventory Item</button>
                                                    </div>
                                                    <div class="col-lg-12 col-md-12">
                                                        <div class="col-md-6 col-lg-6">
                                                            <div class="row">
                                                                <div class="col-md-4 col-lg-4">
                                                                    <label style="font-size: 14px;">Total Discount:</label>
                                                                </div>
                                                                <div class="col-md-8 col-lg-8">
                                                                    <i class="fa fa-inr" style="font-size: 14px"></i>
                                                                    <label id="TotalDiscountValue" style="font-size: 14px">0.00</label>
                                                                </div>
                                                            </div>
                                                            @*TAX SUMMARY WITHOUT QUOTATION*@
                                                            <div id="AddTaxes" style="display: none">
                                                                <div class="row">
                                                                    <div class="col-lg-12 col-md-12">
                                                                        <label style="font-size: 14px">Tax Summary:</label>
                                                                    </div>
                                                                </div>
                                                                <div style="height: 5px"></div>
                                                                <div class="row">
                                                                    <div class="col-md-3 col-lg-3">
                                                                        <label id="AddedAmount1">0</label>
                                                                        <input type="hidden" id="AddedAmounthdn1" name="AddedAmounthdn1" value="0" />
                                                                    </div>
                                                                    <div class="col-md-2 col-lg-2">
                                                                        <label id="AddedTax1"></label>
                                                                    </div>
                                                                    <div class="col-md-7 col-lg-7">
                                                                        <label id="AddedTaxAmount1">0</label>
                                                                        <input type="hidden" id="AddedTaxAmounthdn1" name="AddedTaxAmounthdn1" value="0" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 col-lg-6">
                                                            <div class="col-lg-12 col-md-12">
                                                                <div class="row">
                                                                    <div class="col-md-7 col-lg-7">
                                                                        <label style="font-size: 14px">Total Amount</label>
                                                                    </div>
                                                                    <div class="col-md-5 col-lg-5" style="text-align: right">
                                                                        <div class="row">
                                                                            <label id="TotalAmount" style="font-size: 14px">0</label>
                                                                            <input type="hidden" id="Total_Amount_Value" name="Total_Amount_Value" value="0" />
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div style="height: 5px"></div>
                                                                <div class="row">
                                                                    <div class="col-md-7 col-lg-7">
                                                                        <label style="font-size: 14px">Packing and Forwarding</label>
                                                                    </div>
                                                                    <div class="col-md-5 col-lg-5">
                                                                        <div class="row">
                                                                            @Html.TextBoxFor(model => model.DeliveryChallanDetails.PackAndForwd, new { @class = "form-control", @autocomplete = "off", @placeholder = "0", @Value = "0", @style = "text-align:right", @onchange = "CalculatePackAndForwd()" })
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div style="height: 5px"></div>
                                                                <div class="row">
                                                                    <div class="col-md-7 col-lg-7">
                                                                        <label style="font-size: 14px">Tax Amount</label>
                                                                    </div>
                                                                    <div class="col-md-5 col-lg-5" style="text-align: right">
                                                                        <div class="row">
                                                                            <label id="TotalTaxAmount" style="font-size: 14px;">0</label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-12 col-md-12">
                                                            <div class="row">
                                                                <div class="col-ld-12 col-md-12">
                                                                    <div style="width: 100%; height: 1px; background-color: lightgrey;"></div>
                                                                    <div style="height: 5px"></div>
                                                                </div>
                                                            </div>

                                                            <div class="row">
                                                                <div class="col-lg-6 col-md-6">
                                                                </div>
                                                                <div class="col-lg-6 col-md-6">
                                                                    <div class="col-lg-12 col-md-12">
                                                                        <div class="col-md-7 col-lg-7">
                                                                            <div class="row">
                                                                                <label style="font-size: 14px">Grand Total</label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-5 col-lg-5" style="text-align: right">
                                                                            <div class="row">
                                                                                <div class="row">
                                                                                    <label id="GrandTotal" style="font-size: 14px">0</label>
                                                                                    <input type="hidden" id="Grand_Total_Value" name="Grand_Total_Value" value="0" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div style="height: 5px"></div>
                                                            <div class="row">
                                                                <div class="col-lg-2 col-md-2">
                                                                    <label style="font-size: medium">In Words</label>
                                                                </div>
                                                                <div class="col-lg-10 col-md-10">
                                                                    <div class="row">
                                                                        <div class="row">
                                                                            <div class="row">
                                                                                <label id="Inwords"></label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-ld-12 col-md-12">
                                                            <div style="height: 15px"></div>
                                                            <div style="width: 100%; height: 1px; background-color: black"></div>
                                                            <div style="height: 10px"></div>
                                                        </div>

                                                        <div class="col-md-12 col-lg-12" id="acceptedid">
                                                            <div class="row">
                                                                <div style="height: 15px"></div>
                                                                <div class="col-md-3 col-lg-3">
                                                                    <label>Prepared By</label><br />
                                                                    <label id="PreparedByName"></label>
                                                                </div>
                                                                <div class="col-md-4 col-lg-4">
                                                                    <label>Email-Id</label><br />
                                                                    <label id="PreparedByEmail" style="font-weight: normal"></label>
                                                                </div>
                                                                <div class="col-md-3 col-lg-3">
                                                                    <label>Contact No.</label><br />
                                                                    <label id="PreparedByContact" style="font-weight: normal"></label>
                                                                </div>
                                                                @{
                            string preparetimeid = DateTime.Now.ToShortTimeString();
                                                                }
                                                                <div class="col-md-2 col-lg-2">
                                                                    <label>Prepare Time</label><br />
                                                                    <label style="font-weight: normal">@preparetimeid</label>
                                                                </div>
                                                                <div style="height: 70px"></div>
                                                            </div>
                                                        </div>

                                                        <div class="col-lg-12 col-md-12">
                                                            <div style="height: 15px"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                                <div style="height: 5px"></div>
                                <div class="col-md-12 col-lg-12">
                                    <div class="col-lg-9 col-md-9">
                                        <input type="submit" id="Submit" value="Save" class="col-md-offset-8 col-lg-offset-8 btn btn-success" />
                                    </div>
                                    <div class="col-lg-3 col-md-3" style="text-align: right">
                                        <button type="button" id="Edit" class="btn btn-warning" data-toggle="tooltip" title="Edit"><i class="fa fa-pencil"></i></button>
                                        <button type="button" id="Print" class="btn btn-primary" data-toggle="tooltip" title="Print"><i class="fa fa-print" title="Print"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        }
    </div>
</section>
