@model CodeFirstEntities.MainApplication
@{
    ViewBag.Title = "PurchaseData";
}
<!-- Meta, title, CSS, favicons, etc. -->
<meta charset="utf-8" />
<title>Retail Managment Software</title>
<meta name="keywords" content="Retail Software" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- Font CSS  -->
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:400,600,700" />
<link href="~/Content/style.default.css" rel="stylesheet" />
<link href="~/Content/style.default.blue.css" rel="stylesheet" />
<!-- Core CSS  -->
<link rel="stylesheet" type="text/css" href="~/Content/bootstrap.css" />
<link rel="stylesheet" type="text/css" href="~/Content/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="~/Content/sb-admin-2.css" />
<link rel="stylesheet" type="text/css" href="~/Content/metisMenu.min.css" />
<link rel="stylesheet" type="text/css" href="~/Content/font-awesome.css" />
<link rel="stylesheet" type="text/css" href="~/fonts/glyphicons.min.css" />

<!-- Plugin CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/fullcalendar.css" />
<link rel="stylesheet" type="text/css" href="~/Content/datatables.min.css" />

<!-- Theme CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/theme.css" />
<link rel="stylesheet" type="text/css" href="~/Content/pages.css" />
<link rel="stylesheet" type="text/css" href="~/Content/plugins.css" />
<link rel="stylesheet" type="text/css" href="~/Content/responsive.css" />

<!-- Demonstration CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/demo.css" />

<!-- Your Custom CSS -->
<link rel="stylesheet" type="text/css" href="~/Content/custom.css" />

<!-- Favicon -->
<link rel="shortcut icon" href="~/Images/favicon.ico" />

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
@*<script src="@Url.Content("~/Scripts/modernizr.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-migrate-1.2.1.min.js")" type="text/javascript"></script>*@
@*<script src="@Url.Content("~/Scripts/jquery-1.9.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.9.1.min.js")" type="text/javascript"></script>*@
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.24.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.24.min.js")" type="text/javascript"></script>

<!-- Plugins - Via CDN -->
<script type="text/javascript" src="~/Scripts/jquery.flot.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.sparkline.min.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="~/Scripts/fullcalendar.min.js"></script>
<script type="text/javascript" src="~/Scripts/bootstrap.js"></script>


<script type="text/javascript" src="~/Scripts/jquery.scrollTo-1.4.3.1-min.js"></script>

<!-- Theme Javascript -->
<script type="text/javascript" src="~/Scripts/uniform.min.js"></script>
<script type="text/javascript" src="~/Scripts/main.js"></script>
<script type="text/javascript" src="~/Scripts/custom.js"></script>
<script type="text/javascript" src="~/Scripts/sb-admin-2.js"></script>
<script type="text/javascript" src="~/vendor/plugins/metisMenu/metisMenu.min.js"></script>

<link href="@Url.Content("~/Content/themes/base/jsDatePick_ltr.css")" rel="stylesheet" />
<link href="@Url.Content("~/Content/themes/base/jsDatePick_ltr.min.css")" rel="stylesheet" />
<script src="@Url.Content("~/Scripts/jsDatePick.jquery.min.1.3.js")"></script>
<script src="@Url.Content("~/Scripts/jsDatePick.min.1.3.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.searchabledropdown-1.0.8.src.js")"></script>

<link href="~/Content/customAlerts.css" rel="stylesheet" />
<script src="~/Scripts/bootbox.js"></script>

<script type="text/javascript">
    function infoBox(message) {
        var sample = document.getElementById("audio");
        sample.src = '../../Audio/tone1.ogg';

        sample.load();
        sample.muted = false;
        sample.play();

        bootbox.classes('infoClass');
        bootbox.alert('<i class="fa fa-2x fa-info-circle"></i><br>' + message + '<hr>');
    }

    function alertbox(message) {
        var sample = document.getElementById("audio");
        sample.src = '../../Audio/tone1.ogg';

        sample.load();
        sample.muted = false;
        sample.play();

        bootbox.classes('alertClass');
        bootbox.alert('<i class="fa fa-2x fa-warning"></i><br>' + message + '<hr>');
        //window.alert = function (al, $) {
        //    return function (msg) {
        //        al(msg);
        //        $(window).trigger("okbuttonclicked");
        //    };
        //}(window.alert, window.jQuery);

        //$(window).on("okbuttonclicked", function () {
        //    console.log("you clicked ok");
        //});

        //bootbox.alert('<i class="fa fa-2x fa-warning"></i><br>' + message + '<hr>');
    }

    function confirmbox(message, row) {
        var sample = document.getElementById("audio");
        sample.src = '../../Audio/tone2.ogg';
        sample.load();
        sample.muted = false;
        sample.play();

        bootbox.classes('confirmClass');
        bootbox.confirm('<i class="fa fa-2x fa-question-circle"></i><br>' + message + '<hr>',
		 function (result) {
		     if (result) {
		         $("#" + row).remove();
		         var rowid = document.getElementById("hdnRowCount").value;
		         CalculateItemWiseAmount(rowid, '');
		         var rowid = document.getElementById("hdnRowCount").value;
		         var totalamount = 0;
		         for (var i = 1; i <= rowid; i++) {
		             var amount = "amount" + i;
		             if (document.getElementById(amount) != null) {
		                 totalamount = (+totalamount) + (+removeCommas(document.getElementById(amount).innerHTML));
		             }
		         }
		         document.getElementById("Grand_Total").innerHTML = "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
		         document.getElementById("In_Words").innerHTML = NumberToWords();
		     }
		 });
    }
</script>

<script type="text/javascript">
    jQuery(document).ready(function () {

        // Init Theme Core 	  
        Core.init();

        $("input").not($(":button")).keypress(function (evt) {
            if (evt.keyCode == 13) {
                iname = $(this).val();
                alert(iname);
                if (iname !== 'Submit') {
                    var fields = $(this).parents('form:eq(0),body').find('button,input,textarea,select');
                    var index = fields.index(this);
                    if (index > -1 && (index + 1) < fields.length) {
                        fields.eq(index + 1).focus();
                    }
                    return false;
                }
            }
        });
    });
</script>

<script type="text/javascript">
    window.onload = function () {
        var data = new JsDatePick({
            useMode: 2,
            target: "PurchaseOrderData_DelDate",
            dateFormat: "%d/%M/%Y",
        });
        data.addOnSelectedDelegate(function () {
            var selecteddate = document.getElementById("PurchaseOrderData_DelDate").value;
            var todaysdate = new Date();

            var dat = new Date(todaysdate);
            var month = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
            var data = dat.getDate() + "/" + month[dat.getMonth()] + "/" + dat.getFullYear();
            todaysdate = data;

            todaysdate = new Date(todaysdate).getTime();
            selecteddate = new Date(selecteddate).getTime();

            if (selecteddate < todaysdate) {
                alertbox("You Cannot Select Previous Dates");
                document.getElementById("PurchaseOrderData_DelDate").value = data;
                return false;
            }
        });
    };
</script>

<script type="text/javascript">
    $(function () {
        $("#PurchaseOrderData_SupplierName").focus();

        $("#PurchaseOrderData_SupplierName").autocomplete({
            source: "/Supplier/GetSupplierNames",
            minLength: 1,
            select: function (event, ui) {
                if (ui.item) {

                    $("#PurchaseOrderData_SupplierName").blur();
                    $("#PurchaseOrderData_SupplierName").val(ui.item.value);
                    var idmodel = document.getElementById("PurchaseOrderData_SupplierName").value;

                    document.getElementById("SupplierDetails").style.display = "none";
                    document.getElementById("Godown_Details").style.display = "none";
                    document.getElementById("Shop_Details").style.display = "none";
                    $("#ddltypeofmode").val("Select Mode").attr("selected", "selected");
                    var select = $("#ddltransportnames");
                    select.empty();
                    select.append($('<option/>', {
                        text: "Select Name",
                        value: "",
                    }));
                    var select = $("#ddlgodownnames");
                    select.empty();
                    select.append($('<option/>', {
                        text: "Godown Name",
                        value: "",
                    }));
                    var select = $("#ddlshopnames");
                    select.empty();
                    select.append($('<option/>', {
                        text: "Shop Name",
                        value: "",
                    }));
                    document.getElementById("TransportDetails").style.display = "none";

                    $.getJSON("/PurchaseOrder/GetSupplierDetails", { name: idmodel },
                    function (data) {
                        document.getElementById("SupplierDetails").style.display = "inline";
                        document.getElementById("SupplierState").innerHTML = data.State;
                        if (data.Registered == "Yes") {
                            $("#Registered").prop("checked", true);
                            document.getElementById("PurchaseOrderData_ClientType").value = "Registered";
                        }
                        else {
                            $("#NonRegistered").prop("checked", true);
                            document.getElementById("PurchaseOrderData_ClientType").value = "NonRegistered";
                        }
                        if (data.State == "Maharashtra") {
                            document.getElementById("formtypeid").style.display = "none";
                            $("#YesRadioButton").attr("disabled", true);
                            $("#NoRadioButton").attr("disabled", true);
                            $("#NoRadioButton").prop("checked", true);
                        }
                        else {
                            if (data.Registered == "Yes") {
                                $("#YesRadioButton").attr("disabled", false);
                                $("#NoRadioButton").attr("disabled", false);
                                $("#NoRadioButton").prop("checked", true);
                                document.getElementById("formtypeid").style.display = "none";
                                $("#ddlformtypes").val("").attr("selected", true);
                            }
                            else {
                                $("#YesRadioButton").attr("disabled", true);
                                $("#NoRadioButton").attr("disabled", true);
                                $("#NoRadioButton").prop("checked", true);
                                document.getElementById("formtypeid").style.display = "none";
                                $("#ddlformtypes").val("").attr("selected", true);
                            }
                        }

                        if (document.getElementById("itemCode1") != null) {
                            document.getElementById("itemCode1").disabled = false;
                            document.getElementById("description1").disabled = false;
                            document.getElementById("design1").disabled = false;
                            document.getElementById("discountrps1").disabled = false;
                            document.getElementById("discountpercent1").disabled = false;
                            document.getElementById("quantity1").disabled = false;
                            document.getElementById("unit1").disabled = false;
                        }

                        $("#PurchaseOrderData_SupplierAddress").val(data.Address);
                        $("#PurchaseOrderData_SupplierContactNo").val(data.ContactNo1);
                        $("#PurchaseOrderData_SupplierEmail").val(data.Email);
                        $("#PurchaseOrderData_SupplierState").val(data.State);

                        document.getElementById("TransportDetails").style.display = "inline";

                        var select = $("#ddlgodownnames");
                        select.empty();
                        select.append($('<option/>', {
                            text: "Godown Name",
                            value: "",
                        }));
                        $.each(data.godownNames, function (index, itemdata) {
                            select.append($('<option/>', {
                                text: itemdata.Text,
                                value: itemdata.Value,
                            }));
                        });

                        var select = $("#ddlshopnames");
                        select.empty();
                        select.append($('<option/>', {
                            text: "Shop Name",
                            value: "",
                        }));
                        $.each(data.shopnames, function (index, itemdata) {
                            select.append($('<option/>', {
                                text: itemdata.Text,
                                value: itemdata.Value,
                            }));
                        });

                        if (document.getElementById("LoginShopGodownCode") != null) {
                            var logincode = document.getElementById("LoginShopGodownCode").value;
                            var shopcode = logincode.search("SH");
                            var godowncode = logincode.search("GD");
                            if (shopcode == 0) {
                                $("#ddlshopnames").val(logincode).attr("selected", true);
                                $("#ddlshopnames").trigger("change");
                                $("#ddlshopnames").attr("disabled", true);
                            }
                            else if (godowncode == 0) {
                                $("#ddlgodownnames").val(logincode).attr("selected", true);
                                $("#ddlgodownnames").trigger("change");
                                $("#ddlgodownnames").attr("disabled", true);
                                $("#ddlgodownnames").attr("disabled", true);
                            }
                        }

                        //document.getElementById("ddlSubcat").disabled = false;
                    });
                }
            },
            change: function (event, wi) {
                if ($("#PurchaseOrderData_SupplierName").val() != "")
                    window.open("/PurchaseOrder/CreateSupplier", "_target", "width=1070,height=842,top=200px,left=100px");
                else
                    return false;
            }
        });

        $("#ddlgodownnames").change(function () {
            var data = $(this).val();

            $("#PurchaseOrderData_ShopContactPerson").val("");
            $("#PurchaseOrderData_ShopContactNo").val("");
            $("#PurchaseOrderData_ShopName").val("");
            $("#PurchaseOrderData_ShopEmail").val("");

            if (data != "") {
                $.getJSON("/PurchaseOrder/GetGodownAddresses", { code: data },
                function (data) {
                    document.getElementById("ddlshopnames").disabled = true;
                    document.getElementById("Godown_Addresses").style.display = "inline";
                    document.getElementById("PurchaseOrderData_GodownName").value = data.godownname;
                    var select = $("#ddlgodownaddresses");
                    select.empty();
                    select.append($('<option/>', {
                        text: "Addresses",
                        value: "",
                    }));
                    $.each(data.addresslist, function (index, itemdata) {
                        select.append($('<option/>', {
                            text: itemdata.Text,
                            value: itemdata.Value,
                        }));
                    });
                    if (document.getElementById("LoginShopGodownCode").value == "PurchaseManager") {
                        document.getElementById("pono").innerHTML = data.POCode;
                    }
                });
            }
            else {
                document.getElementById("Godown_Addresses").style.display = "none";
                $("#PurchaseOrderData_GodownContactPerson").val("");
                $("#PurchaseOrderData_GodownContactNo").val("");
                $("#PurchaseOrderData_GodownEmail").val("");
                $("#PurchaseOrderData_GodownName").val("");
                if (document.getElementById("LoginShopGodownCode") == null) {
                    document.getElementById("ddlshopnames").disabled = false;
                }
                else if (document.getElementById("LoginShopGodownCode").value == "PurchaseManager") {
                    document.getElementById("ddlshopnames").disabled = false;
                }
            }
        });


        $("#ddlgodownaddresses").change(function () {
            $("#PurchaseOrderData_ShopContactPerson").val("");
            $("#PurchaseOrderData_ShopContactNo").val("");
            $("#PurchaseOrderData_ShopName").val("");
            $("#PurchaseOrderData_ShopEmail").val("");

            var data = $(this).val();
            if (data != "") {
                $.getJSON("/PurchaseOrder/GetGodownDetails", { code: $("#ddlgodownnames").val(), area: data },
                    function (data) {
                        $("#PurchaseOrderData_DelAt").val(data.Address);
                        $("#PurchaseOrderData_GodownContactPerson").val(data.EmpName);
                        $("#PurchaseOrderData_GodownContactNo").val(data.ContactNo1);
                        $("#PurchaseOrderData_GodownEmail").val(data.GodownEmail);
                    });
            }
            else {
                $("#PurchaseOrderData_GodownContactPerson").val("");
                $("#PurchaseOrderData_GodownContactNo").val("");
                $("#PurchaseOrderData_GodownEmail").val("");
                $("#PurchaseOrderData_GodownName").val("");
            }
        });

        $("#ddlshopnames").change(function () {
            var name = $(this).val();

            $("#PurchaseOrderData_GodownContactPerson").val("");
            $("#PurchaseOrderData_GodownContactNo").val("");
            $("#PurchaseOrderData_GodownEmail").val("");
            $("#PurchaseOrderData_GodownName").val("");

            if (name != "") {
                $.getJSON("/PurchaseOrder/GetShopDetailsByName", { Code: name }, function (data) {
                    document.getElementById("ddlgodownnames").disabled = true;
                    $("#PurchaseOrderData_ShopContactPerson").val(data.EmpName);
                    $("#PurchaseOrderData_ShopContactNo").val(data.ShopContactNo);
                    $("#PurchaseOrderData_ShopEmail").val(data.ShopEmail);
                    $("#PurchaseOrderData_ShopName").val(data.ShopName);
                    $("#PurchaseOrderData_DelAt").val(data.ShopAddress);
                    if (document.getElementById("LoginShopGodownCode").value == "PurchaseManager") {
                        document.getElementById("pono").innerHTML = data.POCode;
                    }
                });
            }
            else {
                if (document.getElementById("LoginShopGodownCode") == null) {
                    document.getElementById("ddlgodownnames").disabled = false;
                }
                else if (document.getElementById("LoginShopGodownCode").value == "PurchaseManager") {
                    document.getElementById("ddlgodownnames").disabled = false;
                }
                $("#PurchaseOrderData_ShopContactPerson").val("");
                $("#PurchaseOrderData_ShopContactNo").val("");
                $("#PurchaseOrderData_ShopName").val("");
                $("#PurchaseOrderData_ShopEmail").val("");
            }
        });

        $("#ddltypeofmode").change(function () {
            var mode = document.getElementById("ddltypeofmode").value;
            if (mode != "") {
                $.getJSON("/Inward/GetTransportNames", { mode: mode },
                function (data) {
                    var select = $("#ddltransportnames");
                    select.empty();
                    select.append($('<option/>', {
                        text: "Select Name",
                        value: "",
                    }));
                    $.each(data, function (index, itemdata) {
                        select.append($('<option/>', {
                            text: itemdata.Text,
                            value: itemdata.Value,
                        }));
                    });
                });
            }
            else {
                var select = $("#ddltransportnames");
                select.empty();
                select.append($('<option/>', {
                    text: "Select Name",
                    value: "",
                }));
            }
        });

        $("#ddltransportnames").change(function () {
            var name = document.getElementById("ddltransportnames").value;
            if (name != "") {
                document.getElementById("Godown_Details").style.display = "inline";
                document.getElementById("Shop_Details").style.display = "inline";
                $.getJSON("/Inward/GetTransportDetails", { name: name },
                    function (data) {
                        document.getElementById("PurchaseOrderData_TransportContactNo").value = data.no;
                    });
            }
        });
    });
</script>

<script type="text/javascript">
    function RefreshItemDropDown(id, type, itemcode) {
        if (type == "Inventory") {
            $.getJSON("/PurchaseOrder/GetInventoryItems",
                function (data) {
                    var select = $("#itemCode" + id);
                    select.empty();
                    select.append($('<option/>', {
                        value: "",
                        text: "Select"
                    }));
                    $.each(data, function (index, itemData) {
                        select.append($('<option/>', {
                            value: itemData.Value,
                            text: itemData.Text + " " + itemData.Value
                        }));
                    });
                    if (itemcode != "") {
                        $("#itemCode" + id).val(itemcode).attr("selected", "selected");
                    }
                });
        }
        else {
            $.getJSON("/PurchaseOrder/GetNonInventoryItems",
                function (data) {
                    var select = $("#itemCode" + id);
                    select.empty();
                    select.append($('<option>', {
                        text: "Select Item",
                        value: "",
                    }));
                    $.each(data, function (index, itemdata) {
                        select.append($('<option>', {
                            text: itemdata.Text + " " + itemdata.Value,
                            value: itemdata.Value,
                        }));
                    });
                    if (itemcode != "") {
                        $("#itemCode" + id).val(itemcode).attr("selected", "selected");
                    }
                });
        }
    }
</script>

<script type="text/javascript">
    $(document).ready(function () {
        $.getJSON("/PurchaseOrder/GetInventoryItems",
       function (data) {
           var select = $("#itemCode1");
           select.empty();
           select.append($('<option/>', {
               value: "",
               text: "Select"
           }));
           $.each(data, function (index, itemData) {
               select.append($('<option/>', {
                   value: itemData.Value,
                   text: itemData.Text + " " + itemData.Value
               }));
           });
       });
        //$("#itemCode1").searchable();
        $("#itemCode1").change(function () {
            var name = document.getElementById("itemCode1").value;
            if (name != "") {
                $("#ddlformtypes").attr("disabled", true);
                $("#YesRadioButton").attr("disabled", true);
                $("#NoRadioButton").attr("disabled", true);
                $("#Registered").attr("disabled", true);
                $("#NonRegistered").attr("disabled", true);
                document.getElementById("PurchaseOrderData_SupplierName").disabled = true;
                //document.getElementById("SubCat1").value = document.getElementById("ddlSubcat").value;
                var formtype = document.getElementById("ddlformtypes").value;
                if (document.getElementById("formtypeid").style.display == "none") {
                    formtype = "";
                }
                else {
                    if (document.getElementById("ddlformtypes").value == "") {
                        formtype = "";
                    }
                    else {
                        formtype = $("#ddlformtypes").val();
                    }
                }
                $.getJSON("/PurchaseOrder/GetItemDetails", { itemname: name, FormType: formtype, State: $("#PurchaseOrderData_SupplierState").val() },
                    function (data) {
                        document.getElementById("quantity1").value = "";
                        document.getElementById("amount1").innerHTML = 0.00;
                        document.getElementById("amountvalue1").innerHTML = 0.00;
                        $("#SubCat1").val(data.subcat);
                        $("#itemName1").val(data.itemName);
                        $("#description1").val(data.description);
                        $("#sellingprice1").val(data.sellingprice);
                        $("#mrp1").val(data.mrp);
                        $("#costprice1").val(data.costprice);
                        $("#color1").text(data.colorname);
                        $("#designName1").val(data.designName);
                        $("#materialvalue1").val(data.typematerial);
                        $("#colorvalue1").val(data.colorname);
                        $("#brandvalue1").val(data.brandName);
                        $("#sizevalue1").val(data.size);
                        $("#numberType1").val(data.NumberType);
                        $("#unit1").text(data.unit);
                        $("#unitvalue1").val(data.unit);
                        $("#ItemTax1").text(data.taxPercent);
                        $("#ItemTaxValue1").val(data.taxPercent);

                        var select = $("#design1");
                        select.empty();
                        select.append($('<option/>', {
                            text: "Select",
                            value: "",
                        }));
                        $.each(data.select, function (index, itemdata) {
                            select.append($('<option/>', {
                                text: itemdata.Text,
                                value: itemdata.Value,
                            }));
                        });
                        $("#design1").val(data.designCode).attr("selected", "selected");

                        if (data.taxPercent != '0') {
                            $("#ItemTaxNumber1").val(data.taxPercent);
                            document.getElementById("AddTaxes").style.display = "inline";
                            $("#AddedTax1").text(data.taxPercent + "%");
                        }
                        var CostPrice = +$("#costprice1").val();
                        var Tax = +$("#ItemTaxValue1").val();
                        var MRP = +$("#mrp1").val();
                        taxoncostprice = (CostPrice * Tax) / 100;
                        var taxpercentoncostprice = CostPrice / (CostPrice + taxoncostprice) * Tax;
                        var Sellingprice = MRP - (MRP * +taxpercentoncostprice / 100);
                        $("#sellingprice1").val(Sellingprice.toFixed(2));
                        window.open("/PurchaseOrder/PopUpPage?code=" + data.designCode, "_blank", "width=1000,height=150,top=280px,left=200px");

                        $("#design1").change(function () {
                            if ($("#design1").val() != "") {
                                $.getJSON("/PurchaseOrder/GetDesignNameByCode", { code: $("#design1").val() },
                        function (data) {
                            $("#designName1").val(data);
                        });
                                window.open("/PurchaseOrder/PopUpPage?code=" + $("#design1").val(), "_blank", "width=1000,height=150,top=280px,left=200px");
                            }
                        });

                    });
            }
            else {
                alertbox("Please Select Item First");
                $("#itemCode1").val("").attr("selected", true);
                document.getElementById("quantity1").value = 0;
                document.getElementById("amount1").innerHTML = 0.00;
                $("#description1").val("");
                $("#costprice1").val(0.00);
                $("#color1").text("---");
                $("#unit1").text("---");
                $("#ItemTax1").text("0");
                var designselect = $("#design1");
                designselect.empty();
                designselect.append($('<option/>', {
                    value: "",
                    text: "Select"
                }));
                CalculateItemWiseAmount(1, '');
            }
        });
    });
</script>

<script type="text/javascript">
    $(document).keypress(function (e) {
        if (e.which == 13) {
            if ($("#PurchaseOrderData_SupplierName").val() != "") {
                var rowid = document.getElementById("hdnRowCount").value;
                var previtemCode = "itemCode" + rowid;
                var prevdescription = "description" + rowid;
                var prevquantity = "quantity" + rowid;
                var prevdesign = "design" + rowid;
                var prevcostprice = "costprice" + rowid;
                var prevdiscountpercent = "discountpercent" + rowid;
                var prevdiscountrps = "discountrps" + rowid;
                if (document.getElementById(previtemCode) != null) {
                    //If Required Fields are Empty of Previous Row
                    if ($("#" + previtemCode).val() == "") {
                        alertbox("Please Select Item");
                    }
                    else if ((+$("#" + prevquantity).val()) == 0 || $("#" + prevquantity).val() == "") {
                        alertbox("Please Fill The Quantity");
                    }
                    else if ($("#" + prevdesign).val() == "") {
                        alertbox("Please Select Design");
                    }
                    else if ($("#" + prevcostprice).val() == "" || (+$("#" + prevcostprice).val()) == 0) {
                        alertbox("Please Fill The Rate");
                    }
                    else {
                        if (document.getElementById(previtemCode) != null) {
                            document.getElementById(previtemCode).disabled = true;
                            document.getElementById(prevdescription).disabled = true;
                            document.getElementById(prevquantity).disabled = true;
                            document.getElementById(prevdesign).disabled = true;
                            document.getElementById(prevdiscountpercent).disabled = true;
                            document.getElementById(prevdiscountrps).disabled = true;
                        }
                        GenerateDynamicRow(rowid);
                    }
                }
                else {
                    if (document.getElementById(previtemCode) != null) {
                        document.getElementById(previtemCode).disabled = true;
                        document.getElementById(prevdescription).disabled = true;
                        document.getElementById(prevquantity).disabled = true;
                        document.getElementById(prevdesign).disabled = true;
                        document.getElementById(prevdiscountpercent).disabled = true;
                        document.getElementById(prevdiscountrps).disabled = true;
                    }
                    GenerateDynamicRow(rowid);
                }
            }
            else {
                alertbox("Please Select The Supplier Name");
            }
        }
    });
</script>

<script type="text/javascript">
    function GenerateDynamicRow(rowid) {
        rowid = +rowid + 1;
        var subcat = "SubCat" + rowid;
        var row = "row" + rowid;
        var itemCode = "itemCode" + rowid;
        var itemName = "itemName" + rowid;
        var ItemType = "ItemType" + rowid;
        var description = "description" + rowid;
        var materialvalue = "materialvalue" + rowid;
        var designlist = "designlist" + rowid;
        var color = "color" + rowid;
        var colorvalue = "colorvalue" + rowid;
        var brandvalue = "brandvalue" + rowid;
        var sizevalue = "sizevalue" + rowid;
        var quantity = "quantity" + rowid;
        var sellingprice = "sellingprice" + rowid;
        var mrp = "mrp" + rowid;
        var costprice = "costprice" + rowid;
        var discountrps = "discountrps" + rowid;
        var discountpercent = "discountpercent" + rowid;
        var amount = "amount" + rowid;
        var amountvalue = "amountvalue" + rowid;
        var itemtax = "ItemTax" + rowid;
        var itemtaxvalue = "ItemTaxValue" + rowid;
        var unit = "unit" + rowid;
        var numbertype = "numberType" + rowid;
        var unitvalue = "unitvalue" + rowid;
        var design = document.createElement("SELECT");
        var designName = "designName" + rowid;
        var proportionatetax = "proportionatetax" + rowid;
        var proportionatetaxvalue = "proportionatetaxvalue" + rowid;
        var proportionateamount = "proportionatetaxamount" + rowid;

        design.className = "form-control col-md-1 col-lg-1";
        design.id = "design" + rowid;
        design.name = "design" + rowid;
        var option1 = document.createElement("option");
        option1.text = "Select";
        option1.value = "";
        design.appendChild(option1);

        var unorderedList = $("#AddingRows");
        var data = "<tr id='" + row + "'><input type='hidden' id='" + subcat + "' name='" + subcat + "' />";
        data += "<td><select id='" + itemCode + "' name='" + itemCode + "' class='form-control col-md-2 col-lg-2'><option value=''>Select</option></select><input type='hidden' id='" + itemName + "' name='" + itemName + "' /></td>";
        data += "<td><textarea id='" + description + "' name='" + description + "' class='form-control col-md-3 col-lg-3' placeholder='Description' /></td>";
        data += "<td><label id='" + color + "' class='CenterText' style='font-weight: normal'>---</label><input type='hidden' id='" + materialvalue + "' name='" + materialvalue + "' /><input type='hidden' id='" + colorvalue + "' name='" + colorvalue + "' /><input type='hidden' id='" + brandvalue + "' name='" + brandvalue + "' /><input type='hidden' id='" + sizevalue + "' name='" + sizevalue + "' /></td>";
        data += "<td><div id='" + designlist + "' name='" + designlist + "'></div><input type='hidden' id='" + designName + "' name='" + designName + "' /></td>";
        data += "<td><input type='text' id='" + quantity + "' name='" + quantity + "' autocomplete='off' class='form-control col-md-1 col-lg-1' placeholder='Qty' style='text-align:center;width:100%' onchange='CalculateItemWiseAmount(" + rowid + ',' + '\"\"' + ")' onkeypress='return AllowDecimal(event," + rowid + ")' /></td>";
        data += "<td><label id='" + unit + "' class='CenterText' style='font-weight:normal'>---</label><input type='hidden' name='" + unitvalue + "' id='" + unitvalue + "'><input type='hidden' name='" + numbertype + "' id='" + numbertype + "'></td>";
        data += "<td><input type='text' id='" + costprice + "' name='" + costprice + "' autocomplete='off' class='form-control col-md-2 col-lg-2' placeholder='Rate' disabled='disabled' style='text-align:center;width:100%' onchange='CalculateItemWiseAmount(" + rowid + ',' + '\"\"' + ")' onkeypress='return AllowNumbers(event)' /><input type='hidden' id='" + mrp + "' name='" + mrp + "'/><input type='hidden' id='" + sellingprice + "' name='" + sellingprice + "'/></td>";
        data += "<td><input type='text' id='" + discountpercent + "' name='" + discountpercent + "' autocomplete='off' class='form-control col-md-1 col-lg-1' value='0' placeholder='0%' style='font-weight:normal; text-align:center;width:100%' onchange='CalculateItemWiseAmount(" + rowid + ',' + '\"percent\"' + ")' onkeypress='return AllowNumbers(event)' /></td>";
        data += "<td><input type='text' id='" + discountrps + "' name='" + discountrps + "'  autocomplete='off' class='form-control col-md-1 col-lg-1' value='0.00' placeholder='0' style='font-weight:normal; text-align:center;width:100%' onchange='CalculateItemWiseAmount(" + rowid + ',' + '\"rps\"' + ")' onkeypress='return AllowNumbers(event)' /></td>";
        data += "<td style='text-align:center'><label id='" + itemtax + "'>0</label><input type='hidden' id='" + itemtaxvalue + "' name='" + itemtaxvalue + "' value='0' /></td>";
        data += "<td style='text-align:right'><label id='" + amount + "'>0</label><input type='hidden' id='" + amountvalue + "' name='" + amountvalue + "' value='0'/></td>";
        data += "<td style='text-align:right'><label id='" + proportionatetax + "'>0</label><input type='hidden' id='" + proportionatetaxvalue + "' name='" + proportionatetaxvalue + "' value='0' /><input type='hidden' id='" + proportionateamount + "' name='" + proportionateamount + "' value='0' /></td>";
        data += "<td><div style='height:2px'></div><a href='#' onclick='DeleteRow(" + rowid + ")' class='fa fa-trash fa-lg' style='color:red;' /><input type='hidden' id='" + ItemType + "' name='" + ItemType + "' value='Inventory' /></td></tr>";
        unorderedList.append(data);
        var dropdown = document.getElementById(designlist);
        dropdown.appendChild(design);
        $("#" + itemCode).focus();
        $.getJSON("/PurchaseOrder/GetInventoryItems",
        function (data) {
            var select = $("#" + itemCode);
            select.empty();
            select.append($('<option/>', {
                value: "",
                text: "Select"
            }));
            $.each(data, function (index, itemData) {
                select.append($('<option/>', {
                    value: itemData.Value,
                    text: itemData.Text + " " + itemData.Value
                }));
            });
        });
        //$("#" + itemCode).searchable();

        $("#" + itemCode).change(function () {
            var name = document.getElementById(itemCode).value;
            if (name != "") {
                $("#ddlformtypes").attr("disabled", true);
                $("#YesRadioButton").attr("disabled", true);
                $("#NoRadioButton").attr("disabled", true);
                $("#Registered").attr("disabled", true);
                $("#NonRegistered").attr("disabled", true);
                document.getElementById("PurchaseOrderData_SupplierName").disabled = true;
                var formtype = document.getElementById("ddlformtypes").value;
                if (document.getElementById("formtypeid").style.display == "none") {
                    formtype = "";
                }
                else {
                    if (document.getElementById("ddlformtypes").value == "") {
                        formtype = "";
                    }
                    else {
                        formtype = $("#ddlformtypes").val();
                    }

                }
                var currentrowid = 0;
                for (var i = rowid - 1; i >= 1; i--) {
                    var previousitemname = "itemCode" + i;
                    if (name == $("#" + previousitemname).val()) {
                        currentrowid = i;
                        break;
                    }
                }
                if (currentrowid == 0) {
                    var validationcount = 0;
                    for (var i = 1; i < rowid; i++) {
                        var prevquantity = "quantity" + i;
                        var prevcostprice = "costprice" + i;
                        var prevdesign = "design" + i;
                        if (document.getElementById(prevquantity) != null) {
                            if ((+$("#" + prevquantity).val()) == 0 || $("#" + prevquantity).val() == "") {
                                alertbox("Please Fill The Quantity");
                                validationcount++;
                            }
                            //else if ($("#" + prevdesign).val() == "") {
                            //    alertbox("Please Select The Design");
                            //    validationcount++;
                            //}
                            else if ($("#" + prevcostprice).val() == "" || (+$("#" + prevcostprice).val()) == 0) {
                                alertbox("Please Fill The Rate");
                                validationcount++;
                            }
                            else {
                                if (document.getElementById(prevquantity).disabled == false) {
                                    document.getElementById(prevquantity).disabled = true;
                                    document.getElementById("description" + i).disabled = true;
                                    document.getElementById(prevdesign).disabled = true;
                                    document.getElementById("discountpercent" + i).disabled = true;
                                    document.getElementById("discountrps" + i).disabled = true;
                                }
                            }
                        }
                    }
                    if (validationcount == 0) {
                        $.getJSON("/PurchaseOrder/GetItemDetails", { itemname: name, FormType: formtype, State: $("#PurchaseOrderData_SupplierState").val() },
                     function (data) {
                         document.getElementById("quantity" + rowid).value = "";
                         document.getElementById("amount" + rowid).innerHTML = 0.00;
                         document.getElementById("amountvalue" + rowid).innerHTML = 0.00;
                         $("#" + itemName).val(data.itemName);
                         $("#" + subcat).val(data.subcat);
                         $("#" + description).val(data.description);
                         $("#" + sellingprice).val(data.sellingprice);
                         $("#" + mrp).val(data.mrp);
                         $("#" + costprice).val(data.costprice);
                         $("#" + color).text(data.colorname);
                         $("#" + materialvalue).val(data.typematerial);
                         $("#" + colorvalue).val(data.colorname);
                         $("#" + brandvalue).val(data.brandName);
                         $("#" + sizevalue).val(data.size);
                         $("#" + unit).text(data.unit);
                         $("#" + unitvalue).val(data.unit);
                         $("#" + numbertype).val(data.NumberType);
                         $("#" + designName).val(data.designName);
                         $("#" + itemtax).text(data.taxPercent);
                         $("#" + itemtaxvalue).val(data.taxPercent);
                         design.options.length = 0;
                         design.className = "form-control col-md-1 col-lg-1";
                         design.id = "design" + rowid;
                         design.name = "design" + rowid;
                         design.onchange = EventTrigger(data.designCode);
                         var option1 = document.createElement("option");
                         option1.text = "Select";
                         option1.value = "";
                         design.appendChild(option1);
                         $.each(data.select, function (index, itemData) {
                             var option1 = document.createElement("option");
                             option1.value = itemData.Value;
                             option1.text = itemData.Text;
                             design.appendChild(option1);

                         });
                         $("#" + design.id).val(data.designCode).attr("selected", "selected");

                         var tax = data.taxPercent;
                         if (tax != '0') {
                             var taxcount = document.getElementById("ItemTaxCount").value;
                             if ($("#ItemTaxNumber" + taxcount).val() == 0) { //if first row's tax is 0 then add the tax in taxnumber1
                                 $("#ItemTaxNumber" + taxcount).val(tax);
                                 document.getElementById("AddTaxes").style.display = "inline";
                                 $("#AddedTax1").text(tax + "%");
                             }
                             else {
                                 var taxpresent = 0;
                                 for (var i = 1; i <= taxcount; i++) {
                                     var taxno = "ItemTaxNumber" + i;
                                     if (tax == $("#" + taxno).val()) {
                                         taxpresent++;
                                     }
                                 }
                                 if (taxpresent == 0) {
                                     taxcount++;
                                     var taxno = "ItemTaxNumber" + taxcount;
                                     var data = "<input type='hidden' id='" + taxno + "' name='" + taxno + "' value='" + tax + "' />";
                                     $("#AllTaxesNumbersValue").append(data);
                                     var addedtaxno = "AddedTax" + taxcount;
                                     var addedtaxamount = "AddedTaxAmount" + taxcount;
                                     var addedtaxamounthdn = "AddedTaxAmounthdn" + taxcount;
                                     var addedamount = "AddedAmount" + taxcount;
                                     var addedamounthdn = "AddedAmounthdn" + taxcount;
                                     var newlabel = "<div class='row'><div class='col-md-3 col-lg-3'><label id='" + addedamount + "'>0</label><input type='hidden' id='" + addedamounthdn + "' name='" + addedamounthdn + "' value='0' /></div>";
                                     newlabel += "<div class='col-md-2 col-lg-2'><label id='" + addedtaxno + "'>" + tax + "%" + "</label></div>";
                                     newlabel += "<div class='col-md-7 col-lg-7'><label id='" + addedtaxamount + "'>0</label><input type='hidden' id='" + addedtaxamounthdn + "' name='" + addedtaxamounthdn + "' value='0' /></div></div>";
                                     $("#AddTaxes").append(newlabel);
                                     $("#ItemTaxCount").val(taxcount);
                                 }
                             }
                         }
                         var CostPrice = +$("#" + costprice).val();
                         var Tax = +$("#" + itemtaxvalue).val();
                         var MRP = +$("#" + mrp).val();
                         taxoncostprice = (CostPrice * Tax) / 100;
                         var taxpercentoncostprice = CostPrice / (CostPrice + taxoncostprice) * Tax;
                         var Sellingprice = MRP - (MRP * +taxpercentoncostprice / 100);
                         $("#sellingprice" + rowid).val(Sellingprice.toFixed(2));
                     });

                        function EventTrigger(designCode) {
                            window.open("/PurchaseOrder/PopUpPage?code=" + designCode, "_target", "width=1000,height=150,top=280px,left=200px");
                        }

                        $("#" + design.id).change(function () {
                            if ($("#" + design.id).val() != "") {
                                $.getJSON("/PurchaseOrder/GetDesignNameByCode", { code: $("#" + design.id).val() },
                                function (data) {
                                    $("#" + designName).val(data);
                                });
                                window.open("/PurchaseOrder/PopUpPage?code=" + $("#" + design.id).val(), "_target", "width=1000,height=150,top=280px,left=200px");
                            }
                        });
                    }
                    else {
                        $("#itemCode" + rowid).val("").attr("selected", true);
                    }
                }
                else {
                    alertbox("Item Name Already Selected Please change the quantity");
                    document.getElementById("quantity" + currentrowid).disabled = false;
                    document.getElementById("description" + currentrowid).disabled = false;
                    document.getElementById("design" + currentrowid).disabled = false;
                    document.getElementById("discountpercent" + currentrowid).disabled = false;
                    document.getElementById("discountrps" + currentrowid).disabled = false;

                    $("#itemCode" + rowid).val("").attr("selected", true);
                    document.getElementById("quantity" + rowid).value = 0
                    document.getElementById("amount" + rowid).innerHTML = 0.00;
                    document.getElementById("proportionatetax" + rowid).innerHTML = 0;
                    $("#description" + rowid).val("");
                    $("#costprice" + rowid).val(0.00);
                    $("#unit" + rowid).text("---");
                    $("#color" + rowid).text("---");
                    $("#ItemTax" + rowid).text("0");
                    var designselect = $("#design" + rowid);
                    designselect.empty();
                    designselect.append($('<option/>', {
                        value: "",
                        text: "Select"
                    }));
                    CalculateItemWiseAmount(rowid);
                }
            }

            else {
                alertbox("Please Select Item First");
                $("#itemCode" + rowid).val("").attr("selected", true);
                document.getElementById("quantity" + rowid).value = 0;
                document.getElementById("amount" + rowid).innerHTML = 0.00;
                document.getElementById("proportionatetax" + rowid).innerHTML = 0;
                $("#description" + rowid).val("");
                $("#costprice" + rowid).val(0.00);
                $("#color" + rowid).text("---");
                $("#unit" + rowid).text("---");
                $("#ItemTax" + rowid).text("0");
                var designselect = $("#design" + rowid);
                designselect.empty();
                designselect.append($('<option/>', {
                    value: "",
                    text: "Select"
                }));
                CalculateItemWiseAmount(rowid);
            }
        });
        $("#hdnRowCount").val(rowid);
    }
</script>

<script type="text/javascript">
    $(function () {
        $("#NonInvButton").click(function () {
            if ($("#PurchaseOrderData_SupplierName").val() != "") {
                var noninvrowid = document.getElementById("hdnRowCount").value;
                var validationcounter = 0;
                for (var i = 1; i <= noninvrowid; i++) {
                    var previtemCode = "itemCode" + i;
                    var prevdescription = "description" + i;
                    var prevquantity = "quantity" + i;
                    var prevdesign = "design" + i;
                    var prevcostprice = "costprice" + i;
                    var prevdiscountpercent = "discountpercent" + i;
                    var prevdiscountrps = "discountrps" + i;
                    if (document.getElementById(previtemCode) != null) {
                        if ($("#" + previtemCode).val() == "") {
                            alertbox("Please Select The Item");
                            validationcounter++;
                        }
                        else if ($("#" + prevquantity).val() == "" || (+$("#" + prevquantity).val()) == 0) {
                            alertbox("Please Fill The Quantity");
                            validationcounter++;
                        }
                        //else if ($("#" + prevdesign).val() == "") {
                        //    alertbox("Please Select The Design");
                        //    validationcounter++;
                        //}
                        else if ($("#" + prevcostprice).val() == "" || (+$("#" + prevcostprice).val()) == 0) {
                            alertbox("Please Fill The Rate");
                            validationcounter++;
                        }
                        else {
                            if (document.getElementById(previtemCode).disabled != true) {
                                document.getElementById(previtemCode).disabled = true;
                                document.getElementById(prevdescription).disabled = true;
                                document.getElementById(prevquantity).disabled = true;
                                document.getElementById(prevdesign).disabled = true;
                                document.getElementById(prevdiscountpercent).disabled = true;
                                document.getElementById(prevdiscountrps).disabled = true;
                            }
                        }
                    }
                }

                if (validationcounter == 0) {
                    noninvrowid = +noninvrowid + 1;
                    var row = "row" + noninvrowid;
                    var subcat = "SubCat" + noninvrowid;
                    var ItemType = "ItemType" + noninvrowid;
                    var noninvitem = "itemCode" + noninvrowid;
                    var nondescription = "description" + noninvrowid;
                    var noninvcolor = "color" + noninvrowid;
                    var noninvsellingprice = "sellingprice" + noninvrowid;
                    var noninvmrp = "mrp" + noninvrowid;
                    var noninvcostprice = "costprice" + noninvrowid;
                    var noninvquantity = "quantity" + noninvrowid;
                    var noninvdisper = "discountpercent" + noninvrowid;
                    var noninvdesignlist = "designlist" + noninvrowid;
                    var noninvdisrs = "discountrps" + noninvrowid;
                    var noninvunit = "unit" + noninvrowid;
                    var noninvamount = "amount" + noninvrowid;
                    var noninvitemtax = "ItemTax" + noninvrowid;
                    var noninvproportionatetax = "proportionatetax" + noninvrowid;
                    var nondesignlist = "designlist" + noninvrowid;

                    var nondesign = document.createElement("SELECT");

                    var noninvitemname = "itemName" + noninvrowid;
                    var noninvdesignname = "designName" + noninvrowid;
                    var noninvcolorvalue = "colorvalue" + noninvrowid;
                    var noninvmaterialvalue = "materialvalue" + noninvrowid;
                    var noninvbrandvalue = "brandvalue" + noninvrowid;
                    var noninvsizevalue = "sizevalue" + noninvrowid;
                    var noninvunitvalue = "unitvalue" + noninvrowid;
                    var noninvnumbertype = "numberType" + noninvrowid;
                    var noninvamountvalue = "amountvalue" + noninvrowid;
                    var noninvitemtaxvalue = "ItemTaxValue" + noninvrowid;
                    var noninvproptaxvalue = "proportionatetaxvalue" + noninvrowid;
                    var noninvproptaxamount = "proportionatetaxamount" + noninvrowid;

                    nondesign.className = "form-control col-md-1 col-lg-1";
                    nondesign.id = "design" + noninvrowid;
                    nondesign.name = "design" + noninvrowid;
                    var option1 = document.createElement("option");
                    option1.text = "Select";
                    option1.value = "";
                    nondesign.appendChild(option1);
                    var unorderlist = $("#AddingRows");

                    unorderlist.append(
                        "<tr id='" + row + "'>" +
                        "<td style='text-align:center' class='col-lg-3 col-md-3'><select id='" + noninvitem + "' name='" + noninvitem + "' class='form-control'><option>Select Item</option></select><input type='hidden' id='" + noninvitemname + "' name='" + noninvitemname + "' /><input type='hidden' id='" + subcat + "' name='" + subcat + "' /></td>" +
                        "<td><textarea class='form-control' id='" + nondescription + "' name='" + nondescription + "' placeholder='Description' ></textarea></td>" +
                        "<td style='text-align:center'><label id='" + noninvcolor + "' name='" + noninvcolor + "' style='font-weight:normal'>---</label><input type='hidden' id='" + noninvcolorvalue + "' name='" + noninvcolorvalue + "'/><input type='hidden' id='" + noninvbrandvalue + "' name='" + noninvbrandvalue + "' /><input type='hidden' id='" + noninvsizevalue + "' name='" + noninvsizevalue + "' /></td>" +
                        "<td><div id='" + nondesignlist + "' name='" + nondesignlist + "'></div><input type='hidden' id='" + noninvdesignname + "' name='" + noninvdesignname + "' /></td>" +
                        "<td style='text-align:center' class='col-lg-1 col-md-1'><input type='text' class='form-control' name='" + noninvquantity + "' id='" + noninvquantity + "' autocomplete='off' onchange='CalculateItemWiseAmount(" + noninvrowid + ',' + '\"\"' + ")' style='text-align:center' placeholder='Qty' onkeypress='return AllowDecimal(event," + noninvrowid + ")' /></td>" +
                        "<td style='text-align:center'><label id='" + noninvunit + "' name='" + noninvunit + "' style='font-weight:normal'>---</label><input type='hidden' id='" + noninvunitvalue + "' name='" + noninvunitvalue + "'/><input type='hidden' name='" + noninvnumbertype + "' id='" + noninvnumbertype + "'><input type='hidden' id='" + noninvmaterialvalue + "' name='" + noninvmaterialvalue + "'/></td>" +
                        "<td style='text-align:center' class='col-lg-1 col-md-1'><input type='text' class='form-control' id='" + noninvcostprice + "' name='" + noninvcostprice + "' onchange='CalculateItemWiseAmount(" + noninvrowid + ',' + '\"\"' + ")' style='font-weight:normal; text-align:center;' placeholder='Rate' onkeypress='return AllowNumbers(event)' /><input type='hidden' id='" + noninvmrp + "' name='" + noninvmrp + "'/><input type='hidden' id='" + noninvsellingprice + "' name='" + noninvsellingprice + "'/></td>" +
                        "<td style='text-align:center' class='col-lg-1 col-md-1'><input type='text' class='form-control' id='" + noninvdisper + "' name='" + noninvdisper + "' style='font-weight:normal; text-align:center' value='0' placeholder='0%' onchange='CalculateItemWiseAmount(" + noninvrowid + ',' + '\"percent\"' + ")' onkeypress='return AllowNumbers(event)' /></td>" +
                        "<td style='text-align:center' class='col-lg-1 col-md-1'><input type='text' class='form-control' id='" + noninvdisrs + "' name='" + noninvdisrs + "' style='font-weight:normal; text-align:center' value='0.00' placeholder='0' onchange='CalculateItemWiseAmount(" + noninvrowid + ',' + '\"rps\"' + ")' onkeypress='return AllowNumbers(event)' /></td>" +
                        "<td style='text-align:right'><label id='" + noninvitemtax + "'>0</label><input type='hidden' id='" + noninvitemtaxvalue + "' name='" + noninvitemtaxvalue + "'/></td>" +
                        "<td style='text-align:right'><label id='" + noninvamount + "'>0</label><input type='hidden' id='" + noninvamountvalue + "' name='" + noninvamountvalue + "'/></td>" +
                        "<td style='text-align:right'><label id='" + noninvproportionatetax + "'>0</label><input type='hidden' id='" + noninvproptaxvalue + "' name='" + noninvproptaxvalue + "' value='0' /><input type='hidden' id='" + noninvproptaxamount + "' name='" + noninvproptaxamount + "' value='0' /></td>" +
                        "<td><div style='height:2px'></div><a href='#' onclick='DeleteRow(" + noninvrowid + ")' class='fa fa-trash fa-lg' style='color:red;' /><input type='hidden' id='" + ItemType + "' name='" + ItemType + "' value='Non-Inventory' /></td>"
                    );
                    var dropdown = document.getElementById(nondesignlist);
                    dropdown.appendChild(nondesign);

                    //var subcatgry = $("#ddlSubcat").val();
                    $.getJSON("/PurchaseOrder/GetNonInventoryItems",
                    function (data) {
                        var select = $("#" + noninvitem);
                        select.empty();
                        select.append($('<option>', {
                            text: "Select Item",
                            value: "",
                        }));
                        $.each(data, function (index, itemdata) {
                            select.append($('<option>', {
                                text: itemdata.Text + " " + itemdata.Value,
                                value: itemdata.Value,
                            }));
                        });
                    });
                    //$("#" + noninvitem).searchable();
                    var formtype = document.getElementById("ddlformtypes").value;
                    if (document.getElementById("formtypeid").style.display == "none") {
                        formtype = "";
                    }
                    else {
                        if (document.getElementById("ddlformtypes").value == "") {
                            formtype = "";
                        }
                        else {
                            formtype = $("#ddlformtypes").val();
                        }

                    }

                    $("#" + noninvitem).change(function () {
                        var noninvitemcode = document.getElementById(noninvitem).value;
                        if (noninvitemcode != "") {
                            $("#ddlformtypes").attr("disabled", true);
                            $("#YesRadioButton").attr("disabled", true);
                            $("#NoRadioButton").attr("disabled", true);
                            $("#Registered").attr("disabled", true);
                            $("#NonRegistered").attr("disabled", true);
                            document.getElementById("PurchaseOrderData_SupplierName").disabled = true;
                            var qty = "quantity" + noninvrowid;
                            var amt = "amount" + noninvrowid;
                            if (document.getElementById(qty) != null) {
                                document.getElementById(qty).value = "";
                                document.getElementById(amt).innerHTML = "";
                            }

                            var validationcount = 0;
                            for (var i = 1; i < noninvrowid; i++) {
                                var prevquantity = "quantity" + i;
                                var prevcostprice = "costprice" + i;
                                var prevdesign = "design" + i;
                                if (document.getElementById(prevquantity) != null) {
                                    if ((+$("#" + prevquantity).val()) == 0 || $("#" + prevquantity).val() == "") {
                                        alertbox("Please Fill The Quantity");
                                        validationcount++;
                                    }
                                    else if ($("#" + prevcostprice).val() == "" || (+$("#" + prevcostprice).val()) == 0) {
                                        alertbox("Please Fill The Rate");
                                        validationcount++;
                                    }
                                    //else if ($("#" + prevdesign).val() == "") {
                                    //    alertbox("Please Select The Design");
                                    //    validationcount++;
                                    //}
                                    else {
                                        if (document.getElementById(prevquantity).disabled == false) {
                                            document.getElementById(prevquantity).disabled = true;
                                            document.getElementById("description" + i).disabled = true;
                                            document.getElementById(prevdesign).disabled = true;
                                            document.getElementById("discountpercent" + i).disabled = true;
                                            document.getElementById("discountrps" + i).disabled = true;
                                        }
                                    }
                                }
                            }
                            if (validationcount == 0) {
                                //document.getElementById(subcat).value = document.getElementById("ddlSubcat").value;
                                //$("#ddlSubcat").attr("disabled", false);
                                $.getJSON("/PurchaseOrder/GetNonIvnItemDetails", { itemcode: noninvitemcode, FormType: formtype, State: $("#PurchaseOrderData_SupplierState").val() },
                                   function (data) {
                                       $("#" + noninvitemname).val(data.itemName);
                                       $("#" + subcat).val(data.subcat);
                                       $("#" + nondescription).val(data.description);
                                       $("#" + noninvcolor).text(data.colorCode);
                                       $("#" + noninvcolorvalue).val(data.colorCode);
                                       $("#" + noninvdesignname).val(data.designName);
                                       $("#" + noninvbrandvalue).val(data.brandName);
                                       $("#" + noninvsizevalue).val(data.size);
                                       $("#" + noninvunit).text(data.unit);
                                       $("#" + noninvsellingprice).val(data.sellingprice);
                                       $("#" + noninvmrp).val(data.mrp);
                                       $("#" + noninvcostprice).val(data.costprice);
                                       $("#" + noninvmaterialvalue).val(data.typeOfMaterial);
                                       $("#" + noninvitemtax).text(data.taxPercent);
                                       $("#" + noninvitemtaxvalue).val(data.taxPercent);
                                       $("#" + noninvnumbertype).val(data.NumberType);
                                       $("#discountpercent" + noninvrowid).val("0");
                                       $("#discountrps" + noninvrowid).val("0.00");

                                       nondesign.options.length = 0;
                                       nondesign.className = "form-control col-md-1 col-lg-1";
                                       nondesign.id = "design" + noninvrowid;
                                       nondesign.name = "design" + noninvrowid;
                                       var option1 = document.createElement("option");
                                       option1.text = "Select";
                                       option1.value = "";
                                       nondesign.appendChild(option1);
                                       $.each(data.select, function (index, itemData) {
                                           var option1 = document.createElement("option");
                                           option1.value = itemData.Value;
                                           option1.text = itemData.Text;
                                           nondesign.appendChild(option1);

                                       });
                                       $("#" + nondesign.id).val(data.designCode).attr("selected", "selected");
                                       var tax = data.taxPercent;
                                       if (tax != '0') {
                                           var taxcount = document.getElementById("ItemTaxCount").value;
                                           if ($("#ItemTaxNumber" + taxcount).val() == 0) { //if first row's tax is 0 then add the tax in taxnumber1
                                               $("#ItemTaxNumber" + taxcount).val(tax);
                                               document.getElementById("AddTaxes").style.display = "inline";
                                               $("#AddedTax1").text(tax + "%");
                                           }
                                           else {
                                               var taxpresent = 0;
                                               for (var i = 1; i <= taxcount; i++) {
                                                   var taxno = "ItemTaxNumber" + i;
                                                   if (tax == $("#" + taxno).val()) {
                                                       taxpresent++;
                                                   }
                                               }
                                               if (taxpresent == 0) {
                                                   taxcount++;
                                                   var taxno = "ItemTaxNumber" + taxcount;
                                                   var data = "<input type='hidden' id='" + taxno + "' name='" + taxno + "' value='" + tax + "' />";
                                                   $("#AllTaxesNumbersValue").append(data);
                                                   var addedtaxno = "AddedTax" + taxcount;
                                                   var addedtaxamount = "AddedTaxAmount" + taxcount;
                                                   var addedtaxamounthdn = "AddedTaxAmounthdn" + taxcount;
                                                   var addedamount = "AddedAmount" + taxcount;
                                                   var addedamounthdn = "AddedAmounthdn" + taxcount;
                                                   var newlabel = "<div class='row'><div class='col-md-3 col-lg-3'><label id='" + addedamount + "'>0</label><input type='hidden' id='" + addedamounthdn + "' name='" + addedamounthdn + "' value='0' /></div>";
                                                   newlabel += "<div class='col-md-2 col-lg-2'><label id='" + addedtaxno + "'>" + tax + "%" + "</label></div>";
                                                   newlabel += "<div class='col-md-7 col-lg-7'><label id='" + addedtaxamount + "'>0</label><input type='hidden' id='" + addedtaxamounthdn + "' name='" + addedtaxamounthdn + "' value='0' /></div></div>";
                                                   $("#AddTaxes").append(newlabel);
                                                   $("#ItemTaxCount").val(taxcount);
                                               }
                                           }
                                       }
                                       var CostPrice = +$("#" + noninvcostprice).val();
                                       var Tax = +$("#" + noninvitemtaxvalue).val();
                                       var MRP = +$("#" + noninvmrp).val();
                                       taxoncostprice = (CostPrice * Tax) / 100;
                                       var taxpercentoncostprice = CostPrice / (CostPrice + taxoncostprice) * Tax;
                                       var Sellingprice = MRP - (MRP * +taxpercentoncostprice / 100);
                                       $("#sellingprice" + noninvrowid).val(Sellingprice.toFixed(2));
                                   });

                                $("#" + nondesign.id).change(function () {
                                    if ($("#" + nondesign.id).val() != "") {
                                        $.getJSON("/PurchaseOrder/GetDesignNameByCode", { code: $("#" + nondesign.id).val() },
                                function (data) {
                                    $("#" + noninvdesignname).val(data);
                                });
                                    }
                                });
                            }
                            else {
                                $("#itemCode" + noninvrowid).val("").attr("selected", true);
                            }
                        }
                        else {
                            alertbox("Please Select Item First");
                            $("#itemCode" + noninvrowid).val("").attr("selected", true);
                            document.getElementById("quantity" + noninvrowid).value = 0;
                            document.getElementById("amount" + noninvrowid).innerHTML = 0.00;
                            document.getElementById("proportionatetax" + noninvrowid).innerHTML = 0;
                            $("#description" + noninvrowid).val("");
                            $("#costprice" + noninvrowid).val(0.00);
                            $("#color" + noninvrowid).text("---");
                            $("#unit" + noninvrowid).text("---");
                            $("#ItemTax" + noninvrowid).text("0");
                            var designselect = $("#design" + noninvrowid);
                            designselect.empty();
                            designselect.append($('<option/>', {
                                value: "",
                                text: "Select"
                            }));
                            CalculateItemWiseAmount(noninvrowid);
                        }
                    });
                    $("#hdnRowCount").val(noninvrowid);
                }
            }
            else {
                alertbox("Please Select The Supplier Name");
            }
        });
    });
</script>

<script type="text/javascript">
    function addCommas(yourNumber) {
        var components = yourNumber.toString().split(".");
        if (components.length === 1)
            components[0] = yourNumber;
        components[0] = components[0].replace(/\D/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        if (components.length === 2)
            components[1] = components[1].replace(/\D/g, "");
        return components.join(".");
    }

    function removeCommas(yourNumber) {
        var components = yourNumber.toString().split(".");
        if (components.length === 1)
            components[0] = yourNumber;
        components[0] = components[0].replace(/\D/g, "").replace(/\B(?=(\d{3})+(?!\d))/g, '');
        if (components.length === 2)
            components[1] = components[1].replace(/\D/g, "");
        return components.join(".");
    }

    function DeleteRow(id) {
        var row = "row" + id;
        confirmbox("Are you sure you wish to delete this row?", row);
    }
</script>

<script type="text/javascript">
    function NumberToWords() {
        var junkVal = (+removeCommas(document.getElementById('Grand_Total').innerHTML));
        junkVal = Math.floor(junkVal);
        var obStr = new String(junkVal);
        numReversed = obStr.split("");
        actnumber = numReversed.reverse();
        if (Number(junkVal) > 0) {
        }
        else if (Number(junkVal) == 0) {
            return 'Rupees Zero Only';
        }
        else {
            alertbox('wrong Number cannot be converted');
            return false;
        }

        if (actnumber.length > 9) {
            alertbox('Oops!!!! the Number is too big to covertes');
            return false;
        }

        var iWords = ["Zero", " One", " Two", " Three", " Four", " Five", " Six", " Seven", " Eight", " Nine"];
        var ePlace = ['Ten', ' Eleven', ' Twelve', ' Thirteen', ' Fourteen', ' Fifteen', ' Sixteen', ' Seventeen', ' Eighteen', ' Nineteen'];
        var tensPlace = ['dummy', ' Ten', ' Twenty', ' Thirty', ' Forty', ' Fifty', ' Sixty', ' Seventy', ' Eighty', ' Ninety'];

        var iWordsLength = numReversed.length;
        var totalWords = "";
        var inWords = new Array();
        var finalWord = "";
        j = 0;
        for (i = 0; i < iWordsLength; i++) {
            switch (i) {
                case 0:
                    if (actnumber[i] == 0 || actnumber[i + 1] == 1) {
                        inWords[j] = '';
                    }
                    else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    inWords[j] = inWords[j] + ' Only';
                    break;
                case 1:
                    tens_complication();
                    break;
                case 2:
                    if (actnumber[i] == 0) {
                        inWords[j] = '';
                    }
                    else if (actnumber[i - 1] != 0 && actnumber[i - 2] != 0) {
                        inWords[j] = iWords[actnumber[i]] + ' Hundred and';
                    }
                    else {
                        inWords[j] = iWords[actnumber[i]] + ' Hundred';
                    }
                    break;
                case 3:
                    if (actnumber[i] == 0 || actnumber[i + 1] == 1) {
                        inWords[j] = '';
                    }
                    else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    if (actnumber[i + 1] != 0 || actnumber[i] > 0) {
                        inWords[j] = inWords[j] + " Thousand";
                    }
                    break;
                case 4:
                    tens_complication();
                    break;
                case 5:
                    if (actnumber[i] == 0 || actnumber[i + 1] == 1) {
                        inWords[j] = '';
                    }
                    else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    if (actnumber[i + 1] != 0 || actnumber[i] > 0) {
                        inWords[j] = inWords[j] + " Lakh";
                    }
                    break;
                case 6:
                    tens_complication();
                    break;
                case 7:
                    if (actnumber[i] == 0 || actnumber[i + 1] == 1) {
                        inWords[j] = '';
                    }
                    else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    inWords[j] = inWords[j] + " Crore";
                    break;
                case 8:
                    tens_complication();
                    break;
                default:
                    break;
            }
            j++;
        }

        function tens_complication() {
            if (actnumber[i] == 0) {
                inWords[j] = '';
            }
            else if (actnumber[i] == 1) {
                inWords[j] = ePlace[actnumber[i - 1]];
            }
            else {
                inWords[j] = tensPlace[actnumber[i]];
            }
        }
        inWords.reverse();
        for (i = 0; i < inWords.length; i++) {
            finalWord += inWords[i];
        }
        return finalWord;
    }
</script>

<script type="text/javascript">
    function CalculateItemWiseAmount(count, type) {
        var packandforwd = (+document.getElementById("PurchaseOrderData_PackAndForwd").value);
        if (type == "rps") {
            document.getElementById("discountType").value = "rps";
        }
        else if (type == "percent") {
            document.getElementById("discountType").value = "percent"
        }

        if (packandforwd != 0 || packandforwd != "") {
            var rowid = document.getElementById("hdnRowCount").value;
            for (var i = 1; i <= rowid; i++) {
                var quantity = "quantity" + i;
                var costprice = "costprice" + i;
                var amount = "amount" + i;
                var discountpercent = "discountpercent" + i;
                var discountrps = "discountrps" + i;
                var amountvalue = "amountvalue" + i;
                var unit = "unit" + i;
                var unitvalue = "unitvalue" + i;
                if (document.getElementById(quantity) != null) {
                    var percent = (+document.getElementById(discountpercent).value) / 100;
                    var rupees = (+document.getElementById(discountrps).value);
                    var roundupqty = (+document.getElementById(quantity).value);
                    document.getElementById(quantity).value = roundupqty;
                    var calculatedvalue = 0;

                    if ($("#" + unit).text() == "Dozens") {
                        calculatedvalue = ((+document.getElementById(quantity).value) * 12) * (+document.getElementById(costprice).value);
                    }
                    else {
                        calculatedvalue = (+document.getElementById(quantity).value) * (+document.getElementById(costprice).value);
                    }

                    var discounttype = document.getElementById("discountType").value;
                    if (roundupqty == 0 || (+document.getElementById(costprice).value) == 0) {
                        document.getElementById(discountpercent).value = "0";
                        document.getElementById(discountrps).value = "0.00";
                    }
                    else if (discounttype == "percent") {
                        if (percent != 0) {
                            var valueafterdiscount = calculatedvalue * percent;
                            document.getElementById(discountrps).value = valueafterdiscount.toFixed(2);
                            calculatedvalue -= valueafterdiscount;

                        }
                        else { document.getElementById(discountrps).value = "0.00"; }
                    }
                    else {
                        if (rupees != 0) {
                            var valueafterdiscount = rupees / calculatedvalue * 100;
                            document.getElementById(discountpercent).value = valueafterdiscount.toFixed(1);
                            calculatedvalue -= rupees;
                        }
                        else { document.getElementById(discountpercent).value = 0; }
                    }

                    document.getElementById(amountvalue).value = calculatedvalue.toFixed(2);
                    document.getElementById(amount).innerHTML = addCommas(calculatedvalue.toFixed(2));
                }
            }

            var totalamount = 0;
            for (var i = 1; i <= rowid; i++) {
                var amount = "amount" + i;
                if (document.getElementById(amount) != null) {
                    totalamount = (+totalamount) + (+removeCommas(document.getElementById(amount).innerHTML));
                }
            }
            document.getElementById("Total_Amount").innerHTML = "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
            document.getElementById("Total_Amount_Value").value = totalamount.toFixed(2);
            totalamount += packandforwd;
            totalamount = Math.round(totalamount.toFixed(2));
            if (totalamount < 0) {
                document.getElementById("Grand_Total_Value").value = totalamount.toFixed(2);
                document.getElementById("Grand_Total").innerHTML = "-" + "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
                document.getElementById("In_Words").innerHTML = NumberToWords();
            }
            else {
                document.getElementById("Grand_Total_Value").value = totalamount.toFixed(2);
                document.getElementById("Grand_Total").innerHTML = "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
                document.getElementById("In_Words").innerHTML = NumberToWords();
            }

            for (var i = 1; i <= rowid; i++) {
                var amount = "amount" + i;
                var amountvalue = "amountvalue" + i;
                var proportionate = "proportionatetax" + i;
                var proportionatetaxvalue = "proportionatetaxvalue" + i;
                var proportionateamount = "proportionatetaxamount" + i;
                if (document.getElementById(amount) != null) {
                    var propotaxpercent = (+removeCommas(document.getElementById(amount).innerHTML)) / (+document.getElementById("Total_Amount_Value").value);
                    document.getElementById(proportionate).innerHTML = (propotaxpercent * 100).toFixed(2);
                    document.getElementById(proportionatetaxvalue).value = (propotaxpercent * 100).toFixed(2);
                    var packandforwdpropoamount = propotaxpercent * packandforwd;
                    document.getElementById(proportionateamount).value = packandforwdpropoamount.toFixed(2);
                    if (document.getElementById(proportionate).innerHTML.toString() == "NaN") {
                        document.getElementById(proportionate).innerHTML = "0";
                    }
                    CalculateTaxSummary(i);
                }
            }
        }
        else {
            var proportionatecount = document.getElementById("hdnRowCount").value;
            for (var i = 1; i <= proportionatecount; i++) {
                var proportionate = "proportionatetax" + i;
                var proportionatetaxvalue = "proportionatetaxvalue" + i;
                var proporamount = "proportionatetaxamount" + i;
                if (document.getElementById(proportionate) != null) {
                    document.getElementById(proportionate).innerHTML = "0";
                    document.getElementById(proportionatetaxvalue).value = 0;
                    document.getElementById(proporamount).value = 0;
                }
            }

            var quantity = "quantity" + count;
            var costprice = "costprice" + count;
            var amount = "amount" + count;
            var discountpercent = "discountpercent" + count;
            var discountrps = "discountrps" + count;
            var amountvalue = "amountvalue" + count;
            var unit = "unit" + count;
            var unitvalue = "unitvalue" + count;
            var totalamount = 0;
            if (document.getElementById(quantity) != null) {
                var percent = (+document.getElementById(discountpercent).value) / 100;
                var rupees = (+document.getElementById(discountrps).value);
                var roundupqty = (+document.getElementById(quantity).value);
                document.getElementById(quantity).value = roundupqty;
                var calculatedvalue = 0;

                if ($("#" + unit).text() == "Dozens") {
                    calculatedvalue = ((+document.getElementById(quantity).value) * 12) * (+document.getElementById(costprice).value);
                }
                else {
                    calculatedvalue = (+document.getElementById(quantity).value) * (+document.getElementById(costprice).value);
                }

                var discounttype = document.getElementById("discountType").value;
                if (roundupqty == 0 || (+document.getElementById(costprice).value) == 0) {
                    document.getElementById(discountpercent).value = "0";
                    document.getElementById(discountrps).value = "0.00";
                }
                else if (discounttype == "percent") {
                    if (percent != 0) {
                        var valueafterdiscount = calculatedvalue * percent;
                        document.getElementById(discountrps).value = valueafterdiscount.toFixed(2);
                        calculatedvalue -= valueafterdiscount;

                    }
                    else { document.getElementById(discountrps).value = "0.00"; }
                }
                else {
                    if (rupees != 0) {
                        var valueafterdiscount = rupees / calculatedvalue * 100;
                        document.getElementById(discountpercent).value = valueafterdiscount.toFixed(1);
                        calculatedvalue -= rupees;
                    }
                    else { document.getElementById(discountpercent).value = 0; }
                }

                document.getElementById(amountvalue).value = calculatedvalue.toFixed(2);
                document.getElementById(amount).innerHTML = addCommas(calculatedvalue.toFixed(2));
            }
            var rowid = document.getElementById("hdnRowCount").value;
            for (var i = 1; i <= rowid; i++) {
                var amount = "amount" + i;
                if (document.getElementById(amount) != null) {
                    totalamount = (+totalamount) + (+removeCommas(document.getElementById(amount).innerHTML));
                }
            }
            document.getElementById("Total_Amount").innerHTML = "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
            document.getElementById("Total_Amount_Value").value = totalamount.toFixed(2);
            totalamount = Math.round(totalamount.toFixed(2));
            if (totalamount < 0) {
                document.getElementById("Grand_Total_Value").value = totalamount.toFixed(2);
                document.getElementById("Grand_Total").innerHTML = "-" + "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
                document.getElementById("In_Words").innerHTML = NumberToWords();
            }
            else {
                document.getElementById("Grand_Total_Value").value = totalamount.toFixed(2);
                document.getElementById("Grand_Total").innerHTML = "<i class='fa fa-rupee'></i>" + addCommas(totalamount.toFixed(2));
                document.getElementById("In_Words").innerHTML = NumberToWords();
            }
            CalculateTaxSummary(rowid);
        }
        var rowid = document.getElementById("hdnRowCount").value;
        var previtemCode = "itemCode" + rowid;
        var prevdescription = "description" + rowid;
        var prevquantity = "quantity" + rowid;
        var prevdesign = "design" + rowid;
        var prevdiscountpercent = "discountpercent" + rowid;
        if (document.getElementById(previtemCode) != null) {
            document.getElementById(previtemCode).disabled = false;
            document.getElementById(prevdescription).disabled = false;
            document.getElementById(prevquantity).disabled = false;
            document.getElementById(prevdiscountpercent).disabled = false;
            document.getElementById(prevdesign).disabled = false;
        }
    }
</script>

<script type="text/javascript">
    function CalculateTaxSummary(rowid) {
        var TaxCount = document.getElementById("ItemTaxCount").value;
        for (var i = 1; i <= TaxCount; i++) {
            var TotalTaxAmount = 0;
            var itemtaxno = "ItemTaxNumber" + i;
            var addedtaxamount = "AddedTaxAmount" + i;
            var addedtaxamounthdn = "AddedTaxAmounthdn" + i;
            var addedamount = "AddedAmount" + i;
            var addedamounthdn = "AddedAmounthdn" + i;
            for (var j = 1; j <= rowid; j++) {
                var itemtaxvalue = "ItemTaxValue" + j;
                var amount = "amount" + j;
                var proporamount = "proportionatetaxamount" + j;
                if (document.getElementById(amount) != null) {
                    if ($("#" + itemtaxno).val() == $("#" + itemtaxvalue).val()) {
                        TotalTaxAmount = (+TotalTaxAmount) + (+removeCommas(document.getElementById(amount).innerHTML)) + (+document.getElementById(proporamount).value);
                    }
                }
            }
            document.getElementById(addedamount).innerHTML = "<i class='fa fa-inr'></i>" + addCommas(TotalTaxAmount.toFixed(2));
            document.getElementById(addedamounthdn).value = TotalTaxAmount.toFixed(2);
            TotalTaxAmount = TotalTaxAmount * (+document.getElementById(itemtaxno).value / 100);
            document.getElementById(addedtaxamount).innerHTML = "<i class='fa fa-inr'></i>" + addCommas(TotalTaxAmount.toFixed(2));
            document.getElementById(addedtaxamounthdn).value = TotalTaxAmount.toFixed(2);
        }
    }
</script>

<script type="text/javascript">
    function CalculatePackAndForwd() {
        var rowid = document.getElementById("hdnRowCount").value;
        var packandforwd = (+document.getElementById("PurchaseOrderData_PackAndForwd").value);
        for (var i = 1; i <= rowid; i++) {
            CalculateItemWiseAmount(i, '');
        }
    }
</script>

<style type="text/css">
    .CenterText {
        text-align: center;
        width: 100%;
    }
</style>

<script type="text/javascript">
    function AllowNumbers(key) {
        var keycode = (key.which) ? key.which : key.keyCode;
        if (!(keycode == 8 || keycode == 46) && (keycode < 48 || keycode > 57)) {
            return false;
        }
    }
    function AllowDecimal(key, rowid) {
        var numbertype = $("#numberType" + rowid).val();
        var quantity = $("#quantity" + rowid).val();
        var pointFoundCount = 0;
        for (var i = 0; i <= quantity.length; i++) {
            if (quantity[i] == '.') {
                pointFoundCount++;
            }
        }

        var pointposition = quantity.indexOf(".");
        var digitupto = 0;
        if (pointposition != -1) {
            digitupto = quantity.substr(pointposition, quantity.length).length;
        }

        var keycode = (key.which) ? key.which : key.keyCode;
        if (numbertype == 'Whole') {
            if (!(keycode == 8) && (keycode < 48 || keycode > 57)) {
                return false;
            }
        }
        else if (quantity.length == 0) {
            if (!(keycode == 8) && (keycode < 48 || keycode > 57)) {
                return false;
            }
        }
        else if (keycode == 46) {
            if (pointFoundCount > 0 && pointFoundCount < 2) {
                return false;
            }
        }
        else if (digitupto != 0) {
            if (numbertype == '2Digit') {
                if (!(keycode == 8 || keycode == 46) && (keycode < 48 || keycode > 57) || digitupto >= 3) {
                    return false;
                }
            }
            else {
                if (!(keycode == 8 || keycode == 46) && (keycode < 48 || keycode > 57) || digitupto >= 4) {
                    return false;
                }
            }
        }
        else {
            if (quantity.length == 0) {
                if (!(keycode == 8) && (keycode < 48 || keycode > 57)) {
                    return false;
                }
            }
            else {
                if (!(keycode == 8 || keycode == 46) && (keycode < 48 || keycode > 57)) {
                    return false;
                }
            }
        }
    }
</script>

<script type="text/javascript">
    $(function () {
        $("#Submit").click(function () {
            var rowid = document.getElementById("hdnRowCount").value;
            var itemCode = "itemCode" + rowid;
            var quantity = "quantity" + rowid;
            var design = "design" + rowid;
            var costprice = "costprice" + rowid;
            var validationcounter = 0;
            if ($("#PurchaseOrderData_SupplierName").val() == "" || $("#ddltypeofmode").val() == "" || $("#ddltransportnames").val() == "" || $("#PurchaseOrderData_DelDate").val() == "") {
                validationcounter++;
            }

            if ($("#ddlgodownnames").val() != "") {
                if ($("#ddlgodownaddresses").val() == "") {
                    alertbox("Please Select Godown Area");
                    validationcounter++;
                    return false;
                }
            }
            else if ($("#ddlshopnames").val() == "") {
                alertbox("Please Select Either Shop Name Or Godown Name");
                validationcounter++;
                return false;
            }

            if (document.getElementById(itemCode) != null) {
                if ($("#" + itemCode).val() == "") {
                    alertbox("Please Select The Item");
                    validationcounter++;
                    return false;
                }
                else if ($("#" + quantity).val() == "" || (+$("#" + quantity).val()) == 0) {
                    alertbox("Please Fill The Quantity");
                    validationcounter++;
                    return false;
                }
                //else if ($("#" + design).val() == "") {
                //    alertbox("Please Select The Design");
                //    validationcounter++;
                //    return false;
                //}
                else if ($("#" + costprice).val() == "" || (+$("#" + costprice).val()) == 0) {
                    alertbox("Please Fill The Rate");
                    validationcounter++;
                    return false;
                }
                else {
                    document.getElementById("ddlgodownnames").disabled = false;
                    document.getElementById("ddlgodownaddresses").disabled = false;
                    document.getElementById("ddlshopnames").disabled = false;
                    document.getElementById("PurchaseOrderData_SupplierName").disabled = false;
                    if (document.getElementById("formtypeid").style.display == "inline") {
                        document.getElementById("ddlformtypes").disabled = false;
                    }
                    var rowcounter = 0;
                    for (var i = 1; i <= rowid; i++) {
                        var previtemCode = "itemCode" + i;
                        var prevdescription = "description" + i;
                        var prevquantity = "quantity" + i;
                        var prevdesign = "design" + i;
                        var prevcostprice = "costprice" + i;
                        var prevdiscountpercent = "discountpercent" + i;
                        var prevdiscountrps = "discountrps" + i;
                        if (document.getElementById(previtemCode) != null) {
                            document.getElementById(previtemCode).disabled = false;
                            document.getElementById(prevdescription).disabled = false;
                            document.getElementById(prevquantity).disabled = false;
                            document.getElementById(prevdesign).disabled = false;
                            document.getElementById(prevcostprice).disabled = false;
                            document.getElementById(prevdiscountpercent).disabled = false;
                            document.getElementById(prevdiscountrps).disabled = false;
                        }
                        else { rowcounter++; }
                    }
                    if (rowcounter == rowid) {
                        alertbox("Please Insert At Least One Item..");
                        validationcounter++;
                        return false;
                    }
                }
            }
            else {
                document.getElementById("ddlgodownnames").disabled = false;
                document.getElementById("ddlgodownaddresses").disabled = false;
                document.getElementById("ddlshopnames").disabled = false;
                document.getElementById("PurchaseOrderData_SupplierName").disabled = false;
                if (document.getElementById("formtypeid").style.display == "inline") {
                    document.getElementById("ddlformtypes").disabled = false;
                }
                var rowcounter = 0;
                for (var i = 1; i <= rowid; i++) {
                    var previtemCode = "itemCode" + i;
                    var prevdescription = "description" + i;
                    var prevquantity = "quantity" + i;
                    var prevdesign = "design" + i;
                    var prevcostprice = "costprice" + i;
                    var prevdiscountpercent = "discountpercent" + i;
                    var prevdiscountrps = "discountrps" + i;
                    if (document.getElementById(previtemCode) != null) {
                        document.getElementById(previtemCode).disabled = false;
                        document.getElementById(prevdescription).disabled = false;
                        document.getElementById(prevquantity).disabled = false;
                        document.getElementById(prevdesign).disabled = false;
                        document.getElementById(prevcostprice).disabled = false;
                        document.getElementById(prevdiscountpercent).disabled = false;
                        document.getElementById(prevdiscountrps).disabled = false;
                    }
                    else { rowcounter++; }
                }
                if (rowcounter == rowid) {
                    alertbox("Please Insert At Least One Item..");
                    validationcounter++;
                    return false;
                }
            }

            if (validationcounter == 0) {
                setTimeout(function () {
                    document.getElementById("Submit").disabled = true;
                }, 100);
            }
        });

        $("#Edit").click(function () {
            window.location.assign("/PurchaseOrder/POEdit");
        });

        $("#Delete").click(function () {
            window.location.assign("/PurchaseOrder/ListOfPOes");
        });

        $("#Print").click(function () {
            window.location.assign("/PurchaseOrder/PurchaseOrderPrint");
        });
    });
</script>

<script type="text/javascript">
    function DisplayForm(type) {
        if (type == "yes") {
            document.getElementById("formtypeid").style.display = "inline";
            document.getElementById("ddlformtypes").style.display = "inline";
        }
        else {
            document.getElementById("formtypeid").style.display = "none";
            document.getElementById("ddlformtypes").style.display = "none";
            $("#ddlformtypes").val("").attr("selected", true);
        }
    }

    function CheckRegistered(type) {
        if (type == "yes") {
            if ($("#PurchaseOrderData_SupplierState").val() != "Maharashtra") {
                $("#NoRadioButton").attr("disabled", false);
                $("#YesRadioButton").attr("disabled", false);
                $("#NoRadioButton").attr("checked", true);
                document.getElementById("PurchaseOrderData_ClientType").value = "Registered";
            }
            else {
                $("#NoRadioButton").attr("disabled", true);
                $("#YesRadioButton").attr("disabled", true);
                $("#NoRadioButton").prop("checked", true);
                document.getElementById("PurchaseOrderData_ClientType").value = "Registered";
                document.getElementById("formtypeid").style.display = "none";
                $("#ddlformtypes").val("").attr("selected", true);
            }
        }
        else {
            $("#NoRadioButton").attr("disabled", true);
            $("#YesRadioButton").attr("disabled", true);
            $("#NoRadioButton").prop("checked", true);
            document.getElementById("PurchaseOrderData_ClientType").value = "NonRegistered";
            document.getElementById("formtypeid").style.display = "none";
            $("#ddlformtypes").val("").attr("selected", true);
        }
    }
    function OpenPopUp() {
        window.open("/PurchaseOrder/NewItem", "_blank", "width=1200,height=600,top=20px,left=100px");
    }
</script>

@Html.Partial("../Shared/Header")
<section>
    <div class="mainwrapper">
        @Html.Partial("../Shared/LeftMenu")

        @using (Html.BeginForm("PurchaseData", "PurchaseOrder", FormMethod.Post))
        {
            
            @Html.ValidationSummary(true)
            <input type="hidden" id="hdnRowCount" name="hdnRowCount" value="1" /> 
            <input type="hidden" id="discountType" />
            <div id="AllTaxesNumbersValue">
                <input type="hidden" id="ItemTaxCount" name="ItemTaxCount" value="1" />
                <input type="hidden" id="ItemTaxNumber1" name="ItemTaxNumber1" value="0" />
            </div>
            
            @Html.HiddenFor(model => model.PurchaseOrderData.SupplierAddress)
            @Html.HiddenFor(model => model.PurchaseOrderData.SupplierContactNo)
            @Html.HiddenFor(model => model.PurchaseOrderData.SupplierEmail)
            @Html.HiddenFor(model => model.PurchaseOrderData.SupplierState)
            @Html.HiddenFor(model => model.PurchaseOrderData.DelAt);
            @Html.HiddenFor(model => model.PurchaseOrderData.GodownContactPerson)
            @Html.HiddenFor(model => model.PurchaseOrderData.GodownName)
            @Html.HiddenFor(model => model.PurchaseOrderData.GodownContactNo)
            @Html.HiddenFor(model => model.PurchaseOrderData.GodownEmail)
            @Html.HiddenFor(model => model.PurchaseOrderData.ShopContactPerson)
            @Html.HiddenFor(model => model.PurchaseOrderData.ShopContactNo)
            @Html.HiddenFor(model => model.PurchaseOrderData.ShopName)
            @Html.HiddenFor(model => model.PurchaseOrderData.ShopEmail)
            @Html.HiddenFor(model => model.PurchaseOrderData.TransportContactNo)
            @Html.HiddenFor(model => model.PoCode)
            @Html.HiddenFor(model => model.PurchaseOrderData.ClientType)
            <audio id="audio" muted="true" preload="auto" style="display: none" controls="controls" autoplay="false">
                <source src="" type="audio/ogg" />
            </audio>
            <div class="mainpanel">
                <div class="col-md-12 col-lg-12">
                    <div class="col-md-12 col-lg-12">

                        <div class="row">
                            <label style="font-size: 22px">Purchase Order</label>
                            @{
                                                                   if (HttpContext.Current.Session["UserName"].ToString() != "SuperAdmin")
                                                                   {
                                                                       if (Session["LOGINSHOPGODOWNCODE"] != null)
                                                                       {
                                <div style="text-align: right">
                                    <label style="font-family: 'Good Times'; font-size: small; color: red">Login At:</label>
                                    <label style="font-family: 'Good Times'; font-size: small; color: red" id="LoginShop">@Session["SHOPGODOWNNAME"].ToString()</label>
                                </div>
                                <input type="hidden" id="LoginShopGodownCode" value="@Session["LOGINSHOPGODOWNCODE"].ToString()" />
                                                                       }
                                                                   }
                            }
                            <table style="border: 1px double;">
                                <tr>
                                    <td>
                                        <div class="col-md-12 col-lg-12">
                                            <div class="col-md-12 col-lg-12">
                                                <div class="tile-body">
                                                    <div class="row">
                                                        <div class="row">
                                                            <div class="row">
                                                                <div class="col-lg-4 col-md-4" style="border-right: 1px solid #999; height: 250px;">
                                                                    <div style="height: 10px"></div>
                                                                    <div class="col-md-12 col-lg-12">
                                                                        <label>Supplier Name:<i style="color: red">*</i></label>
                                                                        @Html.TextBoxFor(model => model.PurchaseOrderData.SupplierName, new { @placeholder = "Supplier Name", @class = "form-control" })
                                                                        @Html.ValidationMessageFor(model => model.PurchaseOrderData.SupplierName, null, new { style = "color:red" })
                                                                        <div style="display: none" id="SupplierDetails">
                                                                            <label>State: &nbsp</label><label style="font-weight: normal" id="SupplierState"></label><br />
                                                                            <label>Dealer: &nbsp</label>
                                                                            <input type="radio" id="Registered" name="Registered" onclick="CheckRegistered('yes')" />
                                                                            Registered
                                                                            <input type="radio" id="NonRegistered" name="Registered" onclick="CheckRegistered('no')" />
                                                                            Non-Registered<br />
                                                                            <div class="row">
                                                                                <div class="col-md-6 col-lg-6">
                                                                                    <label for="exampleInputSalesTax">Form Applicable</label>
                                                                                </div>
                                                                                <div class="col-md-6 col-lg-6">
                                                                                    <input type="radio" id="YesRadioButton" name="RadioButton" onclick="DisplayForm('yes')" />Yes
                                                                                <input type="radio" id="NoRadioButton" name="RadioButton" onclick="DisplayForm('no')" />No  
                                                                                </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div id="formtypeid">
                                                                                    <div class="col-md-5 col-lg-5">
                                                                                        <label for="exampleInputFormType">Form Type</label>
                                                                                    </div>
                                                                                    <div class="col-md-7 col-lg-7">
                                                                                        @Html.DropDownListFor(model => model.PurchaseOrderData.FormType, new List<SelectListItem> { new SelectListItem { Text = "C-Form" }, new SelectListItem { Text = "E1-Form" }, new SelectListItem { Text = "E2-Form" } }, "Select Type", new { id = "ddlformtypes", @class = "form-control" })<br />
                                                                                    </div>

                                                                                </div>
                                                                            </div>
                                                                            <br />
                                                                            <br />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4 col-md-4" style="border-right: 1px solid #999; height: 250px;">
                                                                    <div style="height: 10px"></div>
                                                                    <div class="col-md-12 col-lg-12">
                                                                        <div class="row" id="TransportDetails" style="display: none">
                                                                            <div class="row">
                                                                                <div class="col-md-12 col-lg-12">
                                                                                    <label>Transport Details</label>
                                                                                </div>
                                                                                <br />
                                                                                <div class="col-md-6 col-lg-6">
                                                                                    <label>Mode <i style="color: red">*</i></label>
                                                                                    @Html.DropDownListFor(model => model.PurchaseOrderData.ModeOfTransport, new List<SelectListItem> { new SelectListItem { Text = "Road" }, new SelectListItem { Text = "Train" }, new SelectListItem { Text = "Air" } }, "Select Mode", new { id = "ddltypeofmode", @class = "form-control" })

                                                                                </div>
                                                                                <div class="col-md-6 col-lg-6">
                                                                                    <label>Name <i style="color: red">*</i></label>
                                                                                    @Html.DropDownListFor(model => model.PurchaseOrderData.TransportName, Enumerable.Empty<SelectListItem>(), "Select Name", new { id = "ddltransportnames", @class = "form-control" })
                                                                                    @Html.ValidationMessageFor(model => model.PurchaseOrderData.TransportName, null, new { style = "color:red" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div style="height: 8px"></div>
                                                                        <div class="row">
                                                                            <div class="row" id="Shop_Details" style="display: none">
                                                                                <div style="width: 100%; height: 1px; background-color: lightgrey;"></div>
                                                                                <div style="height: 8px"></div>
                                                                                <div class="col-md-6 col-lg-6">
                                                                                    <label>Shop Name</label>
                                                                                    @Html.DropDownListFor(model => model.PurchaseOrderData.ShopCode, Enumerable.Empty<SelectListItem>(), "Shop Name", new { id = "ddlshopnames", @class = "form-control" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div style="height: 8px"></div>
                                                                        <div class="row">
                                                                            <div class="row" id="Godown_Details" style="display: none">
                                                                                <div style="width: 100%; height: 1px; background-color: lightgrey;"></div>
                                                                                <div style="height: 8px"></div>
                                                                                <div class="col-md-6 col-lg-6">
                                                                                    <label>Godown Name</label>
                                                                                    @Html.DropDownListFor(model => model.PurchaseOrderData.GodownCode, Enumerable.Empty<SelectListItem>(), "Godown Name", new { id = "ddlgodownnames", @class = "form-control" })
                                                                                </div>
                                                                                <div class="col-md-6 col-lg-6" style="display: none" id="Godown_Addresses">
                                                                                    <label>Godown Area</label>
                                                                                    @Html.DropDownListFor(model => model.PurchaseOrderData.GodownArea, Enumerable.Empty<SelectListItem>(), "Addresses", new { id = "ddlgodownaddresses", @class = "form-control" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4 col-lg-4">
                                                                    <div class="row">
                                                                        <div class="col-md-11 col-lg-11">
                                                                            @{
                                                                   string dt = DateTime.Now.ToString("dd/MM/yyyy");
                                                                   string pono = Model.PoCode;
                                                                            }
                                                                            <table class="table">
                                                                                <tr>
                                                                                    <td><b>Date</b></td>
                                                                                    <td>
                                                                                        <label id="date" style="font-weight: normal">@dt</label>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td><b>P.O. No.</b></td>
                                                                                    <td>
                                                                                        <label id="pono" style="font-weight: normal; text-align: center">@pono</label>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td>
                                                                                        <label for="exampleInputname">Del Date<i style="color: red">*</i></label>
                                                                                    </td>
                                                                                    <td>
                                                                                        @Html.TextBoxFor(model => model.PurchaseOrderData.DelDate, new { @class = "form-control", @placeholder = "Select Date", @autocomplete = "off", @onkeypress = "return false" })
                                                                                        @Html.ValidationMessageFor(model => model.PurchaseOrderData.DelDate, null, new { style = "color:red" })
                                                                                    </td>
                                                                                </tr>

                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <table class="table" id="AddingRows" style="border-color: #d2d2d2; border: outset">
                                                                <thead>
                                                                    <tr>
                                                                        <th class="col-md-2 col-lg-2">
                                                                            <label class="CenterText">Item<i style="color: red">*</i></label></th>
                                                                        <th class="col-md-2 col-lg-2">
                                                                            <label class="CenterText">Description</label></th>
                                                                        <th class="col-md-1 col-lg-1">
                                                                            <label class="CenterText">Color</label></th>
                                                                        <th class="col-md-1 col-lg-1">
                                                                            <label class="CenterText">Design</label></th>
                                                                        <th class="col-md-1 col-lg-1">
                                                                            <label class="CenterText">Qty<i style="color: red">*</i></label></th>
                                                                        <th class="col-md-1 col-lg-1">
                                                                            <label class="CenterText">Unit<i style="color: red">*</i></label></th>
                                                                        <th class="col-md-1 col-lg-1">
                                                                            <label class="CenterText">
                                                                                Rate<br />
                                                                                (<i class="fa fa-rupee"></i>)<i style="color: red">*</i></label></th>
                                                                        <th class="col-md-1 col-lg-1">
                                                                            <label class="CenterText">
                                                                                Disc<br />
                                                                                (%)</label>
                                                                        </th>
                                                                        <th class="col-md-1 col-lg-1">
                                                                            <label class="CenterText">
                                                                                Disc<br />
                                                                                (<i class="fa fa-rupee"></i>)</label>
                                                                        </th>
                                                                        <th class="col-md-1 col-lg-1">
                                                                            <label class="CenterText">
                                                                                Tax<br />
                                                                                (%)</label>
                                                                        </th>
                                                                        <th class="col-md-1 col-lg-1">
                                                                            <label class="CenterText">
                                                                                Amt<br />
                                                                                (<i class="fa fa-rupee"></i>)</label></th>
                                                                        <th class="col-md-1 col-lg-1">
                                                                            <label class="CenterText">
                                                                                PropTax<br />
                                                                                (%)</label></th>
                                                                        <th class="col-md-1 col-lg-1"></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr id="row1">
                                                                        <input type="hidden" id="SubCat1" name="SubCat1" />
                                                                        <td class="col-md-2 col-lg-2">
                                                                            <select id="itemCode1" name="itemCode1" class="form-control" disabled="disabled">
                                                                                <option value="">Select</option>
                                                                            </select>
                                                                            <input type="hidden" id="itemName1" name="itemName1" />
                                                                            <input type="hidden" id="ItemType1" name="ItemType1" value="Inventory" />
                                                                        </td>
                                                                        <td class="col-md-2 col-lg-2">
                                                                            <textarea id="description1" name="description1" class="form-control" placeholder="Description" disabled="disabled"></textarea></td>
                                                                        <td class="col-md-1 col-lg-1">
                                                                            <label id="color1" class="CenterText" style="font-weight: normal">---</label>
                                                                            <input type="hidden" id="materialvalue1" name="materialvalue1" />
                                                                            <input type="hidden" id="colorvalue1" name="colorvalue1" />
                                                                            <input type="hidden" id="brandvalue1" name="brandvalue1" />
                                                                            <input type="hidden" id="sizevalue1" name="sizevalue1" />
                                                                        </td>
                                                                        <td class="col-md-1 col-lg-1">
                                                                            <select id="design1" class="form-control" name="design1" disabled="disabled">
                                                                                <option value="">Select</option>
                                                                            </select>
                                                                            <input type="hidden" id="designName1" name="designName1" />
                                                                        </td>
                                                                        <td class="col-md-1 col-lg-1">
                                                                            <input type="text" id="quantity1" name="quantity1" autocomplete="off" class="form-control" disabled="disabled" placeholder="Qty" style="text-align: center; width: 100%" onchange="CalculateItemWiseAmount(1,'')" onkeypress="return AllowDecimal(event,1)" /></td>
                                                                        <td class="col-md-1 col-lg-1">
                                                                            <label id="unit1" style="font-weight: normal; text-align: center" class="CenterText">---</label>
                                                                            <input type="hidden" name="unitvalue1" id="unitvalue1" />
                                                                            <input type="hidden" id="numberType1" name="numberType1" />
                                                                        </td>
                                                                        <td class="col-md-1 col-lg-1">
                                                                            <input type="text" id="costprice1" name="costprice1" autocomplete="off" disabled="disabled" class="form-control" placeholder="Rate" style="text-align: center; width: 100%" onchange="CalculateItemWiseAmount(1,'')" onkeypress="return AllowNumbers(event)" />
                                                                            <input type="hidden" id="mrp1" name="mrp1" />
                                                                            <input type="hidden" id="sellingprice1" name="sellingprice1" />
                                                                        </td>
                                                                        <td class="col-md-1 col-lg-1">
                                                                            <input type="text" id="discountpercent1" name="discountpercent1" autocomplete="off" disabled="disabled" class="form-control" value="0" placeholder="0%" style="text-align: center; width: 100%" onchange="CalculateItemWiseAmount(1,'percent')" onkeypress="return AllowNumbers(event)" />
                                                                        </td>
                                                                        <td class="col-md-1 col-lg-1">
                                                                            <input type="text" id="discountrps1" name="discountrps1" autocomplete="off" disabled="disabled" class="form-control" value="0.00" placeholder="0" style="text-align: center; width: 100%" onchange="CalculateItemWiseAmount(1,'rps')" onkeypress="return AllowNumbers(event)" />
                                                                        </td>
                                                                        <td style="text-align: center">
                                                                            <label id="ItemTax1">0</label><input type="hidden" id="ItemTaxValue1" name="ItemTaxValue1" value="0" /></td>
                                                                        <td class="col-md-1 col-lg-1" style="text-align: right">
                                                                            <label id="amount1">0</label>
                                                                            <input type="hidden" id="amountvalue1" name="amountvalue1" value="0" style="text-align: right" />
                                                                        </td>
                                                                        <td class="col-md-1 col-lg-1" style="text-align: right">
                                                                            <label id="proportionatetax1">0</label>
                                                                            <input type="hidden" id="proportionatetaxvalue1" name="proportionatetaxvalue1" value="0" />
                                                                            <input type="hidden" id="proportionatetaxamount1" name="proportionatetaxamount1" value="0" />
                                                                        </td>
                                                                        <td><a href='#' onclick="DeleteRow(1)" class='fa fa-trash fa-lg' style='color: red;' /></td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <div class="col-md-7 col-lg-7">
                                                                <div id="AddTaxes" style="display: none">
                                                                    <div class="row">
                                                                        <div class="col-lg-12 col-md-12">
                                                                            <label style="font-size: 14px">Tax Summary:</label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-md-3 col-lg-3">
                                                                            <label id="AddedAmount1">0</label>
                                                                            <input type="hidden" id="AddedAmounthdn1" name="AddedAmounthdn1" value="0" />
                                                                        </div>
                                                                        <div class="col-md-2 col-lg-2">
                                                                            <label id="AddedTax1"></label>
                                                                        </div>
                                                                        <div class="col-md-7 col-lg-7">
                                                                            <label id="AddedTaxAmount1">0</label>
                                                                            <input type="hidden" id="AddedTaxAmounthdn1" name="AddedTaxAmounthdn1" value="0" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-5 col-lg-5">
                                                                <div class="row">
                                                                    <button type="button" id="CreateNewItem" class="btn btn-link col-md-offset-11 col-lg-offset-11" style="color: royalblue; float: right; text-align: right; font-size: small" onclick="OpenPopUp()">New Item</button>
                                                                </div>
                                                                <div class="row">
                                                                    <button class="btn btn-link col-md-offset-11 col-lg-offset-11" id="NonInvButton" type="button" style="float: right; text-align: right; color: orangered; font-size: small">Non-Inventory Item</button>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-12 col-lg-12">
                                                                <div class="col-md-5 col-lg-5"></div>
                                                                <div class="col-md-7 col-lg-7">
                                                                    <div class="row">
                                                                        <div class="col-md-12 col-lg-12">
                                                                            <div class="col-md-3 col-lg-3"></div>
                                                                            <div class="col-md-5 col-lg-5">
                                                                                <label style="font-size: 14px;">Total Amount</label>
                                                                            </div>
                                                                            <div class="col-md-4 col-lg-4" style="text-align: right">
                                                                                <div class="row">
                                                                                    <label id="Total_Amount" style="font-size: 14px">0</label>
                                                                                    <input type="hidden" id="Total_Amount_Value" name="Total_Amount_Value" value="0" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div style="height: 5px"></div>
                                                                    <div class="row">
                                                                        <div class="col-md-12 col-lg-12">
                                                                            <div class="col-md-3 col-lg-3"></div>
                                                                            <div class="col-md-5 col-lg-5">
                                                                                <label style="font-size: 14px;">Packing And Forwarding</label>
                                                                            </div>
                                                                            <div class="col-md-4 col-lg-4">
                                                                                <div class="row">
                                                                                    @Html.TextBoxFor(model => model.PurchaseOrderData.PackAndForwd, new { @class = "form-control", @autocomplete = "off", @placeholder = "0", @Value = "0", @style = "text-align:right", @onchange = "CalculatePackAndForwd()" })
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div style="height: 5px"></div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-md-12 col-lg-12">
                                                                <div class="col-md-5 col-lg-5"></div>
                                                                <div class="col-md-7 col-lg-7">
                                                                    <div class="row">
                                                                        <div class="col-md-12 col-lg-12">
                                                                            <div class="col-md-3 col-lg-3"></div>
                                                                            <div class="col-md-5 col-lg-5">
                                                                                <label style="font-size: 14px;">Grand Total</label>
                                                                            </div>
                                                                            <div class="col-md-4 col-lg-4" style="text-align: right">
                                                                                <div class="row">
                                                                                    <label id="Grand_Total" style="font-size: 14px">0</label>
                                                                                    <input type="hidden" id="Grand_Total_Value" name="Grand_Total_Value" value="0" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div style="height: 5px"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-12 col-lg-12">
                                                                <label style="font-size: 14px">In Words:</label>
                                                                <label id="In_Words" style="font-size: 14px"></label>
                                                            </div>
                                                        </div>

                                                        <div style="width: 100%; height: 1px; background-color: lightgrey;"></div>
                                                        <div style="height: 5px"></div>
                                                        <div class="row form-group">
                                                            <div class="col-md-1 col-lg-1">
                                                                <label style="font-size: 14px">Narration:</label>
                                                            </div>
                                                            <div class="col-md-11 col-lg-11">
                                                                @Html.TextBoxFor(model => model.PurchaseOrderData.Narration, new { @class = "form-control" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                            <div style="height: 5px"></div>
                            <div class="col-md-9 col-lg-9">
                                <button type="submit" class="col-lg-offset-7 col-md-offset-7 btn btn-success" id="Submit">Create</button>
                            </div>
                            <div class="col-lg-3 col-md-3" style="text-align: right">
                                <button type="button" id="Edit" class="btn btn-warning" data-toggle="tooltip" title="Edit"><i class="fa fa-pencil"></i></button>
                                <button type="button" id="Delete" class="btn btn-danger" data-toggle="tooltip" title="Delete"><i class="fa fa-trash" title="Delete"></i></button>
                                <button type="button" id="Print" class="btn btn-primary" data-toggle="tooltip" title="Print"><i class="fa fa-print" title="Print"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</section>
<!-- End: Main -->

